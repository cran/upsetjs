/*! For license information please see upsetjs.js.LICENSE.txt */
!function(){var e={347:function(e,t){var n,r,a,o;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}o=function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function a(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function o(e,t,n,r,a){for(var o=0;o<e.length;++o)e[o]=t*n[o]+r*a[o]}function i(e,t,r,a,i,c,l){var s=r.fx,u=n(r.fxprime,t),f=s,d=s,m=u,y=0;function p(d,y,p){for(var h=0;h<16;++h)if(i=(d+y)/2,o(a.x,1,r.x,i,t),f=a.fx=e(a.x,a.fxprime),m=n(a.fxprime,t),f>s+c*i*u||f>=p)y=i;else{if(Math.abs(m)<=-l*u)return i;m*(y-d)>=0&&(y=d),d=i,p=f}return 0}i=i||1,c=c||1e-6,l=l||.1;for(var h=0;h<10;++h){if(o(a.x,1,r.x,i,t),f=a.fx=e(a.x,a.fxprime),m=n(a.fxprime,t),f>s+c*i*u||h&&f>=d)return p(y,i,d);if(Math.abs(m)<=-l*u)return i;if(m>=0)return p(i,y,f);d=f,y=i,i*=2}return i}e.bisect=function(e,t,n,r){var a=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,i=e(t),c=e(n),l=n-t;if(i*c>0)throw"Initial bisect points must have opposite signs";if(0===i)return t;if(0===c)return n;for(var s=0;s<a;++s){var u=t+(l/=2),f=e(u);if(f*i>=0&&(t=u),Math.abs(l)<o||0===f)return u}return t+l},e.nelderMead=function(e,t,n){var r,a=(n=n||{}).maxIterations||200*t.length,i=n.nonZeroDelta||1.05,c=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,f=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,m=void 0!==n.sigma?n.sigma:.5,y=t.length,p=new Array(y+1);p[0]=t,p[0].fx=e(t),p[0].id=0;for(var h=0;h<y;++h){var v=t.slice();v[h]=v[h]?v[h]*i:c,p[h+1]=v,p[h+1].fx=e(v),p[h+1].id=h+1}function x(e){for(var t=0;t<e.length;t++)p[y][t]=e[t];p[y].fx=e.fx}for(var g=function(e,t){return e.fx-t.fx},b=t.slice(),_=t.slice(),w=t.slice(),S=t.slice(),M=0;M<a;++M){if(p.sort(g),n.history){var E=p.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));E.sort((function(e,t){return e.id-t.id})),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:E})}for(r=0,h=0;h<y;++h)r=Math.max(r,Math.abs(p[0][h]-p[1][h]));if(Math.abs(p[0].fx-p[y].fx)<l&&r<s)break;for(h=0;h<y;++h){b[h]=0;for(var k=0;k<y;++k)b[h]+=p[k][h];b[h]/=y}var C=p[y];if(o(_,1+u,b,-u,C),_.fx=e(_),_.fx<p[0].fx)o(S,1+f,b,-f,C),S.fx=e(S),S.fx<_.fx?x(S):x(_);else if(_.fx>=p[y-1].fx){var A=!1;if(_.fx>C.fx?(o(w,1+d,b,-d,C),w.fx=e(w),w.fx<C.fx?x(w):A=!0):(o(w,1-d*u,b,d*u,C),w.fx=e(w),w.fx<_.fx?x(w):A=!0),A){if(m>=1)break;for(h=1;h<p.length;++h)o(p[h],1-m,p[0],m,p[h]),p[h].fx=e(p[h])}}else x(_)}return p.sort(g),{fx:p[0].fx,x:p[0]}},e.conjugateGradient=function(e,t,c){var l,s,u,f={x:t.slice(),fx:0,fxprime:t.slice()},d={x:t.slice(),fx:0,fxprime:t.slice()},m=t.slice(),y=1;u=(c=c||{}).maxIterations||20*t.length,f.fx=e(f.x,f.fxprime),a(l=f.fxprime.slice(),f.fxprime,-1);for(var p=0;p<u;++p){if(y=i(e,l,f,d,y),c.history&&c.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:y}),y){o(m,1,d.fxprime,-1,f.fxprime);var h=n(f.fxprime,f.fxprime);o(l,Math.max(0,n(m,d.fxprime)/h),l,-1,d.fxprime),s=f,f=d,d=s}else a(l,f.fxprime,-1);if(r(f.fxprime)<=1e-5)break}return c.history&&c.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:y}),f},e.gradientDescent=function(e,t,n){for(var a=(n=n||{}).maxIterations||100*t.length,i=n.learnRate||.001,c={x:t.slice(),fx:0,fxprime:t.slice()},l=0;l<a&&(c.fx=e(c.x,c.fxprime),n.history&&n.history.push({x:c.x.slice(),fx:c.fx,fxprime:c.fxprime.slice()}),o(c.x,1,c.x,-i,c.fxprime),!(r(c.fxprime)<=1e-5));++l);return c},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var o,c={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},s=n.maxIterations||100*t.length,u=n.learnRate||1,f=t.slice(),d=n.c1||.001,m=n.c2||.1,y=[];if(n.history){var p=e;e=function(e,t){return y.push(e.slice()),p(e,t)}}c.fx=e(c.x,c.fxprime);for(var h=0;h<s&&(a(f,c.fxprime,-1),u=i(e,f,c,l,u,d,m),n.history&&(n.history.push({x:c.x.slice(),fx:c.fx,fxprime:c.fxprime.slice(),functionCalls:y,learnRate:u,alpha:u}),y=[]),o=c,c=l,l=o,!(0===u||r(c.fxprime)<1e-5));++h);return c},e.zeros=t,e.zerosM=function(e,n){return t(e).map((function(){return t(n)}))},e.norm2=r,e.weightedSum=o,e.scale=a},"object"===i(t)?o(t):(r=[t],void 0===(a="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=a))},461:function(e,t,n){var r,a=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function a(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return a(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,a=t.length;r<a;r++){var i=t.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,a=n.length;r<a;r++)n[r]=256*t[2*r]+t[2*r+1];var i=[];return n.forEach((function(t){i.push(e(t))})),o.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return a(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,a,o,i={},c={},l="",s="",u="",f=2,d=3,m=2,y=[],p=0,h=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(i,l)||(i[l]=d++,c[l]=!0),s=u+l,Object.prototype.hasOwnProperty.call(i,s))u=s;else{if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)p<<=1,h==t-1?(h=0,y.push(n(p)),p=0):h++;for(a=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}else{for(a=1,r=0;r<m;r++)p=p<<1|a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}0==--f&&(f=Math.pow(2,m),m++),delete c[u]}else for(a=i[u],r=0;r<m;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1;0==--f&&(f=Math.pow(2,m),m++),i[s]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)p<<=1,h==t-1?(h=0,y.push(n(p)),p=0):h++;for(a=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}else{for(a=1,r=0;r<m;r++)p=p<<1|a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}0==--f&&(f=Math.pow(2,m),m++),delete c[u]}else for(a=i[u],r=0;r<m;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1;0==--f&&(f=Math.pow(2,m),m++)}for(a=2,r=0;r<m;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1;for(;;){if(p<<=1,h==t-1){y.push(n(p));break}h++}return y.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var a,o,i,c,l,s,u,f=[],d=4,m=4,y=3,p="",h=[],v={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)f[a]=a;for(i=0,l=Math.pow(2,2),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;switch(i){case 0:for(i=0,l=Math.pow(2,8),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;u=e(i);break;case 1:for(i=0,l=Math.pow(2,16),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;u=e(i);break;case 2:return""}for(f[3]=u,o=u,h.push(u);;){if(v.index>t)return"";for(i=0,l=Math.pow(2,y),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;switch(u=i){case 0:for(i=0,l=Math.pow(2,8),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;f[m++]=e(i),u=m-1,d--;break;case 1:for(i=0,l=Math.pow(2,16),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;f[m++]=e(i),u=m-1,d--;break;case 2:return h.join("")}if(0==d&&(d=Math.pow(2,y),y++),f[u])p=f[u];else{if(u!==m)return null;p=o+o.charAt(0)}h.push(p),f[m++]=o+p.charAt(0),o=p,0==--d&&(d=Math.pow(2,y),y++)}}};return o}();void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{DashUpSetJS:function(){return Go}}),Object.create,Object.create;var e=window.React,t=n.n(e);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,a={setA:r,setB:r,union:r,intersection:r};return function(o){if(o===e)return a;var i=0;o.forEach((function(e){(t&&n.has(t(e))||!t&&n.has(e))&&i++}));var c=function(e){return e instanceof Set?e.size:e.length}(o);return{setA:r,setB:c,intersection:i,union:r+c-i}}}function c(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=Array.isArray(e)?e:Array.from(e),a={setA:r,setB:r,union:r,intersection:r};return function(o){if(o===e)return a;var i=[],c=r.slice();return o.forEach((function(e){t&&n.has(t(e))||!t&&n.has(e)?i.push(e):c.push(e)})),{setA:r,setB:Array.isArray(o)?o:Array.from(o),intersection:i,union:c}}}function l(e){return Array.isArray(e.elems)}function s(e){return"function"==typeof e.overlap}function u(e){return null!=e.set}function f(e,t,n){if(s(e))return e.overlap;if(u(e)&&e.set.overlap)return e.set.overlap;var r=i(l(e)?e.elems:e.set.elems,n);return function(n){return n.overlap&&l(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&u(e)?n.overlap(e.set):r(n.elems)[t]}}function d(e,t,n){if(s(e))return function(){return null};if("intersection"===t){var r=function(e,t){var n=e instanceof Set?Array.from(e):e,r=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return function(a){if(a===e)return n;var o=[];return a.forEach((function(e){(t&&r.has(t(e))||!t&&r.has(e))&&o.push(e)})),o}}(l(e)?e.elems:e.set.elems,n);return function(e){return r(e.elems)}}var a=c(l(e)?e.elems:e.set.elems,n);return function(e){return a(e.elems)[t]}}function m(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function y(e){return m(e)&&"set"===e.type}function p(e){return y(e)||function(e){var t=e;return m(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}(e)}function h(e,t){return e.name.localeCompare(t.name)}function v(e,t){return t.cardinality-e.cardinality}function x(e,t){return e.degree-t.degree}function g(e){return function(t,n){return-e(t,n)}}function b(e){return function(t,n){var r=function(e){return e<0?Number.POSITIVE_INFINITY:e},a=r(e.findIndex((function(e){return t.sets.has(e)}))),o=r(e.findIndex((function(e){return n.sets.has(e)})));return a-o}}function _(e,t){if(!t)return h;var n,r=Array.isArray(t)?t:[t];return 0===r.length?h:(n=r.map((function(t){switch(t){case"cardinality":case"cardinality:desc":return v;case"cardinality:asc":return g(v);case"name:desc":return g(h);case"degree":case"degree:asc":return x;case"degree:desc":return g(x);case"group":case"group:asc":return b(e);case"group:desc":return g(b(e));default:return h}})),function(e,t){return n.reduce((function(n,r){return 0===n?r(e,t):n}),0)})}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;return n.order&&(r=r.sort(_(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}var S={distinctIntersection:" ∩ ",intersection:" ∩ ",union:" ∪ ",composite:","};function M(e){if(!e)return[255,255,255];var t=e.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);if(t)return[Number.parseInt(t[1],16),Number.parseInt(t[2],16),Number.parseInt(t[3],16)];var n=e.match(/\(([\d]+)[, ]([\d]+)[, ]([\d]+)\)/i);return n?[Number.parseInt(n[1],10),Number.parseInt(n[2],10),Number.parseInt(n[3],10)]:[255,255,255]}function E(e){if(1===e.length)return e[0];if(!e.every((function(e){return null==e}))){var t=e.map(M),n=Math.floor(t.reduce((function(e,t){return e+t[0]}),0)/t.length),r=Math.floor(t.reduce((function(e,t){return e+t[1]}),0)/t.length),a=Math.floor(t.reduce((function(e,t){return e+t[2]}),0)/t.length);return"#".concat(n.toString(16)).concat(r.toString(16)).concat(a.toString(16))}}function k(e,t,n){var r=Array.from(e).sort((function(e,n){return t.get(e)-t.get(n)}));return 1===r.length?r[0].name:"(".concat(r.map((function(e){return e.name})).join(n),")")}function C(e,t,n,r,a){return{type:0===n.size?"composite":e,elems:r,color:a(Array.from(n).map((function(e){return e.color}))),sets:n,name:t,cardinality:r.length,degree:n.size}}function A(e,t,n,r,a,o,i){var c=new Set(e.sets);t.sets.forEach((function(e){return c.add(e)}));var l=k(c,a,S[o]);if(0===e.cardinality||0===t.cardinality)return C(o,l,c,[],i);var s=e,u=t;e.cardinality>t.cardinality&&(s=t,u=e);for(var f=new Set,d=n.get(u),m=[],y=s.elems.length,p=0;p<y;p++){var h=s.elems[p],v=r(h);d.has(v)&&(f.add(v),m.push(h))}var x=C(o,l,c,m,i);return n.set(x,f),x}function N(e,t,n,r,a,o,i){var c=new Set(e.sets);t.sets.forEach((function(e){return c.add(e)}));var l=k(c,a,S[o]);if(0===e.cardinality){var s=C(o,l,c,t.elems,i);return n.set(s,n.get(t)),s}if(0===t.cardinality){var u=C(o,l,c,e.elems,i);return n.set(u,n.get(e)),u}var f=e,d=t;e.cardinality>t.cardinality&&(f=t,d=e);var m=new Set(n.get(d)),y=n.get(d),p=d.elems.slice();f.elems.forEach((function(e){var t=r(e);y.has(t)||(m.add(t),p.push(e))}));var h=C(o,l,c,p,i);return n.set(h,m),h}function O(e,t,n,r,a,o){if("number"==typeof t)return{type:"composite",elems:[],color:o?o([]):void 0,sets:new Set,name:"()",cardinality:t,overlap:function(e){return e===this||p(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return C(e,"()",new Set,t,o);var i=Array.from(r.values()),c=n.filter((function(e){var t=a(e);return i.every((function(e){return!e.has(t)}))}));return C(e,"()",new Set,c,o)}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?"intersection":n,a=t.min,o=void 0===a?0:a,i=t.max,c=void 0===i?Number.POSITIVE_INFINITY:i,l=t.empty,s=void 0!==l&&l,u=t.elems,f=void 0===u?[]:u,d=t.notPartOfAnySet,m=t.toElemKey,y=t.mergeColors,p=void 0===y?E:y,h=[],v=new Map(e.map((function(e,t){return[e,t]}))),x=new Map(e.map((function(e){return[e,m?new Set(e.elems.map(m)):new Set(e.elems)]}))),g=m?null:x,b=m?x:null,_="union"===r?N:A;function S(t){if(!(t.degree<o||t.degree>c||0===t.cardinality&&!s))if("distinctIntersection"===r){var n=e.filter((function(e){return!t.sets.has(e)})),a=[];if(m){var i=n.map((function(e){return b.get(e)}));a=t.elems.filter((function(e){var t=m(e);return i.every((function(e){return!e.has(t)}))}))}else{var l=n.map((function(e){return g.get(e)}));a=t.elems.filter((function(e){return l.every((function(t){return!t.has(e)}))}))}if(a.length!==t.cardinality){var u=C(r,t.name,t.sets,a,p);(0!==u.cardinality||s)&&h.push(u)}else h.push(t)}else h.push(t)}function M(e,t,n,a){if(!(t>c))for(var o=e.length,i=0;i<o;i++){for(var l=e[i],u=[],f=i+1;f<o;f++){var d=e[f],m=_(l,d,n,a,v,r,p);S(m),("union"===r||m.cardinality>0||s)&&u.push(m)}u.length>1&&M(u,t+1,n,a)}}o<=0&&S(m?O(r,d,f,b,m,p):O(r,d,f,g,(function(e){return e}),p));var k=e.map((function(e){var t=C(r,e.name,new Set([e]),e.elems,p);return x.set(t,x.get(e)),S(t),t}));return m?M(k,2,b,m):M(k,2,g,(function(e){return e})),w(e,h,t)}function I(e){return"".concat(e.name,":").concat(e.type,"#").concat(e.cardinality)}function z(e){return 0===e.sets.size}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,r={done:null,aKey:"",bKey:"",aIsSet:!1,bIsSet:!1,toKey:n};return e===t?(r.done=e.cardinality,r):0===e.cardinality||0===t.cardinality?(r.done=0,r):(r.aKey=n(e),r.bKey=n(t),r.aKey===r.bKey?(r.done=e.cardinality,r):(r.aIsSet=y(e),r.bIsSet=y(t),!r.aIsSet&&z(e)||!r.bIsSet&&z(t)?(r.done=0,r):r))}function T(e,t){return!(t.bIsSet||!t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.aKey)}function P(e,t){return!(!t.bIsSet||t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.bKey)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return e.map((function(e){var n=Array.from(e.sets).map(t).sort();return{key:n.join("&"),s:n,sets:new Set(n),degree:e.degree,cardinality:e.cardinality}}))}function R(e,t,n){var r=new Set;if(n.aIsSet)r.add(n.aKey);else for(var a=0,o=Array.from(e.sets);a<o.length;a++){var i=o[a];r.add(n.toKey(i))}if(n.bIsSet)r.add(n.bKey);else for(var c=0,l=Array.from(t.sets);c<l.length;c++){var s=l[c];r.add(n.toKey(s))}return Array.from(r).sort().join("&")}function F(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,o=new Map,i=a(q(e,r));try{for(i.s();!(n=i.n()).done;){var c,l=n.value,s=a(l.s);try{for(s.s();!(c=s.n()).done;){var u=c.value;o.has(u)?o.get(u).push(l):o.set(u,[l])}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}return function(e,n){var a=j(e,n,r);if(null!=a.done)return a.done;if(!a.aIsSet&&!a.bIsSet)return 0;if(a.aIsSet&&!a.bIsSet)return T(n,a)?n.cardinality:0;if(!a.aIsSet&&a.bIsSet)return P(e,a)?e.cardinality:0;var i=o.get(a.aKey),c=o.get(a.bKey);return i&&c?i.length<c.length?i.reduce((function(e,t){return e+(t.sets.has(a.bKey)?t.cardinality:0)}),0):c.reduce((function(e,t){return e+(t.sets.has(a.aKey)?t.cardinality:0)}),0):t(e,n)}}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,r=new Map(q(e,n).map((function(e){return[e.key,e.cardinality]})));return function(e,a){var o=j(e,a,n);if(null!=o.done)return o.done;if(o.aIsSet&&!o.bIsSet&&T(a,o))return a.cardinality;if(!o.aIsSet&&o.bIsSet&&P(e,o))return e.cardinality;var i=R(e,a,o);return r.has(i)?r.get(i):t(e,a)}}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,r=new Map(q(e,n).map((function(e){return[e.key,e.cardinality]})));return function(e,a){var o=j(e,a,n);if(null!=o.done)return o.done;if(o.aIsSet&&!o.bIsSet&&T(a,o))return e.cardinality;if(!o.aIsSet&&o.bIsSet&&P(e,o))return a.cardinality;var i=R(e,a,o);return r.has(i)?e.cardinality+a.cardinality-r.get(i):t(e,a)}}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;if(0===e.length)return t;var r=e[0].type;if(e.some((function(e){return e.type!==r})))return t;switch(r){case"union":return B(e,t,n);case"intersection":return H(e,t,n);case"distinctIntersection":return F(e,t,n)}return t}function K(e){if(0===e.length)return"";var t=e.length,n=e.flat();return"".concat(t,";").concat(function(e){if(0===e.length)return"";for(var t=[],n=e[0],r=1,a=1;a<e.length;a++){var o=e[a];o===n?r++:(r>1?t.push("".concat(n,"=").concat(r-1)):0===n?t.push(""):t.push(n.toString()),n=o,r=1)}return r>1?t.push("".concat(n,"=").concat(r)):0===n?t.push(""):t.push(n.toString()),t.join(",")}(n))}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.toElemKey,a=n.what,o=void 0===a?"intersection":a,c=n.compress,l=void 0===c?"auto":c,s=e.concat(t);function u(e){if(e.overlap)return e.overlap;var t=i(e.elems,r);return function(n){return n.overlap?n.overlap(e):t(n.elems)[o]}}var f=s.map((function(e,t){for(var n=u(e),r=[],a=t+1;a<s.length;a++)r.push(n(s[a]));return r}));if(f.pop(),"no"===l)return f;var d=K(f);if("yes"===l)return d;var m=JSON.stringify(f).length,y=d.length+2;return y<.6*m?d:f}var D=function(e,t,n){var r=e.length+n,a=t/Math.max(1,r),o=t-a*e.length,i=new Map(e.map((function(e,t){return[e,t]}))),c=a/(1+n),l=function(e){var t=i.get(e);if(null!=t)return o+a*t};return l.bandwidth=function(){return c},l};function V(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=0;r<e.length-n;r+=n){var a=e[r],o=e[r+1];if(a<o){var i=a+t[r]/2,c=o-t[r+1]/2;if(i>c)return!0}else{var l=a-t[r]/2,s=o+t[r+1]/2;if(s>l)return!0}}return!1}function $(e,t,n,r,a){var o=e[e.length-1];if(!o.label)for(var i=e.length-2;i>0;--i)if(e[i].label){o=e[i];break}if(o.value<t){var c=n(o.value),l=n(t);if(c<l)c+r(o.value)/2<l-r(t)/2&&e.push({value:t,label:a(t)});else{var s=c-r(o.value)/2;l+r(t)/2<s&&e.push({value:t,label:a(t)})}}return e}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.map((function(e,r){return{value:e,label:1===n||r%n==0?t(e):void 0}}))}function Q(e,t,n,r,a){var o=e.map((function(e){return t(e)})),i=e.map((function(e){return n(e)}));return V(o,i)&&V(o,i,2)?null:$(G(e,a),r,t,n,a)}function J(e){return e.toLocaleString()}function Y(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=0;r<=e;r+=t)n.push(r);return n}function Z(e,t,n,r){if(t<=0)return[];for(var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11,n=Math.max(0,Math.floor(Math.log10(e)-.5)),r=Math.pow(10,n),a=[1,2,5],o=a.map((function(e){return e*r}));n>0&&o.unshift(a[a.length-1]*Math.pow(10,n-1)),o.push(a[0]*Math.pow(10,n+1));var i=Math.ceil(e/t);return o.filter((function(t){return t>=i&&t<=e}))}(e,t),o=0;o<a.length;o++){var i=Q(Y(e,a[o]),n,r,e,J);if(i)return i}return G([0,e],J)}var X=function(e,t,n){var r=t[1]-t[0],a=e,o=function(e){var n=Math.max(0,Math.min(e,a))/a;return t[0]+n*r};return o.ticks=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if("vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return Z(e,t+1,o,(function(){return r}))}var a=n.fontSizeHint/1.4;return Z(e,t+1,o,(function(e){return Math.ceil(J(e).length*a)}))},o.tickFormat=function(){return J},o};function ee(e){var t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1)),r=Math.round(e/Math.pow(10,3*n-1))/10;return"".concat(r.toLocaleString()).concat(t[n])}function te(e,t){for(var n=[],r=Math.pow(10,t),a=1;a<=e;a*=r)n.push(a);return n}function ne(e,t){for(var n=[],r=1,a=0;r<=e;r*=10,a++){n.push({value:r,label:1===t||a%t==0?ee(r):void 0});for(var o=r+r;o<10*r&&o<e;o+=r*t)n.push({value:o})}return n}function re(e,t,n,r){if(t<=0)return[];for(var a=0,o=[1,2,5];a<o.length;a++){var i=o[a];if(Q(te(e,i),n,r,e,ee))return $(ne(e,i),e,n,r,ee)}return G([0,e],ee)}var ae=function(e,t,n){var r=t[1]-t[0],a=e<1?1:Math.log10(e),o=function(e){var n=Math.max(0,Math.min(e,a)),o=n<=1?0:Math.log10(n)/a;return t[0]+o*r};return o.ticks=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if("vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return re(e,t+1,o,(function(){return r}))}var a=n.fontSizeHint/1.4;return re(e,t+1,o,(function(e){return Math.ceil(ee(e).length*a)}))},o.tickFormat=function(){return ee},o};function oe(e){if(0===e.length)return"";for(var t=[],n=0,r=function(r){return r===n+1?t.push(e[n].toString()):r===n+2&&r<10?t.push("".concat(e[n],",").concat(e[n+1])):t.push("".concat(e[n],"+").concat(r-n-1)),r},a=1;a<e.length;a++){var o=e[a-1]+1;e[a]!==o&&(n=r(a),n=a)}return r(e.length),t.join(",")}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sortAble,a=n.compress,o=void 0===a?"auto":a;if(0===e.length)return[];var i=e.map((function(e){return t(e)}));if("no"===o)return i;r&&i.sort((function(e,t){return e-t}));var c=oe(i),l=JSON.stringify(i).length,s=c.length+2;return s<.6*l||l-s>50||"yes"===o&&s<l?c:i}function ce(e,t){return t.color&&(e.color=t.color),e}function le(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({sortAble:!0},n),a=null!==(t=n.toKey)&&void 0!==t?t:I,o=new Map(e.sets.map((function(e,t){return[a(e),t]}))),i=new Map(e.combinations.map((function(e,t){return[a(e),t]}))),c=function(t){if("set"===t.type)return{type:t.type,index:o.get(a(t))};var n=i.get(a(t));return null==n||n<0?ie(t.elems,e.toElemIndex,r):{type:t.type,index:n}},l=e.sets.map((function(e,t){return{key:a(e),i:t}}));return{sets:e.sets.map((function(t){return ce({name:t.name,cardinality:t.cardinality,elems:ie(t.elems,e.toElemIndex,r)},t)})),combinations:"no"===n.compress?e.combinations.map((function(t){var n=new Set(Array.from(t.sets).map(a));return ce({name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:l.filter((function(e){var t=e.key;return n.has(t)})).map((function(e){return e.i})),elems:ie(t.elems,e.toElemIndex,r)},t)})):void 0,combinationOptions:e.combinationOptions,selection:e.selection?Array.isArray(e.selection)?ie(e.selection,e.toElemIndex,r):c(e.selection):void 0,queries:e.queries.map((function(t){var n=u(t)?c(t.set):ie(Array.from(t.elems),e.toElemIndex,r);return{name:t.name,color:t.color,set:"string"==typeof n||Array.isArray(n)?void 0:n,elems:"string"==typeof n||Array.isArray(n)?n:void 0}}))}}function se(e,t){return 1===e.length?e[0].name:"(".concat(e.map((function(e){return e.name})).join(S[t]),")")}function ue(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==(t=n.toKey)&&void 0!==t?t:I,a=new Map(e.sets.map((function(e,t){return[r(e),t]}))),o=new Map(e.combinations.map((function(e,t){return[r(e),t]}))),c=function(t){if(p(t)){if("set"===t.type)return{type:t.type,index:a.get(r(t))};var n=o.get(r(t));if(null!=n&&n>=0)return{type:t.type,index:n}}var c=i(p(t)?t.elems:t);return e.sets.map((function(e){return c(e.elems).intersection})).concat(e.combinations.map((function(e){return c(e.elems).intersection})))},l=new Map(e.sets.map((function(e,t){return[r(e),t]}))),s=W(e.sets,e.combinations,n),f="yes"===n.compress,d=function(t){var n=Array.from(t.sets).map((function(e){return l.get(r(e))})).sort((function(e,t){return e-t})),a={c:t.cardinality,s:n.reduce((function(e,t){return e+Math.pow(2,t)}),0)};return t.name!==se(n.map((function(t){return e.sets[t]})),t.type)&&(a.n=t.name),"intersection"!==t.type&&(a.type=t.type[0]),t.color&&(a.cc=t.color),a};return{sets:f?e.sets.map((function(e){return{n:e.name,cc:e.color,c:e.cardinality}})):e.sets.map((function(e){return ce({name:e.name,cardinality:e.cardinality},e)})),combinations:f?e.combinations.map(d):e.combinations.map((function(e){return ce({name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map((function(e){return l.get(r(e))})).sort((function(e,t){return e-t}))},e)})),overlaps:s,selection:e.selection?c(e.selection):void 0,queries:e.queries.map((function(t){if(u(t)){var n=c(t.set);return Array.isArray(n)?{name:t.name,color:t.color,overlaps:n}:{name:t.name,color:t.color,set:n}}var r=i(t.elems),a=e.sets.map((function(e){return r(e.elems).intersection})).concat(e.combinations.map((function(e){return r(e.elems).intersection})));return{name:t.name,color:t.color,overlaps:a}}))}}var fe=n(461),de=n.n(fe);function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||he(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=he(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function he(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e){return Array.from(e.classList).find((function(e){return e.startsWith("root-")})).slice("root-".length)}function ge(e,t){var n,r;return null!==(r=null===(n=e.querySelector("titleTextStyle-".concat(t)))||void 0===n?void 0:n.textContent)&&void 0!==r?r:"UpSetJS"}function be(e,t){var n,r;return null!==(r=null===(n=e.querySelector("descTextStyle-".concat(t)))||void 0===n?void 0:n.textContent)&&void 0!==r?r:""}var _e={},we=[],Se={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"},Me=[.18,.12,.7],Ee=[.6,.4],ke={type:"intersection",order:["cardinality:desc","name:asc"]},Ce=Object.keys(Se),Ae=[.7,.4],Ne=[.15,.3],Oe={sets:[],intersections:[],bb:{x:0,y:0,width:10,height:10}},Le={sets:[{cx:0,cy:0,r:5,text:{x:3.5,y:-4},align:"start",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:5,arcs:[{mode:"i",ref:0,x2:0,y2:-5,sweep:!1,large:!1},{mode:"i",ref:0,x2:0,y2:5,sweep:!1,large:!1}],text:{x:0,y:0}}],bb:{x:-5,y:-5,width:10,height:10}},Ie={sets:[{cx:-4,cy:0,r:5,text:{x:-7.5,y:4},align:"end",verticalAlign:"top"},{cx:4,cy:0,r:5,text:{x:7.5,y:-4},align:"start",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:-3,arcs:[{mode:"i",ref:0,x2:0,y2:3,sweep:!1,large:!0},{mode:"o",ref:1,x2:0,y2:-3,sweep:!0,large:!1}],text:{x:-4,y:0}},{sets:[1],x1:0,y1:3,arcs:[{mode:"i",ref:1,x2:0,y2:-3,sweep:!1,large:!0},{mode:"o",ref:0,x2:0,y2:3,sweep:!0,large:!1}],text:{x:4,y:0}},{sets:[0,1],x1:0,y1:3,arcs:[{mode:"i",ref:0,x2:0,y2:-3,sweep:!1,large:!1},{mode:"i",ref:1,x2:0,y2:3,sweep:!1,large:!1}],text:{x:0,y:0}}],bb:{x:-9,y:-5,width:18,height:10}},ze={sets:[{cx:-3.464,cy:-2,r:5,text:{x:-7,y:-6},align:"end",verticalAlign:"bottom"},{cx:3.464,cy:-2,r:5,text:{x:7,y:-6},align:"start",verticalAlign:"bottom"},{cx:0,cy:4,r:5,text:{x:4,y:7.5},align:"start",verticalAlign:"top"}],intersections:[{sets:[0],x1:-4.855,y1:2.803,arcs:[{mode:"o",ref:2,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:1,x2:0,y2:-5.606,sweep:!0,large:!1},{mode:"i",ref:0,x2:-4.855,y2:2.803,sweep:!1,large:!0}],text:{x:-4.216,y:-2.434}},{sets:[1],x1:0,y1:-5.606,arcs:[{mode:"o",ref:0,x2:1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:2,x2:4.855,y2:2.803,sweep:!0,large:!1},{mode:"i",ref:1,x2:0,y2:-5.606,sweep:!1,large:!0}],text:{x:4.216,y:-2.434}},{sets:[2],x1:-4.855,y1:2.803,arcs:[{mode:"o",ref:0,x2:0,y2:1.606,sweep:!1,large:!1},{mode:"o",ref:1,x2:4.855,y2:2.803,sweep:!1,large:!1},{mode:"i",ref:2,x2:-4.855,y2:2.803,sweep:!0,large:!0}],text:{x:0,y:4.869}},{sets:[0,1],x1:0,y1:-5.606,arcs:[{mode:"i",ref:1,x2:-1.39,y2:-.803,sweep:!1,large:!1},{mode:"o",ref:2,x2:1.39,y2:-.803,sweep:!0,large:!1},{mode:"i",ref:0,x2:0,y2:-5.606,sweep:!1,large:!1}],text:{x:0,y:-2.404}},{sets:[0,2],x1:-4.855,y1:2.803,arcs:[{mode:"i",ref:2,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:1,x2:0,y2:1.606,sweep:!1,large:!1},{mode:"i",ref:0,x2:-4.855,y2:2.803,sweep:!0,large:!1}],text:{x:-2.082,y:1.202}},{sets:[1,2],x1:4.855,y1:2.803,arcs:[{mode:"i",ref:2,x2:1.39,y2:-.803,sweep:!1,large:!1},{mode:"o",ref:0,x2:0,y2:1.606,sweep:!0,large:!1},{mode:"i",ref:1,x2:4.855,y2:2.803,sweep:!1,large:!1}],text:{x:2.082,y:1.202}},{sets:[0,1,2],x1:1.39,y1:-.803,arcs:[{mode:"i",ref:0,x2:0,y2:1.606,sweep:!0,large:!1},{mode:"i",ref:1,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"i",ref:2,x2:1.39,y2:-.803,sweep:!0,large:!1}],text:{x:0,y:0}}],bb:{x:-8.464,y:-7,width:16.928,height:16}},je={sets:[{cx:.439,cy:-1.061,rx:2.5,ry:5,rotation:45,text:{x:4.5,y:-4.5},align:"start",verticalAlign:"bottom"},{cx:2.561,cy:1.061,rx:2.5,ry:5,rotation:45,text:{x:4,y:3.75},align:"start",verticalAlign:"top"},{cx:-2.561,cy:1.061,rx:2.5,ry:5,rotation:-45,text:{x:-4,y:3.7},align:"end",verticalAlign:"top"},{cx:-.439,cy:-1.061,rx:2.5,ry:5,rotation:-45,text:{x:-4.5,y:-4.5},align:"end",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:-3.94,arcs:[{ref:0,mode:"i",x2:4.328,y2:-2.828,sweep:!0,large:!1},{ref:1,mode:"o",x2:2.179,y2:-1.858,large:!1},{ref:3,mode:"o",x2:0,y2:-3.94,large:!1}],text:{x:2.914,y:-3.536}},{sets:[1],x1:4.328,y1:-2.828,arcs:[{ref:1,mode:"i",x2:0,y2:5.006,sweep:!0,large:!0},{ref:2,mode:"o",x2:1.328,y2:2.828},{ref:3,mode:"o",x2:3.108,y2:-.328},{ref:0,mode:"o",x2:4.328,y2:-2.828}],text:{x:5.036,y:-1.414}},{sets:[2],x1:0,y1:5.006,arcs:[{ref:2,mode:"i",x2:-4.328,y2:-2.828,sweep:!0,large:!0},{ref:3,mode:"o",x2:-3.108,y2:-.328},{ref:0,mode:"o",x2:-1.328,y2:2.828},{ref:1,mode:"o",x2:0,y2:5.006}],text:{x:-5.036,y:-1.414}},{sets:[3],x1:-4.328,y1:-2.828,arcs:[{ref:3,mode:"i",x2:0,y2:-3.94,sweep:!0,large:!1},{ref:0,mode:"o",x2:-2.179,y2:-1.858,large:!1},{ref:2,mode:"o",x2:-4.328,y2:-2.828,large:!1}],text:{x:-2.914,y:-3.536}},{sets:[0,1],x1:4.328,y1:-2.828,arcs:[{ref:1,mode:"i",x2:3.108,y2:-.328,sweep:!0,large:!1},{ref:3,mode:"o",x2:2.179,y2:-1.858,sweep:!1,large:!1},{ref:0,mode:"i",x2:4.328,y2:-2.828,sweep:!0,large:!1}],text:{x:3.205,y:-1.672}},{sets:[0,2],x1:-1.328,y1:2.828,arcs:[{ref:0,mode:"i",x2:-3.108,y2:-.328,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.969,y2:1.755,large:!1},{ref:1,mode:"o",x2:-1.328,y2:2.828,large:!1}],text:{x:-2.212,y:1.591}},{sets:[0,3],x1:0,y1:-3.94,arcs:[{ref:3,mode:"i",x2:2.179,y2:-1.858,sweep:!0,large:!1},{ref:1,mode:"o",x2:0,y2:.188,sweep:!1,large:!1},{ref:2,mode:"o",x2:-2.179,y2:-1.858,sweep:!1,large:!1},{ref:0,mode:"i",x2:0,y2:-3.94,sweep:!0}],text:{x:0,y:-1.87}},{sets:[1,2],x1:1.328,y1:2.828,arcs:[{ref:2,mode:"i",x2:0,y2:5.006,sweep:!0,large:!1},{ref:1,mode:"i",x2:-1.328,y2:2.828,sweep:!0,large:!1},{ref:0,mode:"o",x2:0,y2:2.346,large:!1},{ref:3,mode:"o",x2:1.328,y2:2.828}],text:{x:0,y:3.393}},{sets:[1,3],x1:3.108,y1:-.328,arcs:[{ref:3,mode:"i",x2:1.328,y2:2.828,sweep:!0,large:!1},{ref:2,mode:"o",x2:.969,y2:1.755,large:!1},{ref:1,mode:"i",x2:3.108,y2:-.328,large:!1}],text:{x:2.212,y:1.591}},{sets:[2,3],x1:-3.108,y1:-.328,arcs:[{ref:3,mode:"i",x2:-4.328,y2:-2.828,sweep:!0,large:!1},{ref:2,mode:"i",x2:-2.179,y2:-1.858,sweep:!0,large:!1},{ref:0,mode:"o",x2:-3.108,y2:-.328,large:!1}],text:{x:-3.205,y:-1.672}},{sets:[0,1,2],x1:0,y1:2.346,arcs:[{ref:0,mode:"i",x2:-1.328,y2:2.828,sweep:!0,large:!1},{ref:1,mode:"i",x2:-.969,y2:1.755,sweep:!0,large:!1},{ref:3,mode:"o",x2:0,y2:2.346,large:!1}],text:{x:-.766,y:2.31}},{sets:[0,1,3],x1:2.179,y1:-1.858,arcs:[{ref:3,mode:"i",x2:3.108,y2:-.328,sweep:!0,large:!1},{ref:0,mode:"i",x2:.969,y2:1.755,sweep:!0,large:!1},{ref:2,mode:"o",x2:0,y2:.188,sweep:!1,large:!1},{ref:1,mode:"i",x2:2.179,y2:-1.858,sweep:!0}],text:{x:1.558,y:-.056}},{sets:[0,2,3],x1:-.969,y1:1.755,arcs:[{ref:3,mode:"i",x2:-3.108,y2:-.328,sweep:!0,large:!1},{ref:0,mode:"i",x2:-2.179,y2:-1.858,sweep:!0,large:!1},{ref:2,mode:"i",x2:0,y2:.188,sweep:!0,large:!1},{ref:1,mode:"o",x2:-.969,y2:1.755}],text:{x:-1.558,y:-.056}},{sets:[1,2,3],x1:1.328,y1:2.828,arcs:[{ref:3,mode:"i",x2:0,y2:2.346,sweep:!0,large:!1},{ref:0,mode:"o",x2:.969,y2:1.755,sweep:!1,large:!1},{ref:2,mode:"i",x2:1.328,y2:2.828,sweep:!0,large:!1}],text:{x:.766,y:2.31}},{sets:[0,1,2,3],x1:0,y1:.188,arcs:[{ref:2,mode:"i",x2:.969,y2:1.755,sweep:!0,large:!1},{ref:0,mode:"i",x2:0,y2:2.346,sweep:!0,large:!1},{ref:3,mode:"i",x2:-.969,y2:1.755,sweep:!0,large:!1},{ref:1,mode:"i",x2:0,y2:.188,sweep:!0}],text:{x:0,y:1.43}}],bb:{x:-6.5,y:-5,width:13,height:10}},Te={sets:[{cx:.5,cy:-1,rx:2.5,ry:5,rotation:0,text:{x:2.25,y:-5},align:"start",verticalAlign:"bottom"},{cx:1.106,cy:.167,rx:2.5,ry:5,rotation:72,text:{x:4.5,y:1.5},align:"start",verticalAlign:"top"},{cx:.183,cy:1.103,rx:2.5,ry:5,rotation:144,text:{x:4,y:4},align:"start",verticalAlign:"bottom"},{cx:-.992,cy:.515,rx:2.5,ry:5,rotation:216,text:{x:-4.7,y:2},align:"end",verticalAlign:"bottom"},{cx:-.797,cy:-.785,rx:2.5,ry:5,rotation:288,text:{x:-4,y:-3.6},align:"end",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:-1.653,y1:-3.541,arcs:[{ref:0,mode:"i",x2:2.857,y2:-2.666,sweep:!0,large:!1},{ref:1,mode:"o",x2:2.5,y2:-2.648,large:!1},{ref:3,mode:"o",x2:-.495,y2:-3.303,large:!1},{ref:4,mode:"o",x2:-1.653,y2:-3.541}],text:{x:.5,y:-5}},{sets:[1],x1:2.857,y1:-2.666,arcs:[{ref:1,mode:"i",x2:3.419,y2:1.893,sweep:!0,large:!1},{ref:2,mode:"o",x2:3.291,y2:1.559,large:!1},{ref:4,mode:"o",x2:2.988,y2:-1.492,large:!1},{ref:0,mode:"o",x2:2.857,y2:-2.666}],text:{x:4.91,y:-1.07}},{sets:[2],x1:3.419,y1:1.893,arcs:[{ref:2,mode:"i",x2:-.744,y2:3.837,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.466,y2:3.612,large:!1},{ref:0,mode:"o",x2:2.342,y2:2.381,large:!1},{ref:1,mode:"o",x2:3.419,y2:1.893}],text:{x:2.534,y:4.339}},{sets:[3],x1:-.744,y1:3.837,arcs:[{ref:3,mode:"i",x2:-3.879,y2:.478,sweep:!0,large:!1},{ref:4,mode:"o",x2:-3.579,y2:.673,large:!1},{ref:1,mode:"o",x2:-1.54,y2:2.963,large:!1},{ref:2,mode:"o",x2:-.744,y2:3.837}],text:{x:-3.343,y:3.751}},{sets:[4],x1:-3.879,y1:.478,arcs:[{ref:4,mode:"i",x2:-1.653,y2:-3.541,sweep:!0,large:!1},{ref:0,mode:"o",x2:-1.746,y2:-3.196,large:!1},{ref:2,mode:"o",x2:-3.294,y2:-.549,large:!1},{ref:3,mode:"o",x2:-3.879,y2:.478}],text:{x:-4.601,y:-2.021}},{sets:[0,1],x1:2.5,y1:-2.648,arcs:[{ref:1,mode:"i",x2:2.857,y2:-2.666,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.988,y2:-1.492,sweep:!0,large:!1},{ref:4,mode:"o",x2:2.572,y2:-1.839,large:!1},{ref:3,mode:"o",x2:2.5,y2:-2.648}],text:{x:2.741,y:-2.152}},{sets:[0,2],x1:2.342,y1:2.381,arcs:[{ref:0,mode:"i",x2:-.466,y2:3.612,sweep:!0,large:!1},{ref:3,mode:"o",x2:.257,y2:2.922,large:!1},{ref:1,mode:"o",x2:2.342,y2:2.381,large:!1}],text:{x:.5,y:3.5}},{sets:[0,3],x1:-.495,y1:-3.303,arcs:[{ref:3,mode:"i",x2:2.5,y2:-2.648,sweep:!0,large:!1},{ref:1,mode:"o",x2:1.51,y2:-2.515,large:!1},{ref:4,mode:"o",x2:-.495,y2:-3.303,large:!1}],text:{x:1.653,y:-3.125}},{sets:[0,4],x1:-1.653,y1:-3.541,arcs:[{ref:4,mode:"i",x2:-.495,y2:-3.303,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.954,y2:-3.015,large:!1},{ref:2,mode:"o",x2:-1.746,y2:-3.196,large:!1},{ref:0,mode:"i",x2:-1.653,y2:-3.541}],text:{x:-1.199,y:-3.272}},{sets:[1,2],x1:3.291,y1:1.559,arcs:[{ref:2,mode:"i",x2:3.419,y2:1.893,sweep:!0,large:!1},{ref:1,mode:"i",x2:2.342,y2:2.381,sweep:!0,large:!1},{ref:0,mode:"o",x2:2.544,y2:1.878,large:!1},{ref:4,mode:"o",x2:3.291,y2:1.559}],text:{x:2.894,y:1.942}},{sets:[1,3],x1:-1.54,y1:2.963,arcs:[{ref:1,mode:"i",x2:-3.579,y2:.673,sweep:!0,large:!1},{ref:4,mode:"o",x2:-2.7,y2:1.147,large:!1},{ref:2,mode:"o",x2:-1.54,y2:2.963,large:!1}],text:{x:-3.174,y:1.557}},{sets:[1,4],x1:2.988,y1:-1.492,arcs:[{ref:4,mode:"i",x2:3.291,y2:1.559,sweep:!0,large:!1},{ref:2,mode:"o",x2:2.858,y2:.659,large:!1},{ref:0,mode:"o",x2:2.988,y2:-1.492,large:!1}],text:{x:3.483,y:.606}},{sets:[2,3],x1:-.466,y1:3.612,arcs:[{ref:3,mode:"i",x2:-.744,y2:3.837,sweep:!0,large:!1},{ref:2,mode:"i",x2:-1.54,y2:2.963,sweep:!0,large:!1},{ref:1,mode:"o",x2:-1,y2:3,large:!1},{ref:0,mode:"o",x2:-.466,y2:3.612}],text:{x:-.953,y:3.352}},{sets:[2,4],x1:-3.294,y1:-.549,arcs:[{ref:2,mode:"i",x2:-1.746,y2:-3.196,sweep:!0},{ref:0,mode:"o",x2:-1.925,y2:-2.213},{ref:3,mode:"o",x2:-3.294,y2:-.549}],text:{x:-2.462,y:-2.538}},{sets:[3,4],x1:-3.579,y1:.673,arcs:[{ref:4,mode:"i",x2:-3.879,y2:.478,sweep:!0,large:!1},{ref:3,mode:"i",x2:-3.294,y2:-.549,sweep:!0,large:!1},{ref:2,mode:"o",x2:-3.162,y2:-.024,large:!1},{ref:1,mode:"o",x2:-3.579,y2:.673}],text:{x:-3.483,y:.13}},{sets:[0,1,2],x1:2.544,y1:1.878,arcs:[{ref:0,mode:"i",x2:2.342,y2:2.381,sweep:!0,large:!1},{ref:1,mode:"i",x2:.257,y2:2.922,sweep:!0,large:!1},{ref:3,mode:"o",x2:.983,y2:2.049,large:!1},{ref:4,mode:"o",x2:2.544,y2:1.878}],text:{x:1.457,y:2.331}},{sets:[0,1,3],x1:1.51,y1:-2.515,arcs:[{ref:1,mode:"i",x2:2.5,y2:-2.648,sweep:!0,large:!1},{ref:3,mode:"i",x2:2.572,y2:-1.839,sweep:!0,large:!1},{ref:4,mode:"o",x2:1.51,y2:-2.515,large:!1}],text:{x:2.194,y:-2.334}},{sets:[0,1,4],x1:2.572,y1:-1.839,arcs:[{ref:4,mode:"i",x2:2.988,y2:-1.492,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.858,y2:.659,sweep:!0,large:!1},{ref:2,mode:"o",x2:2.253,y2:-.302,large:!1},{ref:3,mode:"o",x2:2.572,y2:-1.839}],text:{x:2.667,y:-.665}},{sets:[0,2,3],x1:.257,y1:2.922,arcs:[{ref:3,mode:"i",x2:-.466,y2:3.612,sweep:!0,large:!1},{ref:0,mode:"i",x2:-1,y2:3,sweep:!0,large:!1},{ref:1,mode:"o",x2:.257,y2:2.922,large:!1}],text:{x:-.403,y:3.178}},{sets:[0,2,4],x1:-1.746,y1:-3.196,arcs:[{ref:2,mode:"i",x2:-.954,y2:-3.015,sweep:!0,large:!1},{ref:3,mode:"o",x2:-1.925,y2:-2.213,sweep:!1,large:!1},{ref:0,mode:"i",x2:-1.746,y2:-3.196,sweep:!0,large:!1}],text:{x:-1.542,y:-2.808}},{sets:[0,3,4],x1:-.495,y1:-3.303,arcs:[{ref:4,mode:"i",x2:1.51,y2:-2.515,sweep:!0,large:!1},{ref:1,mode:"o",x2:.409,y2:-2.236,large:!1},{ref:2,mode:"o",x2:-.954,y2:-3.015,large:!1},{ref:3,mode:"i",x2:-.495,y2:-3.303}],text:{x:.192,y:-2.742}},{sets:[1,2,3],x1:-1.54,y1:2.963,arcs:[{ref:2,mode:"i",x2:-2.7,y2:1.147,sweep:!0,large:!1},{ref:4,mode:"o",x2:-1.645,y2:1.568,large:!1},{ref:0,mode:"o",x2:-1,y2:3,large:!1},{ref:1,mode:"i",x2:-1.54,y2:2.963}],text:{x:-1.767,y:2.106}},{sets:[1,2,4],x1:2.858,y1:.659,arcs:[{ref:2,mode:"i",x2:3.291,y2:1.559,sweep:!0,large:!1},{ref:4,mode:"i",x2:2.544,y2:1.878,sweep:!0,large:!1},{ref:0,mode:"o",x2:2.858,y2:.659,large:!1}],text:{x:2.898,y:1.365}},{sets:[1,3,4],x1:-2.7,y1:1.147,arcs:[{ref:4,mode:"i",x2:-3.579,y2:.673,sweep:!0,large:!1},{ref:1,mode:"i",x2:-3.162,y2:-.024,sweep:!0,large:!1},{ref:2,mode:"o",x2:-2.7,y2:1.147,large:!1}],text:{x:-3.147,y:.599}},{sets:[2,3,4],x1:-3.294,y1:-.549,arcs:[{ref:3,mode:"i",x2:-1.925,y2:-2.213,sweep:!0,large:!1},{ref:0,mode:"o",x2:-2,y2:-1.08,large:!1},{ref:1,mode:"o",x2:-3.162,y2:-.024,large:!1},{ref:2,mode:"i",x2:-3.294,y2:-.549}],text:{x:-2.548,y:-1.029}},{sets:[0,1,2,3],x1:.983,y1:2.049,arcs:[{ref:3,mode:"i",x2:.257,y2:2.922,sweep:!0,large:!1},{ref:1,mode:"i",x2:-1,y2:3,sweep:!0,large:!1},{ref:0,mode:"i",x2:-1.645,y2:1.568,sweep:!0,large:!1},{ref:4,mode:"o",x2:.983,y2:2.049}],text:{x:-.407,y:2.31}},{sets:[0,1,2,4],x1:2.253,y1:-.302,arcs:[{ref:2,mode:"i",x2:2.858,y2:.659,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.544,y2:1.878,sweep:!0,large:!1},{ref:4,mode:"i",x2:.983,y2:2.049,sweep:!0,large:!1},{ref:3,mode:"o",x2:2.253,y2:-.302}],text:{x:2.071,y:1.101}},{sets:[0,1,3,4],x1:1.51,y1:-2.515,arcs:[{ref:4,mode:"i",x2:2.572,y2:-1.839,sweep:!0,large:!1},{ref:3,mode:"i",x2:2.253,y2:-.302,sweep:!0,large:!1},{ref:2,mode:"o",x2:.409,y2:-2.236,sweep:!1,large:!1},{ref:1,mode:"i",x2:1.51,y2:-2.515,sweep:!0}],text:{x:1.687,y:-1.63}},{sets:[0,2,3,4],x1:-2,y1:-1.08,arcs:[{ref:0,mode:"i",x2:-1.925,y2:-2.213,sweep:!0,large:!1},{ref:3,mode:"i",x2:-.954,y2:-3.015,sweep:!0,large:!1},{ref:2,mode:"i",x2:.409,y2:-2.236,sweep:!0,large:!1},{ref:1,mode:"o",x2:-2,y2:-1.08}],text:{x:-1.028,y:-2.108}},{sets:[1,2,3,4],x1:-1.645,y1:1.568,arcs:[{ref:4,mode:"i",x2:-2.7,y2:1.147,sweep:!0,large:!1},{ref:2,mode:"i",x2:-3.162,y2:-.024,sweep:!0,large:!1},{ref:1,mode:"i",x2:-2,y2:-1.08,sweep:!0,large:!1},{ref:0,mode:"o",x2:-1.645,y2:1.568}],text:{x:-2.323,y:.327}},{sets:[0,1,2,3,4],x1:.409,y1:-2.236,arcs:[{ref:2,mode:"i",x2:2.253,y2:-.302,sweep:!0,large:!1},{ref:3,mode:"i",x2:.983,y2:2.049,sweep:!0,large:!1},{ref:4,mode:"i",x2:-1.645,y2:1.568,sweep:!0,large:!1},{ref:0,mode:"i",x2:-2,y2:-1.08,sweep:!0},{ref:1,mode:"i",x2:.409,y2:-2.236,sweep:!0}],text:{x:0,y:0}}],bb:{x:-5.5,y:-6,width:11.6,height:11.8}};function Pe(e){return"number"==typeof e.rx}var qe={maxSets:5,compute:function(e,t,n,r){return function(e,t,n){var r=[Oe,Le,Ie,ze,je,Te],a=r[Math.min(r.length-1,e)],o=Math.min(t/a.bb.width,n/a.bb.height),i=o*-a.bb.x+(t-o*a.bb.width)/2,c=o*-a.bb.y+(n-o*a.bb.height)/2,l=function(e){return i+o*e},s=function(e){return c+o*e};return{sets:a.sets.map((function(e){return Object.assign({},e,{cx:l(e.cx),cy:s(e.cy),text:{x:l(e.text.x),y:s(e.text.y)}},Pe(e)?{rx:e.rx*o,ry:e.ry*o}:{r:e.r*o})})),intersections:a.intersections.map((function(e){return{text:{x:l(e.text.x),y:s(e.text.y)},x1:l(e.x1),y1:s(e.y1),sets:e.sets,arcs:e.arcs.map((function(e){return Object.assign({},e,{x2:l(e.x2),y2:s(e.y2)})}))}}))}}(e.length,n,r)}};var Re={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!1},Fe={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030",filled:!1},He={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!0};function Be(e){return"vega"===e?He:"dark"===e?Fe:Re}function Ue(e){return t().createElement("style",null,e)}function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Be(t.theme);return Object.assign(e,{queryLegend:null!=t.queries&&t.queries.length>0,theme:"light",padding:20,selection:null,title:"",description:"",fontFamily:"sans-serif",queries:we,exportButtons:!0,className:"",fontSizes:Se,classNames:_e,style:_e,styles:_e,toKey:I,tooltips:!0,styleFactory:Ue},r,t,n,t.fontSizes?{fontSizes:Object.assign({},Se,t.fontSizes)}:_e)}function We(e){return e.toLocaleString()}function De(e){return function(e){return Ke({barPadding:.3,dotPadding:.7,combinations:ke,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",widthRatios:Me,heightRatios:Ee,setLabelAlignment:"center",numericScale:"linear",bandScale:"band",childrenFactories:_e,setAddons:we,combinationAddons:we,setAddonPadding:1,combinationAddonPadding:1,emptySelection:!0},e);var t}(e)}function Ve(e,t){var n=e.cloneNode(!0);return n.style.backgroundColor=Be(e.dataset.theme).backgroundColor,t&&Array.from(n.querySelectorAll(t)).forEach((function(e){return e.remove()})),(new XMLSerializer).serializeToString(n)}function $e(e,t){var n=t.type,r=void 0===n?"png":n,a=t.title,o=t.toRemove,i=new Blob([Ve(e,o)],{type:"image/svg+xml;charset=utf-8"}),c=xe(e),l=null!=a?a:ge(e,c),s=URL.createObjectURL(i);return"svg"===r?(Ge(s,"".concat(l,".").concat(r),e.ownerDocument),URL.revokeObjectURL(s),Promise.resolve()):function(e,t){var n=t.ownerDocument.createElement("canvas"),r=t.getBoundingClientRect();n.width=r.width,n.height=r.height;var a=n.getContext("2d"),o=new Image(n.width,n.height);return new Promise((function(t){o.onload=function(){a.drawImage(o,0,0);var e=n.toDataURL("image/png");t(e)},o.src=e}))}(s,e).then((function(t){Ge(t,"".concat(l,".").concat(r),e.ownerDocument),URL.revokeObjectURL(s)}))}function Ge(e,t,n){var r=n.createElement("a");r.href=e,r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.download=t,n.body.appendChild(r),r.click(),r.remove()}function Qe(e,t){var n,r,a,o,i,c=null!==(a=e.getComputedStyle||(null===(r=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getComputedStyle))&&void 0!==a?a:window.getComputedStyle,l=xe(e),s=null!=t?t:ge(e,l),u=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.setTextStyle-".concat(l)).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)}})).reverse(),f=-Number.parseFloat(e.querySelector(".sBarTextStyle-".concat(l)).getAttribute("dx")),d=c(e.querySelector(".fillPrimary-".concat(l))).fill,m=c(e.querySelector(".fillNotMember-".concat(l))).fill,y=c(e.querySelector("text")).fill,p=e.querySelector(".cChartTextStyle-".concat(l)).textContent,h=e.querySelector(".sChartTextStyle-".concat(l)).textContent,v=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.hoverBarTextStyle-".concat(l)).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(".fillPrimary-".concat(l," > title"))).map((function(e){return e.textContent}))}})),x=function(e){return Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1])},g=e.querySelector("[data-upset=base]"),b=x(g),_=x(e.querySelector("[data-upset=csaxis]")),w=Number.parseFloat(g.querySelector("g").firstElementChild.children[1].getAttribute("x2")),S=function(e){return Number.parseFloat(e.getAttribute("transform").match(/,([\d.]+)/)[1])}(e.querySelector("[data-upset=setaxis]")),M=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),E=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),k=Number.parseFloat(e.querySelector("[data-cardinality] circle.fillPrimary-".concat(l)).getAttribute("r")),C=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),A=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),N=C||A,O="orange";N&&(Array.from(e.querySelectorAll("[data-upset=sets-".concat(C?"s]":"q]:first-of-type"," [data-cardinality]"))).forEach((function(e){var t=u.length-Number.parseInt(e.dataset.i,10)-1;u[t].selection=Number.parseInt(e.dataset.cardinality,10)})),Array.from(e.querySelectorAll("[data-upset=cs-".concat(C?"s]":"q]:first-of-type"," [data-cardinality]"))).forEach((function(e){var t=Number.parseInt(e.dataset.i,10);v[t].selection=Number.parseInt(e.dataset.cardinality,10)})),O=c(e.querySelector("[data-upset=sets-".concat(C?"s":"q","] [data-cardinality]"))).fill);var L=Number.parseInt(null!==(i=null===(o=e.querySelector("[data-upset=cs-ss]"))||void 0===o?void 0:o.dataset.i)&&void 0!==i?i:"-1",10),I=L>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:s,description:be(e,l),datasets:{sets:u,combinations:v.map((function(e,t){return Object.assign({},e,{partOf:L===t?2:1,nsets:[""]})})).concat(v.map((function(e){return{name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:u.filter((function(t){return!e.sets.includes(t.name)})).map((function(e){return e.name}))}})))},vconcat:[{hconcat:[{mark:"bar",width:_+M-40,height:S},{width:w,height:S,data:{name:"combinations"},transform:[{filter:I}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-f},encoding:{text:{field:"cardinality",type:"quantitative"}}},N&&{mark:{type:"bar",fill:O,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:p}}}]},{hconcat:[{width:_,height:E,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-f},encoding:{text:{field:"cardinality",type:"quantitative"}}},N&&{mark:{type:"bar",fill:O,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:h,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:M,height:E,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(c(e.querySelector(".setTextStyle-".concat(l))).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:w,height:E,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:k*k*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[m,d].concat(L>=0?[O]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null,scale:{domain:u.map((function(e){return e.name}))}}}},{mark:"rule",transform:[{filter:I},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:Object.assign({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},L<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[d,O]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:b,background:Be(e.dataset.theme).backgroundColor,concat:{spacing:0},view:{stroke:null},bar:{fill:d},circle:{opacity:1},rule:{stroke:d,strokeWidth:Number.parseInt(c(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:y,labelFontSize:Number.parseInt(c(e.querySelector(".axisTextStyle-".concat(l))).fontSize,10),titleColor:y,titleFontSize:Number.parseInt(c(e.querySelector(".cChartTextStyle-".concat(l))).fontSize,10)},title:{color:y},text:{fill:y,fontSize:Number.parseInt(c(e.querySelector(".sBarTextStyle-".concat(l))).fontSize,10)}}}}var Je=["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);function Ye(e){var t,n=De({width:0,height:0,sets:null!==(t=e.sets)&&void 0!==t?t:[],combinations:e.combinations,theme:e.theme}),r={};return Je.forEach((function(t){var a=e[t],o=n[t];if("theme"!==t||"light"===a){if(null!=a&&a!==o)if("fontSizes"===t){var i=!0,c={};Ce.forEach((function(e){var t=a[e];t!==o[e]&&(c[e]=t,i=!1)})),i||(r[t]=c)}else r[t]=a}else r[t]=a})),r}function Ze(e,t,n,r,a){return Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json",name:"string"==typeof n.title?n.title:"UpSetJS",description:"string"==typeof n.description?n.description:"",mode:a,author:r,elements:t,attrs:[],props:Ye(n)},e)}function Xe(e,t,n,r){return Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json",name:"string"==typeof t.title?t.title:"UpSetJS",description:"string"==typeof t.description?t.description:"",mode:r,author:n,props:Ye(t)},e)}function et(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,i=[],c=new Map,s=function(e){return c.has(e)?c.get(e):(c.set(e,i.length),i.push(e),i.length-1)},f=le({sets:e.sets,queries:null!==(r=null===(n=e.queries)||void 0===n?void 0:n.filter((function(e){return l(e)||u(e)})))&&void 0!==r?r:[],toElemIndex:s,selection:e.selection&&p(e.selection)?e.selection:void 0,combinations:t.cs.v,combinationOptions:Array.isArray(e.combinations)?{}:e.combinations},{compress:a?"yes":"no"});return Ze(f,i,e,void 0,o)}function tt(e,t,n,r){var a=et(t,n,!1,r),o=URL.createObjectURL(new Blob([JSON.stringify(a,null,2)],{type:"application/json"}));Ge(o,"".concat(a.name,".json"),e.ownerDocument),URL.revokeObjectURL(o)}function nt(e,t,n){var r=et(e,t,!0,n);delete r.$schema;var a=de().compressToEncodedURIComponent(JSON.stringify(r)),o=new URL("https://upset.js.org/app/embed.html");if(o.searchParams.set("p",a),o.toString().length<4096)return window.open(o.toString(),"_blank"),!0;var i=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,i=ue({sets:e.sets,queries:null!==(r=null===(n=e.queries)||void 0===n?void 0:n.filter((function(e){return l(e)||u(e)})))&&void 0!==r?r:[],selection:e.selection&&p(e.selection)?e.selection:void 0,combinations:t.cs.v},{compress:a?"yes":"no"});return Xe(i,e,void 0,o)}(e,t,!0,n);delete i.$schema;var c=de().compressToEncodedURIComponent(JSON.stringify(i));if(o.searchParams.set("p",c),o.toString().length<4096)return window.open(o.toString(),"_blank"),!0;o.searchParams.delete("p");var s=window.open(o.toString(),"_blank");return null==s||s.addEventListener("load",(function(){null==s||s.postMessage(r,o.origin)})),!1}function rt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function at(e){return"upset-".concat(Math.random().toString(36).slice(4))}function ot(e){return null!=e&&!Array.isArray(e)}function it(e,t){var n=i(e,t);return function(e){return n(e.elems).intersection}}function ct(){return-1}function lt(e,t,n){if(!e)return ut;if("function"==typeof e)return e;if(Array.isArray(e))return it(e,n);var r=e;if(r.overlap)return r.overlap.bind(r);var a=null;return function(e){if(e.overlap)return e.overlap(r);var o=t(e,r);return o>=0?o:(a||(a=it(r.elems,n)),a(e))}}function st(e){var t;return Array.isArray(e)?"Array(".concat(e.length,")"):"function"==typeof e?"?":null===(t=e)||void 0===t?void 0:t.name}function ut(){return 0}function ft(e){return null==e?10:e.endsWith("pt")?Math.floor(4/3*Number.parseInt(e,10)):Number.parseInt(e,10)}function dt(e){return"linear"===e?X:"log"===e?ae:e}function mt(e){return"band"===e?D:e}function yt(e){return Array.isArray(e)}function pt(e){var n=e.transform,r=e.styleId,a=e.exportButtons,o=e.exportChart;if(!a)return null;var i=0,c=[];return!0!==a&&!1===a.svg||(i+=26,c.push(t().createElement("g",{key:"svg",className:"exportButton-".concat(r),onClick:o,"data-type":"svg",transform:"translate(-".concat(i,", 0)")},t().createElement("title",null,"Download SVG Image"),t().createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),t().createElement("text",{className:"exportTextStyle-".concat(r),x:13},"SVG"))),i+=2),!0!==a&&!1===a.png||(i+=26,c.push(t().createElement("g",{key:"png",className:"exportButton-".concat(r),onClick:o,"data-type":"png",transform:"translate(-".concat(i,", 0)")},t().createElement("title",null,"Download PNG Image"),t().createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),t().createElement("text",{className:"exportTextStyle-".concat(r),x:13},"PNG"))),i+=2),!0!==a&&!1===a.vega||(i+=34,c.push(t().createElement("g",{key:"vega",className:"exportButton-".concat(r),onClick:o,"data-type":"vega",transform:"translate(-".concat(i,", 0)")},t().createElement("title",null,"Download VEGA-Lite Specification"),t().createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),t().createElement("text",{className:"exportTextStyle-".concat(r),x:17},"VEGA"))),i+=2),!0!==a&&!1===a.dump||(i+=34,c.push(t().createElement("g",{key:"dump",className:"exportButton-".concat(r),onClick:o,"data-type":"dump",transform:"translate(-".concat(i,", 0)")},t().createElement("title",null,"Download UpSet.js JSON Dump"),t().createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),t().createElement("text",{className:"exportTextStyle-".concat(r),x:17},"DUMP"))),i+=2),!0!==a&&!1===a.share||(i+=42,c.push(t().createElement("g",{key:"share",className:"exportButton-".concat(r),onClick:o,"data-type":"share",transform:"translate(-".concat(i,", 0)")},t().createElement("title",null,"Open a shareable URL"),t().createElement("rect",{y:-9,width:42,height:11,rx:2,ry:2}),t().createElement("text",{className:"exportTextStyle-".concat(r),x:21},"SHARE"))),i+=2),t().createElement("g",{className:"exportButtons-".concat(r),transform:n},c)}var ht=t().memo((function(e){var n=e.queries,r=e.x,a=e.style,o=e.data;return t().createElement("text",{transform:"translate(".concat(r,",4)"),style:a.styles.legend,className:rt("legendTextStyle-".concat(a.id),a.classNames.legend)},n.map((function(e,n){var r=null;return u(e)?r=e.set.cardinality:l(e)&&(r=e.elems instanceof Set?e.elems.size:e.elems.length),t().createElement(t().Fragment,{key:e.name},t().createElement("tspan",{className:"fillQ".concat(n,"-").concat(o.id)},"  ⬤ "),t().createElement("tspan",null,e.name,null!=r?": ".concat(o.sets.format(r)):""))})))})),vt=t().memo((function(e){var n=e.pos,r=e.spacing,a=e.tickSizeInner,o=e.orient,i=e.name,c=e.style,l="top"===o||"left"===o?-1:1;return t().createElement("g",{transform:"translate(0, ".concat(n+.5,")")},i&&t().createElement("text",{x:l*r,dy:"0.32em",className:rt("axisTextStyle-".concat(c.id),"right"===o?"startText-".concat(c.id):"endText-".concat(c.id),c.classNames.axisTick),style:c.styles.axisTick},i),t().createElement("line",{x2:l*a,className:"axisLine-".concat(c.id)}))})),xt=t().memo((function(e){var n=e.pos,r=e.name,a=e.spacing,o=e.orient,i=e.tickSizeInner,c=e.style,l="top"===o||"left"===o?-1:1;return t().createElement("g",{transform:"translate(".concat(n+.5,", 0)")},r&&t().createElement("text",{y:l*a,dy:"top"===o?"0em":"0.71em",className:rt("axisTextStyle-".concat(c.id),c.classNames.axisTick),style:c.styles.axisTick},r),t().createElement("line",{y2:l*i,className:"axisLine-".concat(c.id)}))}));function gt(e){var n=e.scale,r=e.orient,a=e.tickSizeInner,o=void 0===a?6:a,i=e.tickSizeOuter,c=void 0===i?6:i,l=e.tickPadding,s=void 0===l?3:l,u=e.size,f=e.start,d=e.style,m=e.transform,y=Math.max(o,0)+s,p=f,h=u,v="top"===r||"left"===r?-1:1,x="left"===r||"right"===r?vt:xt,g=n.ticks().map((function(e){return"number"==typeof e?{value:e,label:e.toLocaleString()}:e}));return t().createElement("g",{transform:m},g.map((function(e){return t().createElement(x,{key:e.value,pos:n(e.value),name:e.label,spacing:y,tickSizeInner:o,orient:r,style:d})})),t().createElement("path",{className:"axisLine-".concat(d.id),d:"left"===r||"right"===r?c?"M".concat(v*c,",").concat(p,"H0.5V").concat(h,"H").concat(v*c):"M0.5,".concat(p,"V").concat(h):c?"M".concat(p,",").concat(v*c,"V0.5H").concat(h,"V").concat(v*c):"M".concat(p,",0.5H").concat(h)}))}var bt=t().memo((function(n){var r=n.width,a=n.text,o=n.dy,i=n.x,c=n.style,l=n.className,s=(0,e.useRef)(null),u=ye((0,e.useState)("string"==typeof a?[a]:[]),2),f=u[0],d=u[1];return(0,e.useLayoutEffect)((function(){d("string"==typeof a?[a]:[])}),[a]),(0,e.useLayoutEffect)((function(){if(s.current&&!(s.current.childElementCount>0)&&"string"==typeof a&&"function"==typeof s.current.getComputedTextLength){for(var e=s.current.getComputedTextLength(),t=[],n=r,o=0,i=s.current.getStartPositionOfChar(0);e>n;){i.x=n;var c=s.current.getCharNumAtPosition(i),l=a.lastIndexOf(" ",c);if(l<o)break;t.push(a.slice(o,l+1)),o=l+1,n=s.current.getEndPositionOfChar(l+1).x+r}t.push(a.slice(o)),d(t)}}),[s,a,r]),a?t().createElement("tspan",{ref:s,dy:o,style:c,x:i,className:l},f.length>1?f.map((function(e,n){return t().createElement("tspan",{key:e,x:0,dy:n>0?"1.2em":o},e)})):a):null})),_t=t().memo((function(e){var n=e.width,r=e.descriptionWidth,a=void 0===r?n:r,o=e.style;return o.title||o.description?t().createElement("text",null,t().createElement(bt,{text:o.title,width:n,dy:"10px",className:rt("titleTextStyle-".concat(o.id),o.classNames.title),style:o.styles.title}),t().createElement(bt,{x:0,width:a,dy:o.title?"2em":"10px",text:o.description,className:rt("descTextStyle-".concat(o.id),o.classNames.description),style:o.styles.description})):null}));function wt(){}function St(e){return e?function(t,n){return function(r){return e.call(this,t,r.nativeEvent,n.map((function(e){return e.createOnHandlerData?e.createOnHandlerData(t):null})))}}:wt}function Mt(e,t){var n=0,r=0;return function(a){var o=0;return"before"===a.position?o=-(n+=a.size+t):(o=e+r+t,r+=a.size+t),o}}function Et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fill";return t?e?Object.assign(me({},n,t),e):t?me({},n,t):void 0:e}var kt=t().memo((function(e){var n=e.size,r=e.style,a=e.data,o=Mt(n.sets.w+n.labels.w+n.cs.w,n.sets.addonPadding),i=Mt(n.cs.h+n.sets.h,n.cs.addonPadding),c="auto"===r.cs.offset?a.cs.labelOffset:r.cs.offset,l="auto"===r.sets.offset?a.sets.labelOffset:r.sets.offset;return t().createElement("g",null,t().createElement(_t,{style:r,width:n.cs.x-c-20}),n.cs.h>0&&t().createElement("g",{transform:"translate(".concat(n.cs.x,",").concat(n.cs.y,")"),"data-upset":"csaxis"},t().createElement(gt,{scale:a.cs.y,orient:"left",size:n.cs.h,start:n.cs.h-a.cs.yAxisWidth,style:r}),t().createElement("line",{x1:0,x2:n.cs.w,y1:n.cs.h+1,y2:n.cs.h+1,className:"axisLine-".concat(r.id)}),t().createElement("text",{className:rt("cChartTextStyle-".concat(r.id),r.classNames.chartLabel),style:r.styles.chartLabel,transform:"translate(".concat(-c,", ").concat(n.cs.h/2,")rotate(-90)")},r.cs.name),n.cs.addons.map((function(e){var n=i(e),a=t().createElement("text",{key:e.name,className:rt("cChartTextStyle-".concat(r.id),r.classNames.chartLabel),style:r.styles.chartLabel,transform:"translate(".concat(-c,", ").concat(n+e.size/2,")rotate(-90)")},e.name);return e.scale?t().createElement(t().Fragment,{key:e.name},t().createElement(gt,{scale:e.scale,orient:"left",size:e.size,start:0,style:r,transform:"translate(0,".concat(n,")")}),a):a}))),n.sets.w>0&&t().createElement("g",{transform:"translate(".concat(n.sets.x,",").concat(n.sets.y,")"),"data-upset":"setaxis"},t().createElement(gt,{scale:a.sets.x,orient:"bottom",size:n.sets.w,start:n.sets.w-a.sets.xAxisWidth,transform:"translate(0, ".concat(n.sets.h,")"),style:r}),t().createElement("text",{className:rt("sChartTextStyle-".concat(r.id),r.classNames.chartLabel),style:r.styles.chartLabel,transform:"translate(".concat(n.sets.w/2,", ").concat(n.sets.h+l,")")},r.sets.name),n.sets.addons.map((function(e){var a=o(e),i=t().createElement("text",{key:e.name,className:rt("sChartTextStyle-".concat(r.id),r.classNames.chartLabel),style:r.styles.chartLabel,transform:"translate(".concat(a+e.size/2,", ").concat(n.sets.h+l,")")},e.name);return e.scale?t().createElement(t().Fragment,{key:e.name},t().createElement(gt,{scale:e.scale,orient:"bottom",size:e.size,start:0,transform:"translate(".concat(a,", ").concat(n.sets.h,")"),style:r}),i):i}))))})),Ct=t().memo((function(e){var n=e.cx,r=e.r,a=e.cy,o=e.name,i=e.className,c=e.style,l=e.fill;return t().createElement("circle",{r:r,cx:n,cy:a,className:i,style:Et(c,l)},o&&t().createElement("title",null,o))}));function At(e,t,n){for(var r=[n(e)],a=0;a<Ne.length&&e>t;a++)e-=t,r.push(n(e));return r}var Nt=t().memo((function(e){var n=e.d,r=e.h,a=e.className,o=e.data,i=e.size,c=e.style,l=e.children,s=At(n.cardinality,o.cs.max,o.cs.y),u=Mt(i.cs.h+i.sets.h,i.cs.addonPadding);return t().createElement("g",{transform:"translate(".concat(o.cs.x(n),", 0)"),onMouseEnter:r.onMouseEnter(n,i.cs.addons),onMouseLeave:r.onMouseLeave,onClick:r.onClick(n,i.cs.addons),onContextMenu:r.onContextMenu(n,i.cs.addons),onMouseMove:r.onMouseMove(n,i.cs.addons),className:a,"data-cardinality":n.cardinality},c.tooltips&&t().createElement("title",null,n.name,": ",o.cs.format(n.cardinality)),t().createElement("rect",{y:-i.cs.before,width:o.cs.bandWidth,height:i.sets.h+i.cs.h+i.cs.before+i.cs.after,className:"hoverBar-".concat(c.id)}),i.cs.h>0&&t().createElement(t().Fragment,null,s.map((function(e,r){var a=r>0?Math.floor(o.cs.bandWidth*Ne[r-1]):0;return t().createElement("rect",{key:r,x:a,y:e,height:i.cs.h-e,width:o.cs.bandWidth-2*a,className:rt("fillPrimary-".concat(c.id),r<s.length-1&&"fillOverflow".concat(s.length-1-r,"-").concat(c.id),c.classNames.bar),style:Et(c.styles.bar,n.color)})})),t().createElement("text",{y:s[0]-c.barLabelOffset,x:o.cs.bandWidth/2,style:c.styles.barLabel,className:rt("cBarTextStyle-".concat(c.id),c.classNames.barLabel)},o.cs.format(n.cardinality))),t().createElement("text",{y:-c.barLabelOffset-i.cs.before,x:o.cs.bandWidth/2,style:c.styles.barLabel,className:rt("hoverBarTextStyle-".concat(c.id),c.classNames.barLabel)},n.name),o.sets.v.map((function(e,r){return o.cs.has(n,e)?null:t().createElement(Ct,{key:o.sets.keys[r],r:o.r,cx:o.cs.cx,cy:o.sets.y(e)+o.sets.cy,name:c.tooltips?n.name:"",style:c.styles.dot,fill:void 0,className:rt("fillNotMember-".concat(c.id),c.classNames.dot)})})),n.sets.size>1&&t().createElement("line",{x1:o.cs.cx,y1:o.sets.y(o.sets.v.find((function(e){return o.cs.has(n,e)})))+o.sets.cy-(o.r-1),x2:o.cs.cx,y2:o.sets.y(o.sets.rv.find((function(e){return o.cs.has(n,e)})))+o.sets.cy+(o.r-1),style:n.color?{stroke:n.color}:void 0,className:"upsetLine-".concat(o.id)}),o.sets.v.map((function(e,r){var a;return o.cs.has(n,e)?t().createElement(Ct,{key:o.sets.keys[r],r:o.r,cx:o.cs.cx,cy:o.sets.y(e)+o.sets.cy,name:c.tooltips?e.name:"",style:c.styles.dot,fill:null!==(a=e.color)&&void 0!==a?a:n.color,className:rt("fillPrimary-".concat(c.id),c.classNames.dot)}):null})),i.cs.addons.map((function(e){return t().createElement("g",{key:e.name,transform:"translate(0,".concat(u(e),")")},e.render({set:n,width:o.cs.bandWidth,height:e.size,theme:c.theme}))})),l)})),Ot=t().memo((function(e){var n=e.d,r=e.i,a=e.h,o=e.className,i=e.size,c=e.data,l=e.style,s=e.children,u=At(n.cardinality,c.sets.max,c.sets.x),f=Mt(i.sets.w+i.labels.w+i.cs.w,i.sets.addonPadding),d="center"===l.setLabelAlignment?i.labels.w/2:"left"===l.setLabelAlignment?2:i.labels.w-2;return t().createElement("g",{transform:"translate(0, ".concat(c.sets.y(n),")"),onMouseEnter:a.onMouseEnter(n,i.sets.addons),onMouseLeave:a.onMouseLeave,onClick:a.onClick(n,i.sets.addons),onContextMenu:a.onContextMenu(n,i.sets.addons),onMouseMove:a.onMouseMove(n,i.sets.addons),className:o,"data-cardinality":n.cardinality},l.tooltips&&t().createElement("title",null,n.name,": ",c.sets.format(n.cardinality)),t().createElement("rect",{x:-i.sets.before,width:i.sets.w+i.labels.w+i.cs.w+i.sets.after,height:c.sets.bandWidth,className:"hoverBar-".concat(l.id)}),r%2==1&&t().createElement("rect",{x:i.sets.w,width:i.labels.w+i.cs.w+i.sets.after,height:c.sets.bandWidth,className:"fillAlternating-".concat(l.id)}),i.sets.w>0&&t().createElement(t().Fragment,null,u.map((function(e,r){var a=r>0?Math.floor(c.sets.bandWidth*Ne[r-1]):0;return t().createElement("rect",{key:r,x:e,y:a,width:i.sets.w-e,height:c.sets.bandWidth-2*a,className:rt("fillPrimary-".concat(l.id),r<u.length-1&&"fillOverflow".concat(u.length-1-r,"-").concat(l.id),l.classNames.bar),style:Et(l.styles.bar,n.color)})})),t().createElement("text",{x:u[0],dx:-l.barLabelOffset,y:c.sets.bandWidth/2,style:l.styles.barLabel,className:rt("sBarTextStyle-".concat(l.id),l.classNames.barLabel)},c.sets.format(n.cardinality))),t().createElement("text",{x:i.sets.w+d,y:c.sets.bandWidth/2,className:rt("setTextStyle-".concat(l.id),l.classNames.setLabel),style:l.styles.setLabel,clipPath:"url(#clip-".concat(i.id,")")},n.name),i.sets.addons.map((function(e){return t().createElement("g",{key:e.name,transform:"translate(".concat(f(e),",0)")},e.render({set:n,width:e.size,height:c.sets.bandWidth,theme:l.theme}))})),s)})),Lt=t().memo((function(e){var n=e.data,r=e.size,a=e.style,o=e.h,i=e.setChildrenFactory,c=e.combinationChildrenFactory;return t().createElement("g",{className:o.hasClick?"clickAble-".concat(a.id):void 0},t().createElement("g",{transform:"translate(".concat(r.sets.x,",").concat(r.sets.y,")"),"data-upset":"sets"},n.sets.v.map((function(e,c){return t().createElement(Ot,{key:n.sets.keys[c],d:e,i:c,h:o,className:o.hasClick||o.hasHover?"interactive-".concat(a.id):void 0,data:n,style:a,size:r},i&&i(e))}))),t().createElement("g",{transform:"translate(".concat(r.cs.x,",").concat(r.cs.y,")"),"data-upset":"cs"},n.cs.v.map((function(e,i){return t().createElement(Nt,{key:n.cs.keys[i],d:e,h:o,className:o.hasClick||o.hasHover?"interactive-".concat(a.id):void 0,data:n,style:a,size:r},c&&c(e))}))))}));function It(e){var n=e.data,r=e.size,a=e.style,o=e.elemOverlap,i=e.secondary,c=e.tooltip,l=e.suffix,s=e.transform,u=e.empty,f=e.combinationAddons,d=n.cs.bandWidth,m=r.cs.h+r.sets.h,y=r.cs.h,p=rt("fill".concat(l),!c&&"pnone-".concat(a.id),a.classNames.bar);return t().createElement("g",{transform:s,"data-upset":i?"cs-q":"cs-s"},n.cs.v.map((function(e,l){var s=n.cs.x(e),h=n.cs.keys[l];if(u&&!i)return t().createElement("rect",{key:h,x:s,y:y,height:0,width:d,className:p,style:Et(a.styles.bar,a.selectionColor?void 0:e.color)},c&&t().createElement("title",null));var v=o(e);if(0===v)return null;var x=At(v,n.cs.max,n.cs.y),g=c&&t().createElement("title",null,"".concat(e.name," ∩ ").concat(c,": ").concat(v)),b=i?t().createElement("path",{key:h,transform:"translate(".concat(s,", ").concat(x[0],")"),d:"M0,-1 l".concat(d,",0 l0,2 l").concat(-d,",0 L-").concat(n.triangleSize,",-").concat(n.triangleSize," L-").concat(n.triangleSize,",").concat(n.triangleSize," Z"),className:p,"data-i":l,"data-cardinality":v,style:Et(void 0,a.selectionColor?void 0:e.color)},g):x.map((function(r,o){var i=o>0?Math.floor(n.cs.bandWidth*Ne[o-1]):0;return t().createElement("rect",{key:o,x:s+i,y:r,height:y-r,width:d-2*i,"data-i":o>0?null:l,"data-cardinality":o>0?null:v,className:rt(p,o<x.length-1&&"fillOverflow".concat(x.length-1-o,"-").concat(a.id)),style:Et(a.styles.bar,a.selectionColor?void 0:e.color)},g)})),_=Mt(m,r.cs.addonPadding),w=f.map((function(n){var r=_(n),o=n.render({set:e,width:d,height:n.size,theme:a.theme});return o?t().createElement("g",{key:n.name,transform:"translate(".concat(s,",").concat(r,")")},o):null})).filter(Boolean);return 0===w.length?b:t().createElement("g",{key:h},b,w)})))}function zt(e){var n=e.data,r=e.size,a=e.style,o=e.elemOverlap,i=e.suffix,c=e.secondary,l=e.empty,s=e.tooltip,u=e.setAddons,f=e.transform,d=r.sets.w,m=r.sets.w+r.labels.w+r.cs.w,y=n.sets.bandWidth,p=rt("fill".concat(i),!s&&" pnone-".concat(a.id),a.classNames.bar);return t().createElement("g",{transform:f,"data-upset":c?"sets-q":"sets-s"},n.sets.v.map((function(e,i){var f=n.sets.y(e),h=n.sets.keys[i];if(l&&!c)return t().createElement("rect",{key:h,x:d,y:f,width:0,height:y,className:p,style:Et(a.styles.bar,a.selectionColor?void 0:e.color)},a.tooltips&&s&&t().createElement("title",null));var v=o(e);if(0===v)return null;var x=At(v,n.sets.max,n.sets.x),g=a.tooltips&&s&&t().createElement("title",null,"".concat(e.name," ∩ ").concat(s,": ").concat(v)),b=c?t().createElement("path",{key:h,transform:"translate(".concat(x[0],", ").concat(f+y,")"),d:"M1,0 l0,".concat(-y," l-2,0 l0,").concat(y," L-").concat(n.triangleSize,",").concat(n.triangleSize," L").concat(n.triangleSize,",").concat(n.triangleSize," Z"),"data-i":i,"data-cardinality":v,className:p,style:Et(void 0,a.selectionColor?void 0:e.color)},g):x.map((function(r,o){var c=o>0?Math.floor(n.sets.bandWidth*Ne[o-1]):0;return t().createElement("rect",{key:o,"data-i":o>0?null:i,"data-cardinality":o>0?null:v,x:r,y:f+c,width:d-r,height:y-2*c,className:rt(p,o<x.length-1&&"fillOverflow".concat(x.length-1-o,"-").concat(a.id)),style:Et(a.styles.bar,a.selectionColor?void 0:e.color)},g)})),_=Mt(m,r.sets.addonPadding),w=u.map((function(n){var r=_(n),o=n.render({set:e,width:n.size,height:y,theme:a.theme});return o?t().createElement("g",{key:n.name,transform:"translate(".concat(r,",").concat(f,")")},o):null})).filter(Boolean);return 0===w.length?b:t().createElement("g",{key:h},b,w)})))}var jt=[],Tt=t().memo((function(n){var r=n.size,a=n.data,o=n.style,i=n.hasHover,c=n.secondary,l=n.queries,s=r.sets.addons.some((function(e){return null!=e.renderQuery}))||r.cs.addons.some((function(e){return null!=e.renderQuery})),u=(0,e.useMemo)((function(){return l.map((function(e){return Object.assign(Object.assign({},e),{overlap:f(e,"intersection",a.toElemKey),elemOverlap:s?d(e,"intersection",a.toElemKey):null})}))}),[l,s,a.toElemKey]);function m(e,t,n,r,a){return Object.assign(Object.assign({},e),{render:function(o){var i=r(o.set);return e.renderQuery?e.renderQuery(Object.assign({query:t,overlap:i,index:n,secondary:a},o)):null}})}return t().createElement("g",{className:i&&!c?"pnone-".concat(o.id):void 0},t().createElement("g",{transform:"translate(".concat(r.sets.x,",").concat(r.sets.y,")")},u.map((function(e,n){return t().createElement(zt,{key:e.name,data:a,size:r,style:o,elemOverlap:e.overlap,suffix:"Q".concat(n,"-").concat(a.id),secondary:c||n>0,tooltip:i&&!(c||n>0)?void 0:e.name,setAddons:0===r.sets.addons.length?jt:r.sets.addons.map((function(t,n){return m(t,e,n,e.elemOverlap,c||n>0)}))})}))),t().createElement("g",{transform:"translate(".concat(r.cs.x,",").concat(r.cs.y,")")},u.map((function(e,n){return t().createElement(It,{key:e.name,data:a,size:r,style:o,elemOverlap:e.overlap,suffix:"Q".concat(n,"-").concat(a.id),secondary:c||n>0,tooltip:i&&!(c||n>0)?void 0:e.name,combinationAddons:0===r.cs.addons.length?jt:r.cs.addons.map((function(t,n){return m(t,e,n,e.elemOverlap,c||n>0)}))})}))))}));function Pt(e){var n=e.data,r=e.size,a=e.style,o=e.selection;if(!o||"set"!==o.type||!n.sets.keys.includes(n.toKey(o)))return null;var i=o;return t().createElement("rect",{y:n.sets.y(i),width:r.labels.w+r.cs.w+r.sets.after,height:n.sets.bandWidth,className:"selectionHint-".concat(a.id)})}function qt(e){var n=e.data,r=e.size,a=e.style,o=e.selection,i=n.sets.bandWidth/2,c=n.cs.cx,l=n.r,s=r.sets.h+r.sets.after,u=n.cs.bandWidth;if(!o||"set"===o.type||!n.cs)return null;var f=o,d=n.cs.keys.indexOf(n.toKey(f));return d<0?null:t().createElement("g",{transform:"translate(".concat(r.labels.w+n.cs.x(f),", 0)"),"data-upset":"cs-ss","data-i":d},t().createElement("rect",{width:u,height:s,className:"selectionHint-".concat(a.id)}),f.sets.size>1&&t().createElement("line",{x1:c,y1:n.sets.y(n.sets.v.find((function(e){return n.cs.has(f,e)})))+i-(n.r-1),x2:c,y2:n.sets.y(n.sets.rv.find((function(e){return n.cs.has(f,e)})))+i+(n.r-1),className:"upsetSelectionLine-".concat(n.id),style:Et(void 0,a.selectionColor?void 0:f.color,"stroke")}),n.sets.v.filter((function(e){return n.cs.has(f,e)})).map((function(e){return t().createElement(Ct,{key:n.toKey(e),r:1.1*l,cx:c,cy:n.sets.y(e)+i,name:a.tooltips?e.name:"",className:rt("fillSelection-".concat(a.id),"pnone-".concat(a.id),a.classNames.dot),style:Et(a.styles.dot,a.selectionColor?void 0:e.color)})})))}var Rt=[];function Ft(e){var n=e.size,r=e.data,a=e.style,o=e.selection,i=e.hasHover,l=a.emptySelection,s=lt(o,r.overlapGuesser,r.toElemKey),u=st(o),f=n.sets.addons.some((function(e){return null!=e.renderSelection}))||n.cs.addons.some((function(e){return null!=e.renderSelection})),d=o&&"function"!=typeof o&&f?function(e,t){var n=c(e,t);return function(e){return n(e.elems).intersection}}(Array.isArray(o)?o:o.elems,r.toElemKey):null;function m(e){return Object.assign(Object.assign({},e),{render:function(t){var n=d?d(t.set):null;return e.renderSelection?e.renderSelection(Object.assign({selection:o,selectionColor:a.selectionColor||t.set.color||"orange",overlap:n},t)):null}})}return t().createElement("g",{className:i?"pnone-".concat(a.id):void 0},(o||l)&&t().createElement(It,{data:r,size:n,style:a,transform:"translate(".concat(n.cs.x,",").concat(n.cs.y,")"),empty:l&&!o,elemOverlap:s,suffix:"Selection-".concat(a.id),tooltip:i?void 0:u,combinationAddons:0===n.cs.addons.length?Rt:n.cs.addons.map(m)}),(o||l)&&t().createElement(zt,{data:r,size:n,style:a,transform:"translate(".concat(n.sets.x,",").concat(n.sets.y,")"),empty:l&&!o,elemOverlap:s,suffix:"Selection-".concat(a.id),tooltip:i?void 0:u,setAddons:0===n.sets.addons.length?Rt:n.sets.addons.map(m)}),t().createElement("g",{transform:"translate(".concat(n.labels.x,",").concat(n.labels.y,")")},ot(o)&&t().createElement(Pt,{data:r,size:n,style:a,selection:o}),ot(o)&&t().createElement(qt,{data:r,size:n,style:a,selection:o})))}function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"font-size";return e?"".concat(t,": ").concat(e,";"):""}function Bt(e,t,n,r){var a=[];t.hasSelectionColor&&a.push("fill: ".concat(t.hasSelectionColor,";"));var o=null!=t.hasSelectionOpacity&&t.hasSelectionOpacity>=0;return o&&a.push("fill-opacity: ".concat(t.hasSelectionOpacity,";")),{p:Ht,root:"\n  .root-".concat(e," {\n    ").concat(Ht(n,"font-family"),"\n  }\n  "),text:"\n  .titleTextStyle-".concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(Ht(r.title),"\n  }\n  .descTextStyle-").concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(Ht(r.description),"\n  }\n\n  .legendTextStyle-").concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(Ht(r.legend),"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  "),hasSFill:a.join(" "),hasSStroke:a.join(" ").replace("fill:","stroke:").replace("fill-","stroke-"),fill:"\n  .fillPrimary-".concat(e," { fill: ").concat(t.color,"; fill-opacity: ").concat(t.opacity,"; }\n  .fillOverflow1-").concat(e," { fill-opacity: ").concat(t.opacity*Ae[0],"; }\n  .fillOverflow2-").concat(e," { fill-opacity: ").concat(t.opacity*Ae[1],"; }\n  ").concat(a.length>0?".root-".concat(e,"[data-selection] .fillPrimary-").concat(e," { ").concat(a.join(" ")," }"):"","\n  ").concat(o?"\n      .root-".concat(e,"[data-selection] .fillOverflow1-").concat(e," { fill-opacity: ").concat(t.opacity*Ae[0],"; }\n      .root-").concat(e,"[data-selection] .fillOverflow2-").concat(e," { fill-opacity: ").concat(t.opacity*Ae[1],"; }"):"","\n  ").concat(t.selectionColor?".fillSelection-".concat(e," { fill: ").concat(t.selectionColor,"; }"):"","\n  .fillTransparent-").concat(e," { fill: transparent; }\n\n  .selectionHint-").concat(e," {\n    fill: transparent;\n    pointer-events: none;\n    ").concat(Ht(t.selectionColor,"stroke"),"\n  }\n  .clickAble-").concat(e," {\n    cursor: pointer;\n  }\n\n  .startText-").concat(e," {\n    text-anchor: start;\n  }\n  .endText-").concat(e," {\n    text-anchor: end;\n  }\n  .pnone-").concat(e," {\n    pointer-events: none;\n  }"),export:"\n  .exportTextStyle-".concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(Ht(r.exportLabel),"\n  }\n  .exportButtons-").concat(e," {\n    text-anchor: middle;\n  }\n  .exportButton-").concat(e," {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-").concat(e,":hover {\n    opacity: 1;\n  }\n  .exportButton-").concat(e," > rect {\n    fill: none;\n    stroke: ").concat(t.textColor,";\n  }\n  ")}}function Ut(t){var n=t.onClick;return(0,e.useMemo)((function(){return{hasClick:null!=n,hasHover:null!=t.onHover,onClick:St(n),onMouseEnter:St(t.onHover),onContextMenu:St(t.onContextMenu),onMouseLeave:t.onHover?function(e){return t.onHover(null,e.nativeEvent,[])}:void 0,onMouseMove:St(t.onMouseMove),reset:function(e){return n?n(null,e.nativeEvent,[]):null}}}),[n,t.onHover,t.onContextMenu,t.onMouseMove])}var Kt=t().forwardRef((function(n,r){var a,o=De(n),i=o.selection,c=void 0===i?null:i,l=o.queries,s=void 0===l?[]:l,u=o.fontSizes,f=(0,e.useMemo)((function(){return o.id?o.id:at((o.fontFamily,u.axisTick,u.barLabel,u.chartLabel,u.legend,u.setLabel,u.title,u.exportLabel,u.description,o.textColor,o.hoverHintColor,o.color,o.hasSelectionColor,o.selectionColor,o.notMemberColor,o.alternatingBackgroundColor,o.opacity,o.hasSelectionOpacity))}),[o.id,o.fontFamily,u.axisTick,u.barLabel,u.chartLabel,u.legend,u.setLabel,u.title,u.exportLabel,u.description,o.textColor,o.hoverHintColor,o.color,o.hasSelectionColor,o.selectionColor,o.notMemberColor,o.alternatingBackgroundColor,o.opacity,o.hasSelectionOpacity]),d=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c,l,s,u,f,d,m,y){return{theme:e,styles:t,classNames:n,cs:{name:r,offset:a},sets:{name:o,offset:i},emptySelection:u,id:c,barLabelOffset:l,selectionColor:s,title:f,description:d,tooltips:m,setLabelAlignment:y}}(o.theme,o.styles,o.classNames,o.combinationName,o.combinationNameAxisOffset,o.setName,o.setNameAxisOffset,f,o.barLabelOffset,o.selectionColor,o.emptySelection,o.title,o.description,o.tooltips,o.setLabelAlignment)}),[o.theme,o.styles,o.classNames,o.barLabelOffset,o.combinationName,o.combinationNameAxisOffset,o.setName,o.setNameAxisOffset,f,o.selectionColor,o.emptySelection,o.title,o.description,o.tooltips,o.setLabelAlignment]),m=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c,l,s,u){var f=i.reduce((function(e,t){return e+("before"===t.position?t.size+s:0)}),0),d=i.reduce((function(e,t){return e+("before"!==t.position?t.size+s:0)}),0),m=c.reduce((function(e,t){return e+("before"===t.position?t.size+s:0)}),0),y=c.reduce((function(e,t){return e+("before"!==t.position?t.size+s:0)}),0),p=t-2*n-20-y-m,h=e-2*n-f-d,v=a[0]>1?a[0]:h*a[0],x=a[1]>1?a[1]:h*a[1],g=o[0]>1?o[0]:p*o[0];return{id:l||at(),cs:{before:m,after:y,x:f+v+x,y:m,w:h-v-x,h:g,addons:c,addonPadding:u},labels:{x:f+v,y:m+g,w:x,h:p-g},sets:{before:f,after:d,x:f,y:m+g,w:v,h:p-g,addons:i,addonPadding:s},padding:r,legend:{x:e/2},margin:n,w:e,h:t}}(o.width,o.height,o.padding,o.barPadding,o.widthRatios,o.heightRatios,o.setAddons,o.combinationAddons,o.id,o.setAddonPadding,o.combinationAddonPadding)}),[o.width,o.height,o.padding,o.barPadding,o.widthRatios,o.heightRatios,o.setAddons,o.combinationAddons,o.id,o.setAddonPadding,o.combinationAddonPadding]),y=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c,l,s,u,f,d,m,y){var p,h,v=dt(r),x=mt(a),g=yt(t)?t:L(e,Object.assign({toElemKey:f},ke,t)),b=x(g.map(u),n.cs.w,n.padding),_=g.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),w=null!=y?y:_,S=w>_?0:o,M=v(w,[n.cs.h,S],{orientation:"vertical",fontSizeHint:l}),E=function(e){return Math.floor(o/1.4*.7*e.length)},k=function(e){return E(M.tickFormat()(e))},C=e.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),A=null!=m?m:C,N=k(A),O=k(w),I=pe(s);try{for(I.s();!(h=I.n()).done;){var z=h.value;if(z.scale){var j,T=z.scale.ticks(3),P=z.scale.tickFormat(),q=pe(T);try{for(q.s();!(j=q.n()).done;){var R=j.value,F="number"==typeof R?P(R):null!==(p=R.label)&&void 0!==p?p:P(R.value),H=E(F);H>O&&(O=H)}}catch(e){q.e(e)}finally{q.f()}}}}catch(e){I.e(e)}finally{I.f()}var B=A>C?0:N,K=v(A,[n.sets.w,B],{orientation:"horizontal",fontSizeHint:l}),W=e.map(u),D=x(W.slice().reverse(),n.sets.h,n.padding),V=Math.min(D.bandwidth(),b.bandwidth())/2*i,$=Math.max(2,Math.min(D.bandwidth(),b.bandwidth())/2*c);return{id:d||at(),r:V,triangleSize:$,sets:{v:e,keys:W,rv:e.slice().reverse(),x:K,xAxisWidth:n.sets.w-B,y:function(e){return D(u(e))},max:A,bandWidth:D.bandwidth(),cy:D.bandwidth()/2+n.cs.h,format:K.tickFormat(),labelOffset:o+9+2},cs:{v:g,keys:g.map(u),x:function(e){return b(u(e))},max:w,y:M,yAxisWidth:n.cs.h-S,cx:b.bandwidth()/2,bandWidth:b.bandwidth(),format:M.tickFormat(),has:function(e,t){var n=u(t);return Array.from(e.sets).some((function(e){return u(e)===n}))},labelOffset:O+9+6},toKey:u,toElemKey:f,overlapGuesser:U(g,ct,u)}}(o.sets,o.combinations,m,o.numericScale,o.bandScale,o.barLabelOffset+ft(u.barLabel),o.dotPadding,o.barPadding,ft(u.axisTick),o.combinationAddons,o.toKey,o.toElemKey,o.id,o.setMaxScale,o.combinationMaxScale)}),[o.sets,o.combinations,m,o.numericScale,o.bandScale,o.barLabelOffset,u.barLabel,o.dotPadding,o.barPadding,u.axisTick,o.combinationAddons,o.toKey,o.toElemKey,o.id,o.setMaxScale,o.combinationMaxScale]),p=Bt(f,o,o.fontFamily,u),h=Ut(o),v="\n  ".concat(p.root,"\n  ").concat(p.text,"\n\n  .axisTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.axisTick),"\n    text-anchor: middle;\n  }\n  .barTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.barLabel),"\n  }\n  .cBarTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.barLabel),"\n    text-anchor: middle;\n  }\n  .sBarTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.barLabel),"\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-").concat(f," {\n    ").concat(p.p(u.barLabel),"\n    fill: ").concat(o.hoverHintColor,";\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.setLabel),"\n    text-anchor: ").concat(function(e){var t;return null!==(t={left:"start",center:"middle",right:"end"}[e])&&void 0!==t?t:"middle"}(o.setLabelAlignment),";\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.chartLabel),"\n    text-anchor: middle;\n  }\n  .sChartTextStyle-").concat(f," {\n    fill: ").concat(o.textColor,";\n    ").concat(p.p(u.chartLabel),"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n\n  ").concat(p.fill,"\n  .fillNotMember-").concat(f," { fill: ").concat(o.notMemberColor,"; }\n  .fillAlternating-").concat(f," { fill: ").concat(o.alternatingBackgroundColor||"transparent","; }\n\n  .axisLine-").concat(f," {\n    fill: none;\n    stroke: ").concat(o.textColor,";\n  }\n  .hoverBar-").concat(f," {\n    fill: transparent;\n  }\n\n  .interactive-").concat(f,":hover > .hoverBar-").concat(f," {\n    stroke: ").concat(o.hoverHintColor,";\n  }\n  .interactive-").concat(f,":hover > .hoverBarTextStyle-").concat(f," {\n    display: unset;\n  }\n\n  ").concat(p.export,"\n\n  .upsetLine-").concat(y.id," {\n    stroke-width: ").concat(.6*y.r,";\n    stroke: ").concat(o.color,";\n    stroke-opacity: ").concat(o.opacity,";\n  }\n  ").concat(p.hasSStroke?".root-".concat(f,"[data-selection] .upsetLine-").concat(y.id," { ").concat(p.hasSStroke," }"):"","\n\n  .upsetSelectionLine-").concat(y.id," {\n    stroke-width: ").concat(.6*y.r*1.1,";\n    ").concat(p.p(o.selectionColor,"stroke"),"\n    pointer-events: none;\n  }\n\n  ").concat(s.map((function(e,t){return".fillQ".concat(t,"-").concat(y.id," {\n    fill: ").concat(e.color,";\n  }")})).join("\n"),"\n  "),x=(0,e.useCallback)((function(e){var t=e.currentTarget.closest("svg"),r=e.currentTarget.dataset.type||"png";switch(r){case"vega":!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).title,n=Qe(e,t),r=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:"application/json"}));Ge(r,"".concat(n.title,".json"),e.ownerDocument),URL.revokeObjectURL(r)}(t);break;case"dump":tt(t,n,y);break;case"share":nt(n,y);break;case"svg":case"png":$e(t,{type:r,toRemove:".".concat(e.currentTarget.getAttribute("class"))})}}),[y,n]),g=st(c);return t().createElement("svg",{id:o.id,className:rt("root-".concat(f),o.className),style:o.style,width:o.width,height:o.height,ref:r,viewBox:"0 0 ".concat(o.width," ").concat(o.height),"data-theme":null!==(a=o.theme)&&void 0!==a?a:"light","data-selection":g||void 0},o.styleFactory(v),t().createElement("defs",null,t().createElement("clipPath",{id:"clip-".concat(m.id)},t().createElement("rect",{x:m.sets.w,y:0,width:m.labels.w,height:m.sets.h}))),o.queryLegend&&t().createElement(ht,{queries:s,x:m.legend.x,style:d,data:y}),t().createElement(pt,{transform:"translate(".concat(m.w-2,",").concat(m.h-3,")"),styleId:f,exportButtons:o.exportButtons,exportChart:x}),t().createElement("g",{transform:"translate(".concat(o.padding,",").concat(o.padding,")"),"data-upset":"base"},o.onClick&&t().createElement("rect",{width:m.cs.x,height:m.sets.y,onClick:h.reset,className:"fillTransparent-".concat(f)}),t().createElement(kt,{size:m,style:d,data:y}),t().createElement(Lt,{size:m,style:d,data:y,h:h,setChildrenFactory:o.setChildrenFactory,combinationChildrenFactory:o.combinationChildrenFactory}),t().createElement(Ft,{size:m,style:d,data:y,hasHover:h.hasHover,selection:c}),t().createElement(Tt,{size:m,style:d,data:y,hasHover:h.hasHover,queries:s,secondary:null!=o.onHover||null!=c})),n.children)}));function Wt(e){var n,r,a=e.rules,o=e.style,i=e.size,c=e.p,l=e.data,s=e.tRef,u=e.children,f=e.exportChart,d=e.selectionName,m=e.h;return t().createElement("svg",{id:c.id,className:rt("root-".concat(o.id),c.className),style:c.style,width:c.width,height:c.height,ref:s,viewBox:"0 0 ".concat(c.width," ").concat(c.height),"data-theme":null!==(n=c.theme)&&void 0!==n?n:"light","data-selection":d||void 0},c.styleFactory(a),c.onClick&&t().createElement("rect",{width:i.w,height:i.h,onClick:m.reset,className:"fillTransparent-".concat(o.id)}),c.queryLegend&&t().createElement(ht,{queries:null!==(r=c.queries)&&void 0!==r?r:[],x:i.legend.x,style:o,data:l}),t().createElement(pt,{transform:"translate(".concat(i.w-2,",").concat(i.h-3,")"),styleId:o.id,exportButtons:c.exportButtons,exportChart:f}),t().createElement("g",{transform:"translate(".concat(c.padding,",").concat(c.padding,")"),"data-upset":"base"},u),c.children)}function Dt(e){var n;if(e.v>=1||e.v<=0)return null;var r=Math.round(10*e.v)/100;return t().createElement("defs",null,t().createElement("pattern",{id:e.id,width:"1",height:"0.1",patternContentUnits:"objectBoundingBox",patternTransform:"rotate(".concat(null!==(n=e.rotate)&&void 0!==n?n:0,")")},e.bgFilled&&t().createElement("rect",{x:"0",y:"0",width:"1",height:"0.1",style:{fill:e.bgFill},className:"fillPrimary-".concat(e.styleId)}),t().createElement("rect",{x:"0",y:"0",width:"1",height:r,className:"fill".concat(e.suffix),style:e.fill?{fill:e.fill}:void 0})))}function Vt(e){var n=e.slice,r=e.d,a=e.i,o=e.data,i=e.style,c=e.elemOverlap,l=e.selected,s=e.selectionName,u=e.h,f=e.queries,d=e.size,m=e.fill,y=e.qs,p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.path?e.path:"M ".concat(e.x1-n,",").concat(e.y1-n," ").concat(e.arcs.map((function(e){var r=t[e.ref].l,a=Pe(r)?r.rx:r.r,o=Pe(r)?r.ry:r.r,i=Pe(r)?r.rotation:0;return"A ".concat(a-n," ").concat(o-n," ").concat(i," ").concat(e.large?1:0," ").concat(e.sweep?1:0," ").concat(e.x2-n," ").concat(e.y2-n)})).join(" "))}(n,o.sets.d),h=function(e,t){return e.text.x===t.cx?0:e.text.x>t.cx?e.text.y<=t.cy?60:-60:e.text.y<=t.cy?-60:60}(n,d.area),v=c?c(r):0,x=v===r.cardinality&&r.cardinality>0||l,g=rt("arc-".concat(i.id),0===v&&!l&&"".concat(m?"fillPrimary":"arcP","-").concat(i.id),x&&"fillSelection-".concat(i.id),i.classNames.set),b="upset-".concat(i.id,"-").concat(a),_=null!=c||null!=u.onMouseLeave,w=y.map((function(e){return e(r)})),S=function(e,n,r,a,o,i,c,l){var s=c.format(e.cardinality),u=r?"".concat(e.name," ∩ ").concat(r):e.name,f=r?"".concat(c.format(n),"/").concat(s):s;if(0===o.length)return{tooltip:"".concat(u,": ").concat(f),title:"set"===e.type?t().createElement(t().Fragment,null,t().createElement("tspan",{dy:"-0.6em"},e.name),t().createElement("tspan",{x:l,dy:"1.2em"},f)):f};if(1===o.length&&!a&&!r)return{tooltip:"".concat(e.name," ∩ ").concat(i[0].name,": ").concat(c.format(o[0]),"/").concat(s),title:"set"===e.type?t().createElement(t().Fragment,null,t().createElement("tspan",{dy:"-0.6em"},e.name),t().createElement("tspan",{x:l,dy:"1.2em"},"".concat(c.format(o[0]),"/").concat(s))):"".concat(c.format(o[0]),"/").concat(s)};var d=t().createElement("tspan",{x:l,dy:"1.2em"},i.map((function(e,n){return t().createElement(t().Fragment,{key:e.name},t().createElement("tspan",{className:"fillQ".concat(n,"-").concat(c.id)},"⬤"),t().createElement("tspan",null," ".concat(c.format(o[n]),"/").concat(s).concat(n<i.length-1?" ":"")))})));return{tooltip:"".concat(u,": ").concat(f,"\n").concat(i.map((function(t,n){return"".concat(e.name," ∩ ").concat(t.name,": ").concat(c.format(o[n]),"/").concat(s)})).join("\n")),title:"set"===e.type?t().createElement(t().Fragment,null,t().createElement("tspan",{dy:"-1.2em"},e.name),t().createElement("tspan",{x:l,dy:"1.2em"},f),d):t().createElement(t().Fragment,null,t().createElement("tspan",{dy:"-0.6em"},f),d)}}(r,v,s,_,w,f,o,n.text.x),M=S.title,E=S.tooltip;return t().createElement("g",null,t().createElement(Dt,{id:b,v:0===v?0:v/r.cardinality,suffix:"Selection-".concat(i.id),rotate:h,bgFill:r.color,bgFilled:null!=r.color||m,fill:i.selectionColor?void 0:r.color,styleId:i.id}),t().createElement("path",{onMouseEnter:u.onMouseEnter(r,[]),onMouseLeave:u.onMouseLeave,onClick:u.onClick(r,[]),onContextMenu:u.onContextMenu(r,[]),onMouseMove:u.onMouseMove(r,[]),d:p,className:g,style:Et(i.styles.set,v>0&&v<r.cardinality?"url(#".concat(b,")"):x&&i.selectionColor?void 0:r.color)},i.tooltips&&t().createElement("title",null,E)),t().createElement("text",{x:n.text.x,y:n.text.y,className:rt("".concat("set"===r.type?"set":"value","TextStyle-").concat(i.id),"pnone-".concat(i.id),"set"===r.type?i.classNames.setLabel:i.classNames.valueLabel)},M))}function $t(e,t,n,r){var a=t-2*n,o=e-2*n,i=Math.min(o,a)/2;return{id:r||at(),legend:{x:e/2},area:{w:o,h:a,cx:o/2,cy:a/2,r:i},margin:n,w:e,h:t}}function Gt(t,n,r){return(0,e.useCallback)((function(e){var a=e.currentTarget.closest("svg"),o=e.currentTarget.dataset.type||"png";switch(o){case"dump":tt(a,n,t,r);break;case"share":nt(n,t,r);break;case"svg":case"png":$e(a,{type:o,toRemove:".".concat(e.currentTarget.getAttribute("class"))})}}),[t,n,r])}var Qt=t().forwardRef((function(n,r){var a=function(e){return function(e){return Ke({valueFormat:We,layout:qe,setLabelOffsets:we},e,{exportButtons:!1!==e.exportButtons&&Object.assign({},!0===e.exportButtons?{}:e.exportButtons,{vega:!1})})}(e)}(n),o=a.selection,i=void 0===o?null:o,c=a.queries,l=void 0===c?[]:c,s=a.fontSizes,u=function(n){var r=n.queries,a=void 0===r?[]:r,o=n.fontSizes,i=(0,e.useMemo)((function(){return n.id?n.id:at((n.fontFamily,o.valueLabel,o.legend,o.setLabel,o.title,o.exportLabel,o.description,n.textColor,n.color,n.hasSelectionColor,n.strokeColor,n.valueTextColor,n.selectionColor,n.opacity,n.hasSelectionOpacity))}),[n.id,n.fontFamily,o.valueLabel,o.legend,o.setLabel,o.title,o.exportLabel,o.description,n.textColor,n.color,n.hasSelectionColor,n.strokeColor,n.valueTextColor,n.selectionColor,n.opacity,n.hasSelectionOpacity]),c=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c){return{theme:e,styles:t,classNames:n,id:r,selectionColor:a,title:o,description:i,tooltips:c}}(n.theme,n.styles,n.classNames,i,n.selectionColor,n.title,n.description,n.tooltips)}),[n.theme,n.styles,n.classNames,i,n.selectionColor,n.title,n.description,n.tooltips]),l=(0,e.useMemo)((function(){return $t(n.width,n.height,n.padding,n.id)}),[n.width,n.height,n.padding,n.id]),s=Ut(n),u=t().useMemo((function(){return a.map((function(e){return f(e,"intersection",n.toElemKey)}))}),[a,n.toElemKey]),d=Bt(i,n,n.fontFamily,o);return{styleId:i,size:l,style:c,h:s,qs:u,rulesHelper:d}}(a),d=u.size,m=u.style,h=u.rulesHelper,v=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c,l){var s=e.length>r.maxSets?e.slice(0,r.maxSets):e,u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{min:1},a=e.map(t),o=[];if(yt(n)){var i=new Map(n.map((function(e){return[Array.from(e.sets).map(t).sort().join("#"),e]}))),c=e.map((function(e){return{type:"set",cardinality:0,elems:[],name:e.name,s:e}}));o=L(c,Object.assign({type:"distinctIntersection",empty:!0,order:["degree:asc","group:asc"]},r)).map((function(e){var n=Array.from(e.sets).map((function(e){return t(e.s)})).sort().join("#");return i.has(n)?i.get(n):{name:e.name,cardinality:0,degree:e.degree,elems:[],sets:new Set(Array.from(e.sets).map((function(e){return e.s}))),type:"distinctIntersection"}}))}else o=L(e,Object.assign({type:"distinctIntersection",empty:!0,order:["degree:asc","group:asc"]},r,null!=n?n:{}));var l=o.map(t);return{cs:o,setKeys:a,csKeys:l}}(s,o,t),f=u.cs,d=u.setKeys,m=u.csKeys,y=r.compute(s,f,n.area.w,n.area.h);return{id:c||at(),sets:{d:y.sets.map((function(e,t){return{v:s[t],l:e,key:d[t],offset:null!=l&&t<l.length?l[t]:{x:0,y:0}}})),v:s,format:a},format:a,cs:{d:y.intersections.map((function(e,t){return{v:f[t],l:e,key:m[t]}})),v:f,has:function(e,t){var n=o(t);return Array.from(e.sets).some((function(e){return o(e)===n}))}},toKey:o,toElemKey:i,overlapGuesser:F(f,ct,o)}}(a.sets,a.combinations,d,a.layout,a.valueFormat,a.toKey,a.toElemKey,a.id,a.setLabelOffsets)}),[a.sets,a.combinations,d,a.valueFormat,a.toKey,a.toElemKey,a.id,a.layout,a.setLabelOffsets]),x=null!=i&&p(i)?a.toKey(i):null,g=null==i?null:lt(i,v.overlapGuesser,v.toElemKey),b=st(i),_="\n  ".concat(h.root,"\n  ").concat(h.text,"\n\n  .valueTextStyle-").concat(m.id," {\n    fill: ").concat(a.valueTextColor,";\n    ").concat(h.p(s.valueLabel),"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .setTextStyle-").concat(m.id," {\n    fill: ").concat(a.textColor,";\n    ").concat(h.p(s.setLabel),"\n    text-anchor: middle;\n  }\n\n  .topText-").concat(m.id," {\n    dominant-baseline: hanging;\n  }\n\n  .stroke-circle-").concat(m.id," {\n    fill: none;\n    stroke: ").concat(a.strokeColor,";\n  }\n\n  .arc-").concat(m.id," {\n    fill-rule: evenodd;\n  }\n  .arcP-").concat(m.id," {\n    fill: transparent;\n    fill-opacity: ").concat(a.opacity,";\n  }\n  ").concat(h.fill,"\n  ").concat(h.export,"\n\n  ").concat(h.hasSFill?".root-".concat(m.id,"[data-selection] .arcP-").concat(m.id," { ").concat(h.hasSFill," }"):"","\n\n  ").concat(l.map((function(e,t){return".fillQ".concat(t,"-").concat(v.id," {\n    fill: ").concat(e.color,";\n  }")})).join("\n"),"\n  "),w=Gt(v,a,"venn"),S=v.sets.d.reduce((function(e,t){return Math.min(e,t.l.cx-(Pe(t.l)?t.l.rx:t.l.r))}),d.area.w);return t().createElement(Wt,{rules:_,style:m,selectionName:b,size:d,p:a,data:v,tRef:r,h:u.h,exportChart:w},t().createElement(_t,{style:m,width:S}),t().createElement("g",{className:rt(a.onClick&&"clickAble-".concat(m.id))},v.sets.d.map((function(e,n){return t().createElement("text",{key:e.key,x:e.l.text.x+e.offset.x,y:e.l.text.y+e.offset.y,onClick:u.h.onClick(v.sets.v[n],[]),onMouseEnter:u.h.onMouseEnter(v.sets.v[n],[]),onMouseLeave:u.h.onMouseLeave,onContextMenu:u.h.onContextMenu(v.sets.v[n],[]),onMouseMove:u.h.onMouseMove(v.sets.v[n],[]),className:rt("setTextStyle-".concat(m.id),"".concat(e.l.align,"Text-").concat(m.id),"".concat(e.l.verticalAlign,"Text-").concat(m.id),m.classNames.setLabel)},m.tooltips&&t().createElement("title",null,v.sets.v[n].name,": ",v.format(v.sets.v[n].cardinality)),v.sets.v[n].name)}))),t().createElement("g",{className:rt(a.onClick&&"clickAble-".concat(m.id))},v.cs.d.map((function(e,n){return t().createElement(Vt,{key:e.key,d:e.v,i:n,slice:e.l,size:d,style:m,data:v,fill:a.filled,h:u.h,selectionName:b,selected:x===e.key||y(i)&&v.cs.has(e.v,i),elemOverlap:g,queries:l,qs:u.qs})}))),t().createElement("g",null,v.sets.d.map((function(e){return Pe(e.l)?t().createElement("ellipse",{key:e.key,rx:e.l.rx,ry:e.l.ry,transform:"translate(".concat(e.l.cx,",").concat(e.l.cy,")rotate(").concat(e.l.rotation,")"),className:rt("stroke-circle-".concat(m.id),m.classNames.set),style:m.styles.set}):t().createElement("circle",{key:e.key,cx:e.l.cx,cy:e.l.cy,r:e.l.r,className:rt("stroke-circle-".concat(m.id),m.classNames.set),style:m.styles.set})}))))})),Jt=t().memo((function(e){var n=e.d,r=e.i,a=e.h,o=e.className,i=e.data,c=e.style,l=i.cs.l[r],s=i.cs.scale(n.cardinality),u=(i.cell-i.cs.bandWidth)/2;return t().createElement("g",{transform:"translate(".concat(l.x,", ").concat(l.y,")"),onMouseEnter:a.onMouseEnter(n,[]),onMouseLeave:a.onMouseLeave,onClick:a.onClick(n,[]),onContextMenu:a.onContextMenu(n,[]),onMouseMove:a.onMouseMove(n,[]),className:o,"data-cardinality":n.cardinality},c.tooltips&&t().createElement("title",null,n.name,": ",i.sets.format(n.cardinality)),t().createElement("rect",{width:i.cell,height:i.cell,className:"fillTransparent-".concat(c.id)}),t().createElement("rect",{x:u,y:s,height:i.cell-s,width:i.cs.bandWidth,className:rt("fillPrimary-".concat(c.id),c.classNames.bar),style:Et(c.styles.bar,n.color)}),t().createElement("text",{y:s-c.barLabelOffset,x:i.cell/2,style:c.styles.barLabel,className:rt("barTextStyle-".concat(c.id),c.classNames.barLabel)},i.sets.format(n.cardinality)))}));function Yt(e,t,n,r){var a=e*t,o=e*n;return[r.x.map((function(t){return"M ".concat(t*e,",0 l0,").concat(a)})),r.y.map((function(t){return"M 0,".concat(t*e," l").concat(o,",0")}))].flat().join(" ")}var Zt=t().memo((function(e){var n=e.data,r=e.style,a=e.size,o=e.h,i="auto"===r.cs.offset?n.cs.labelOffset:r.cs.offset;return t().createElement("g",null,t().createElement("g",{transform:"translate(".concat(a.w-i-2,", ").concat(a.h-n.cell-50,")")},t().createElement(gt,{scale:n.cs.scale,orient:"left",size:n.cell,start:n.cs.barLabelFontSize,style:r}),t().createElement("text",{className:rt("cChartTextStyle-".concat(r.id),r.classNames.chartLabel),style:r.styles.chartLabel,transform:"translate(".concat(-i,", ").concat(n.cell,")rotate(-90)")},r.cs.name)),t().createElement("g",null,n.sets.l.map((function(e,a){var i=n.sets.v[a],c=i.name;return t().createElement("g",{key:c,onClick:o.onClick(i,[]),onMouseEnter:o.onMouseEnter(i,[]),onMouseLeave:o.onMouseLeave,onContextMenu:o.onContextMenu(i,[]),onMouseMove:o.onMouseMove(i,[]),className:rt(o.hasClick&&"clickAble-".concat(r.id))},e.text.map((function(n,a){return t().createElement("text",{key:a,transform:"translate(".concat(n.x,",").concat(n.y,")").concat(e.hor?"":"rotate(-90)"),className:rt("setTextStyle-".concat(r.id))},c)})))})),n.sets.l.map((function(e,a){var o=n.sets.v[a].name;return t().createElement(t().Fragment,{key:o},e.notText.map((function(n,a){return t().createElement("text",{key:a,transform:"translate(".concat(n.x,",").concat(n.y,")").concat(e.hor?"":"rotate(-90)"),className:rt("setTextStyle-".concat(r.id),"not-".concat(r.id))},o)})))}))),t().createElement("g",{className:rt(o.hasClick&&"clickAble-".concat(r.id))},n.cs.v.map((function(e,a){return t().createElement(Jt,{key:n.cs.keys[a],d:e,i:a,h:o,style:r,data:n})}))),t().createElement("g",{transform:"translate(".concat(n.grid.x,", ").concat(n.grid.y,")")},n.grid.levels.map((function(e,a){return t().createElement("path",{key:a,d:Yt(n.cell,n.grid.vCells,n.grid.hCells,e),className:"gridStyle-".concat(r.id," gridStyle-").concat(r.id,"-").concat(a)})}))))}));function Xt(e){var n=e.data,r=e.style,a=e.elemOverlap,o=e.secondary,i=e.tooltip,c=e.suffix,l=e.empty,s=n.cs.bandWidth,u=(n.cell-s)/2,f=rt("fill".concat(c),!i&&"pnone-".concat(r.id),r.classNames.bar);return t().createElement("g",{"data-upset":o?"cs-q":"cs-s"},n.cs.v.map((function(e,c){var d=n.cs.l[c],m=n.cs.keys[c];if(l&&!o)return t().createElement("rect",{key:m,x:d.x+u,y:d.y+n.cell,height:0,width:s,className:f,style:Et(r.styles.bar,r.selectionColor?void 0:e.color)},i&&t().createElement("title",null));var y=a(e);if(0===y)return null;var p=n.cs.scale(y),h=i&&t().createElement("title",null,"".concat(e.name," ∩ ").concat(i,": ").concat(y));return o?t().createElement("path",{key:m,transform:"translate(".concat(d.x+u,", ").concat(d.y+p,")"),d:"M0,-1 l".concat(s,",0 l0,2 l").concat(-s,",0 L-").concat(n.triangleSize,",-").concat(n.triangleSize," L-").concat(n.triangleSize,",").concat(n.triangleSize," Z"),className:f,"data-i":c,"data-cardinality":y,style:Et(void 0,r.selectionColor?void 0:e.color)},h):t().createElement("rect",{key:m,x:d.x+u,y:d.y+p,height:n.cell-p,"data-i":c,"data-cardinality":y,width:s,className:f,style:Et(r.styles.bar,r.selectionColor?void 0:e.color)},h)})))}var en=t().memo((function(n){var r=n.data,a=n.style,o=n.hasHover,i=n.secondary,c=n.queries,l=(0,e.useMemo)((function(){return c.map((function(e){return Object.assign(Object.assign({},e),{overlap:f(e,"intersection",r.toElemKey)})}))}),[c,r.toElemKey]);return t().createElement("g",{className:o&&!i?"pnone-".concat(a.id):void 0},l.map((function(e,n){return t().createElement(Xt,{key:e.name,data:r,style:a,elemOverlap:e.overlap,suffix:"Q".concat(n,"-").concat(r.id),secondary:i||n>0,tooltip:o&&!(i||n>0)?void 0:e.name})})))}));function tn(e){var n=e.data,r=e.style,a=e.selection,o=e.hasHover,i=r.emptySelection,c=lt(a,n.overlapGuesser,n.toElemKey),l=st(a);return t().createElement("g",{className:o?"pnone-".concat(r.id):void 0},(a||i)&&t().createElement(Xt,{data:n,style:r,empty:i&&!a,elemOverlap:c,suffix:"Selection-".concat(r.id),tooltip:o?void 0:l}))}function nn(e,t){return Array(e).fill(0).map((function(e,n){return t(n)}))}function rn(e){var t=Array(Math.pow(2,e)).fill(0);nn(e,(function(e){for(var n=Math.pow(2,e),r=0;r<t.length;r+=n)t[r]++}));var n=nn(Math.max(e,1),(function(){return[]}));return t.forEach((function(e,t){var r=Math.max(0,e-1);n[r].push(t)})),n[n.length-1].push(t.length),n}function an(e,t,n,r){var a=on(e.length,r),o=a.xBefore,i=a.yBefore,c=a.cell,l=a.hCells,s=a.vCells,u=a.horizontalSets,f=a.verticalSets,d=function(e,t){var n=on(e,t),r=n.xOffset,a=n.yOffset,o=n.cell,i=n.xBefore,c=n.yBefore,l=n.hCells,s=n.vCells,u=t.width-r,f=t.height-a;return nn(e,(function(e){for(var n=Math.floor(e/2),d=e%2==0,m=Math.pow(2,n),y=(d?l:s)/m/2,p=d?i:c,h=[{v:!0,x:p+y*o*.5},{v:!1,x:p+y*o*1.5}],v=function(e){var t,n=y*Math.pow(2,e)*o,r=h.length-1;h.push.apply(h,(t=h.map((function(e,t){return{v:h[r-t].v,x:e.x+n}})),function(e){if(Array.isArray(e))return ve(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||he(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},x=1;x<=n;x++)v(x);var g=n%2==1,b=Math.floor(n/2),_=0;return _=g?(d?f:u)-t.labelHeight*(.5+b):(d?a:r)+t.labelHeight*(.5+b),d?{hor:!0,span:y,text:h.filter((function(e){return e.v})).map((function(e){return{x:e.x,y:_}})),notText:h.filter((function(e){return!e.v})).map((function(e){return{x:e.x,y:_}}))}:{hor:!1,span:y,text:h.filter((function(e){return e.v})).map((function(e){return{x:_,y:e.x}})),notText:h.filter((function(e){return!e.v})).map((function(e){return{x:_,y:e.x}}))}}))}(e.length,r),m=function(e,t,n,r){return e.map((function(e,a){var o=Math.floor(a/2),i=a%2==0,c=Math.pow(2,o),l=(i?t:n)/c/2;return function(t,n){var a=ye(n,2),o=a[0],c=a[1];return r(t,e)?[o,c]:l>1?i?[l-1-o+l,c]:[o,l-1-c+l]:i?[o+l,c]:[o,c+l]}}))}(e,l,s,n),y=t.map((function(e){var t=m.reduceRight((function(t,n){return n(e,t)}),[0,0]),n=ye(t,2),r=n[0],a=n[1];return{x:o+r*c,y:i+a*c}})),p=rn(u),h=rn(f);return{s:d,c:y,cell:c,grid:{x:o,y:i,hCells:l,vCells:s,levels:p.map((function(e,t){return{x:e,y:t<h.length?h[t]:[]}}))}}}function on(e,t){var n=Math.ceil(e/2),r=Math.floor(e/2),a=Math.pow(2,n),o=Math.pow(2,r),i=Math.floor(Math.min((t.width-t.labelHeight*r)/a,(t.height-t.labelHeight*n)/o)),c=(t.width-a*i-t.labelHeight*r)/2,l=(t.height-o*i-t.labelHeight*n)/2;return{xOffset:c,horizontalSets:n,yOffset:l,verticalSets:r,cell:i,xBefore:c+Math.ceil(r/2)*t.labelHeight,yBefore:l+Math.ceil(n/2)*t.labelHeight,hCells:a,vCells:o}}var cn=t().forwardRef((function(n,r){var a=function(e){return function(e){return Ke({numericScale:"linear",barPadding:.3,barLabelOffset:2,combinationName:"Intersection Size",combinationNameAxisOffset:"auto"},e,{exportButtons:!1!==e.exportButtons&&Object.assign({},!0===e.exportButtons?{}:e.exportButtons,{vega:!1})})}(e)}(n),o=a.queries,i=void 0===o?[]:o,c=a.fontSizes,l=a.selection,s=void 0===l?null:l,u=(0,e.useMemo)((function(){return a.id?a.id:at((a.fontFamily,c.axisTick,c.barLabel,c.legend,c.setLabel,c.title,c.exportLabel,c.description,a.textColor,a.color,a.hasSelectionColor,a.strokeColor,a.selectionColor,a.opacity,a.hasSelectionOpacity))}),[a.id,a.fontFamily,c.axisTick,c.barLabel,c.legend,c.setLabel,c.title,c.exportLabel,c.description,a.textColor,a.color,a.hasSelectionColor,a.strokeColor,a.selectionColor,a.opacity,a.hasSelectionOpacity]),f=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c,l,s,u,f){return{theme:e,styles:t,classNames:n,emptySelection:l,id:o,barLabelOffset:i,selectionColor:c,title:s,description:u,tooltips:f,cs:{name:r,offset:a}}}(a.theme,a.styles,a.classNames,a.combinationName,a.combinationNameAxisOffset,u,a.barLabelOffset,a.selectionColor,a.emptySelection,a.title,a.description,a.tooltips)}),[a.theme,a.styles,a.classNames,a.combinationName,a.combinationNameAxisOffset,u,a.barLabelOffset,a.selectionColor,a.emptySelection,a.title,a.description,a.tooltips]),d=(0,e.useMemo)((function(){return $t(a.width,a.height,a.padding,a.id)}),[a.width,a.height,a.padding,a.id]),m=(0,e.useMemo)((function(){return function(e,t,n,r,a,o,i,c,l,s,u,f){var d=dt(r),m=e.map(l),y=yt(t)?t:L(e,Object.assign({type:"distinctIntersection"},null!=t?t:{})),p=y.map(l),h=function(e,t){var n=l(t);return Array.from(e.sets).some((function(e){return l(e)===n}))},v=Math.ceil(1.2*i),x=an(e,y,h,{width:n.area.w,height:n.area.h,labelHeight:v}),g=null!=f?f:y.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),b=d(g,[x.cell,a],{orientation:"vertical",fontSizeHint:c}),_=Math.round(x.cell*(1-o)),w=Math.min(Math.max(2,_/2*o),5),S=function(e){return Math.floor(a/1.4*.7*b.tickFormat()(e).length)}(g);return{id:u||at(),grid:x.grid,sets:{keys:m,l:x.s,v:e,labelHeight:v,format:b.tickFormat()},triangleSize:w,cell:x.cell,cs:{keys:p,l:x.c,v:y,barLabelFontSize:a,has:h,scale:b,bandWidth:_,labelOffset:S+9+6},toKey:l,toElemKey:s,overlapGuesser:U(y,ct,l)}}(a.sets,a.combinations,d,a.numericScale,a.barLabelOffset+ft(c.barLabel),a.barPadding,ft(c.setLabel),ft(c.axisTick),a.toKey,a.toElemKey,a.id,a.combinationMaxScale)}),[a.sets,a.combinations,d,a.numericScale,a.barLabelOffset,c.barLabel,a.barPadding,c.axisTick,c.setLabel,a.toKey,a.toElemKey,a.id,a.combinationMaxScale]),y=Ut(a),p=st(s),h=Bt(u,a,a.fontFamily,c),v="\n  ".concat(h.root,"\n  ").concat(h.text,"\n\n  .axisTextStyle-").concat(u," {\n    fill: ").concat(a.textColor,";\n    ").concat(h.p(c.axisTick),"\n    text-anchor: end;\n  }\n  .barTextStyle-").concat(u," {\n    fill: ").concat(a.textColor,";\n    ").concat(h.p(c.barLabel),"\n    text-anchor: middle;\n  }\n  .setTextStyle-").concat(f.id," {\n    fill: ").concat(a.textColor,";\n    ").concat(h.p(c.setLabel),"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-").concat(u," {\n    fill: ").concat(a.textColor,";\n    ").concat(h.p(c.chartLabel),"\n  }\n\n  .not-").concat(f.id," {\n    text-decoration: overline;\n  }\n\n  .axisLine-").concat(u," {\n    fill: none;\n    stroke: ").concat(a.textColor,";\n  }\n\n  .gridStyle-").concat(f.id," {\n    fill: none;\n    stroke: ").concat(a.strokeColor,";\n    stroke-linecap: round;\n  }\n  .gridStyle-").concat(f.id,"-1 {\n    stroke-width: 2;\n  }\n  .gridStyle-").concat(f.id,"-2 {\n    stroke-width: 3;\n  }\n\n  ").concat(h.fill,"\n  ").concat(h.export,"\n\n  ").concat(i.map((function(e,t){return".fillQ".concat(t,"-").concat(m.id," {\n    fill: ").concat(e.color,";\n  }")})).join("\n"),"\n  "),x=Gt(m,a,"kmap"),g=m.sets.l.reduce((function(e,t){return Math.min(e,t.text[0].x-m.sets.labelHeight)}),d.area.w);return t().createElement(Wt,{rules:v,style:f,size:d,p:a,data:m,tRef:r,selectionName:p,h:y,exportChart:x},t().createElement(_t,{style:f,width:g}),t().createElement(Zt,{style:f,data:m,h:y,size:d}),t().createElement(tn,{style:f,data:m,hasHover:y.hasHover,selection:s}),t().createElement(en,{style:f,data:m,hasHover:y.hasHover,queries:i,secondary:y.hasHover||null!=s}))}));function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}Math.PI;var yn,pn,hn,vn,xn,gn,bn,_n={},wn=[],Sn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Mn(e,t){for(var n in t)e[n]=t[n];return e}function En(e){var t=e.parentNode;t&&t.removeChild(e)}function kn(e,t,n){var r,a,o,i={};for(o in t)"key"==o?r=t[o]:"ref"==o?a=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?yn.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===i[o]&&(i[o]=e.defaultProps[o]);return Cn(e,i,r,a,null)}function Cn(e,t,n,r,a){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++hn:a};return null==a&&null!=pn.vnode&&pn.vnode(o),o}function An(e){return e.children}function Nn(e,t){this.props=e,this.context=t}function On(e,t){if(null==t)return e.__?On(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?On(e):null}function Ln(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Ln(e)}}function In(e){(!e.__d&&(e.__d=!0)&&vn.push(e)&&!zn.__r++||gn!==pn.debounceRendering)&&((gn=pn.debounceRendering)||xn)(zn)}function zn(){for(var e;zn.__r=vn.length;)e=vn.sort((function(e,t){return e.__v.__b-t.__v.__b})),vn=[],e.some((function(e){var t,n,r,a,o,i;e.__d&&(o=(a=(t=e).__v).__e,(i=t.__P)&&(n=[],(r=Mn({},a)).__v=a.__v+1,Un(i,a,r,t.__n,void 0!==i.ownerSVGElement,null!=a.__h?[o]:null,n,null==o?On(a):o,a.__h),Kn(n,a),a.__e!=o&&Ln(a)))}))}function jn(e,t,n,r,a,o,i,c,l,s){var u,f,d,m,y,p,h,v=r&&r.__k||wn,x=v.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(m=n.__k[u]=null==(m=t[u])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?Cn(null,m,null,null,m):Array.isArray(m)?Cn(An,{children:m},null,null,null):m.__b>0?Cn(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(d=v[u])||d&&m.key==d.key&&m.type===d.type)v[u]=void 0;else for(f=0;f<x;f++){if((d=v[f])&&m.key==d.key&&m.type===d.type){v[f]=void 0;break}d=null}Un(e,m,d=d||_n,a,o,i,c,l,s),y=m.__e,(f=m.ref)&&d.ref!=f&&(h||(h=[]),d.ref&&h.push(d.ref,null,m),h.push(f,m.__c||y,m)),null!=y?(null==p&&(p=y),"function"==typeof m.type&&m.__k===d.__k?m.__d=l=Tn(m,l,e):l=qn(e,m,d,v,y,l),"function"==typeof n.type&&(n.__d=l)):l&&d.__e==l&&l.parentNode!=e&&(l=On(d))}for(n.__e=p,u=x;u--;)null!=v[u]&&("function"==typeof n.type&&null!=v[u].__e&&v[u].__e==n.__d&&(n.__d=On(r,u+1)),Vn(v[u],v[u]));if(h)for(u=0;u<h.length;u++)Dn(h[u],h[++u],h[++u])}function Tn(e,t,n){for(var r,a=e.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=e,t="function"==typeof r.type?Tn(r,t,n):qn(n,r,r,a,r.__e,t));return t}function Pn(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){Pn(e,t)})):t.push(e)),t}function qn(e,t,n,r,a,o){var i,c,l;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||a!=o||null==a.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(a),i=null;else{for(c=o,l=0;(c=c.nextSibling)&&l<r.length;l+=2)if(c==a)break e;e.insertBefore(a,o),i=o}return void 0!==i?i:a.nextSibling}function Rn(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||Sn.test(t)?n:n+"px"}function Fn(e,t,n,r,a){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Rn(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Rn(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?Bn:Hn,o):e.removeEventListener(t,o?Bn:Hn,o);else if("dangerouslySetInnerHTML"!==t){if(a)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function Hn(e){this.l[e.type+!1](pn.event?pn.event(e):e)}function Bn(e){this.l[e.type+!0](pn.event?pn.event(e):e)}function Un(e,t,n,r,a,o,i,c,l){var s,u,f,d,m,y,p,h,v,x,g,b=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,c=t.__e=n.__e,t.__h=null,o=[c]),(s=pn.__b)&&s(t);try{e:if("function"==typeof b){if(h=t.props,v=(s=b.contextType)&&r[s.__c],x=s?v?v.props.value:s.__:r,n.__c?p=(u=t.__c=n.__c).__=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(h,x):(t.__c=u=new Nn(h,x),u.constructor=b,u.render=$n),v&&v.sub(u),u.props=h,u.state||(u.state={}),u.context=x,u.__n=r,f=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=Mn({},u.__s)),Mn(u.__s,b.getDerivedStateFromProps(h,u.__s))),d=u.props,m=u.state,f)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==b.getDerivedStateFromProps&&h!==d&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(h,x),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(h,u.__s,x)||t.__v===n.__v){u.props=h,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),u.__h.length&&i.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(h,u.__s,x),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(d,m,y)}))}u.context=x,u.props=h,u.state=u.__s,(s=pn.__r)&&s(t),u.__d=!1,u.__v=t,u.__P=e,s=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(r=Mn(Mn({},r),u.getChildContext())),f||null==u.getSnapshotBeforeUpdate||(y=u.getSnapshotBeforeUpdate(d,m)),g=null!=s&&s.type===An&&null==s.key?s.props.children:s,jn(e,Array.isArray(g)?g:[g],t,n,r,a,o,i,c,l),u.base=t.__e,t.__h=null,u.__h.length&&i.push(u),p&&(u.__E=u.__=null),u.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Wn(n.__e,t,n,r,a,o,i,l);(s=pn.diffed)&&s(t)}catch(e){t.__v=null,(l||null!=o)&&(t.__e=c,t.__h=!!l,o[o.indexOf(c)]=null),pn.__e(e,t,n)}}function Kn(e,t){pn.__c&&pn.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){pn.__e(e,t.__v)}}))}function Wn(e,t,n,r,a,o,i,c){var l,s,u,f=n.props,d=t.props,m=t.type,y=0;if("svg"===m&&(a=!0),null!=o)for(;y<o.length;y++)if((l=o[y])&&"setAttribute"in l==!!m&&(m?l.localName===m:3===l.nodeType)){e=l,o[y]=null;break}if(null==e){if(null===m)return document.createTextNode(d);e=a?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,d.is&&d),o=null,c=!1}if(null===m)f===d||c&&e.data===d||(e.data=d);else{if(o=o&&yn.call(e.childNodes),s=(f=n.props||_n).dangerouslySetInnerHTML,u=d.dangerouslySetInnerHTML,!c){if(null!=o)for(f={},y=0;y<e.attributes.length;y++)f[e.attributes[y].name]=e.attributes[y].value;(u||s)&&(u&&(s&&u.__html==s.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,a){var o;for(o in n)"children"===o||"key"===o||o in t||Fn(e,o,null,n[o],r);for(o in t)a&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||Fn(e,o,t[o],n[o],r)}(e,d,f,a,c),u)t.__k=[];else if(y=t.props.children,jn(e,Array.isArray(y)?y:[y],t,n,r,a&&"foreignObject"!==m,o,i,o?o[0]:n.__k&&On(n,0),c),null!=o)for(y=o.length;y--;)null!=o[y]&&En(o[y]);c||("value"in d&&void 0!==(y=d.value)&&(y!==f.value||y!==e.value||"progress"===m&&!y)&&Fn(e,"value",y,f.value,!1),"checked"in d&&void 0!==(y=d.checked)&&y!==e.checked&&Fn(e,"checked",y,f.checked,!1))}return e}function Dn(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){pn.__e(e,n)}}function Vn(e,t,n){var r,a;if(pn.unmount&&pn.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Dn(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){pn.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&Vn(r[a],t,"function"!=typeof e.type);n||null==e.__e||En(e.__e),e.__e=e.__d=void 0}function $n(e,t,n){return this.constructor(e,n)}function Gn(e,t,n){var r,a,o;pn.__&&pn.__(e,t),a=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],Un(t,e=(!r&&n||t).__k=kn(An,null,[e]),a||_n,_n,void 0!==t.ownerSVGElement,!r&&n?[n]:a?null:t.firstChild?yn.call(t.childNodes):null,o,!r&&n?n:a?a.__e:t.firstChild,r),Kn(o,e)}function Qn(e,t){Gn(e,t,Qn)}function Jn(e,t,n){var r,a,o,i=Mn({},e.props);for(o in t)"key"==o?r=t[o]:"ref"==o?a=t[o]:i[o]=t[o];return arguments.length>2&&(i.children=arguments.length>3?yn.call(arguments,2):n),Cn(e.type,i,r||e.key,a||e.ref,null)}yn=wn.slice,pn={__e:function(e,t){for(var n,r,a;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),a=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),a=n.__d),a)return n.__E=n}catch(t){e=t}throw e}},hn=0,Nn.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Mn({},this.state),"function"==typeof e&&(e=e(Mn({},n),this.props)),e&&Mn(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),In(this))},Nn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),In(this))},Nn.prototype.render=An,vn=[],xn="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zn.__r=0,bn=0;var Yn,Zn,Xn,er=0,tr=[],nr=pn.__b,rr=pn.__r,ar=pn.diffed,or=pn.__c,ir=pn.unmount;function cr(e,t){pn.__h&&pn.__h(Zn,e,er||t),er=0;var n=Zn.__H||(Zn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function lr(e,t,n){var r=cr(Yn++,2);return r.t=e,r.__c||(r.__=[n?n(t):hr(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=Zn),r.__}function sr(e,t){var n=cr(Yn++,4);!pn.__s&&pr(n.__H,t)&&(n.__=e,n.__H=t,Zn.__h.push(n))}function ur(e,t){var n=cr(Yn++,7);return pr(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function fr(){var e;for(tr.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=tr.pop();)if(e.__P)try{e.__H.__h.forEach(mr),e.__H.__h.forEach(yr),e.__H.__h=[]}catch(t){e.__H.__h=[],pn.__e(t,e.__v)}}pn.__b=function(e){Zn=null,nr&&nr(e)},pn.__r=function(e){rr&&rr(e),Yn=0;var t=(Zn=e.__c).__H;t&&(t.__h.forEach(mr),t.__h.forEach(yr),t.__h=[])},pn.diffed=function(e){ar&&ar(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==tr.push(t)&&Xn===pn.requestAnimationFrame||((Xn=pn.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),dr&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);dr&&(t=requestAnimationFrame(n))})(fr)),Zn=null},pn.__c=function(e,t){t.some((function(e){try{e.__h.forEach(mr),e.__h=e.__h.filter((function(e){return!e.__||yr(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],pn.__e(n,e.__v)}})),or&&or(e,t)},pn.unmount=function(e){ir&&ir(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{mr(e)}catch(e){t=e}})),t&&pn.__e(t,n.__v))};var dr="function"==typeof requestAnimationFrame;function mr(e){var t=Zn,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Zn=t}function yr(e){var t=Zn;e.__c=e.__(),Zn=t}function pr(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function hr(e,t){return"function"==typeof t?t(e):t}function vr(e,t){for(var n in t)e[n]=t[n];return e}function xr(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function gr(e){this.props=e}(gr.prototype=new Nn).isPureReactComponent=!0,gr.prototype.shouldComponentUpdate=function(e,t){return xr(this.props,e)||xr(this.state,t)};var br=pn.__b;pn.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),br&&br(e)};var _r="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911,wr=function(e,t){return null==e?null:Pn(Pn(e).map(t))},Sr={map:wr,forEach:wr,count:function(e){return e?Pn(e).length:0},only:function(e){var t=Pn(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:Pn},Mr=pn.__e;pn.__e=function(e,t,n){if(e.then)for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);Mr(e,t,n)};var Er=pn.unmount;function kr(){this.__u=0,this.t=null,this.__b=null}function Cr(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Ar(){this.u=null,this.o=null}pn.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Er&&Er(e)},(kr.prototype=new Nn).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var a=Cr(r.__v),o=!1,i=function(){o||(o=!0,n.__R=null,a?a(c):c())};n.__R=i;var c=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(i,i)},kr.prototype.componentWillUnmount=function(){this.t=[]},kr.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=vr({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__e&&kn(An,null,e.fallback);return a&&(a.__h=null),[kn(An,null,t.__e?null:e.children),a]};var Nr=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Or(e){return this.getChildContext=function(){return e.context},e.children}function Lr(e){var t=this,n=e.i;t.componentWillUnmount=function(){Gn(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),Gn(kn(Or,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(Ar.prototype=new Nn).__e=function(e){var t=this,n=Cr(t.__v),r=t.o.get(e);return r[0]++,function(a){var o=function(){t.props.revealOrder?(r.push(a),Nr(t,e,r)):a()};n?n(o):o()}},Ar.prototype.render=function(e){this.u=null,this.o=new Map;var t=Pn(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Ar.prototype.componentDidUpdate=Ar.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Nr(e,n,t)}))};var Ir="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,zr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,jr="undefined"!=typeof document,Tr=function(e){return("undefined"!=typeof Symbol&&"symbol"==un(Symbol())?/fil|che|rad/i:/fil|che|ra/i).test(e)};Nn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(Nn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Pr=pn.event;function qr(){}function Rr(){return this.cancelBubble}function Fr(){return this.defaultPrevented}pn.event=function(e){return Pr&&(e=Pr(e)),e.persist=qr,e.isPropagationStopped=Rr,e.isDefaultPrevented=Fr,e.nativeEvent=e};var Hr,Br={configurable:!0,get:function(){return this.class}},Ur=pn.vnode;pn.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var a=-1===t.indexOf("-");for(var o in r={},n){var i=n[o];jr&&"children"===o&&"noscript"===t||"value"===o&&"defaultValue"in n&&null==i||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===i?i="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!Tr(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():a&&zr.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===i&&(i=void 0),r[o]=i)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=Pn(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=Pn(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r,n.class!=n.className&&(Br.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Br))}e.$$typeof=Ir,Ur&&Ur(e)};var Kr=pn.__r;pn.__r=function(e){Kr&&Kr(e),Hr=e.__c};var Wr={ReactCurrentDispatcher:{current:{readContext:function(e){return Hr.__n[e.__c].props.value}}}};function Dr(e){return!!e&&e.$$typeof===Ir}var Vr={useState:function(e){return er=1,lr(hr,e)},useReducer:lr,useEffect:function(e,t){var n=cr(Yn++,3);!pn.__s&&pr(n.__H,t)&&(n.__=e,n.__H=t,Zn.__H.__h.push(n))},useLayoutEffect:sr,useRef:function(e){return er=5,ur((function(){return{current:e}}),[])},useImperativeHandle:function(e,t,n){er=6,sr((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))},useMemo:ur,useCallback:function(e,t){return er=8,ur((function(){return e}),t)},useContext:function(e){var t=Zn.context[e.__c],n=cr(Yn++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Zn)),t.props.value):e.__},useDebugValue:function(e,t){pn.useDebugValue&&pn.useDebugValue(t?t(e):e)},version:"17.0.2",Children:Sr,render:function(e,t,n){return null==t.__k&&(t.textContent=""),Gn(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return Qn(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(Gn(null,e),!0)},createPortal:function(e,t){return kn(Lr,{__v:e,i:t})},createElement:kn,createContext:function(e,t){var n={__c:t="__cC"+bn++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(In)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n},createFactory:function(e){return kn.bind(null,e)},cloneElement:function(e){return Dr(e)?Jn.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:An,isValidElement:Dr,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:Nn,PureComponent:gr,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:xr(this.props,e)}function r(t){return this.shouldComponentUpdate=n,kn(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:function(e){function t(t,n){var r=vr({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=un(n)||"current"in n)?n:null)}return t.$$typeof=_r,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},flushSync:function(e,t){return e(t)},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:An,Suspense:kr,SuspenseList:Ar,lazy:function(e){var t,n,r;function a(a){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return kn(n,a)}return a.displayName="Lazy",a.__f=!0,a},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wr};function $r(e){return Array.isArray(e.elems)}function Gr(e){return null!=e.set}function Qr(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function Jr(e){return Qr(e)&&"set"===e.type}function Yr(e){var t=e;return Qr(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function Zr(e){return Jr(e)||Yr(e)}function Xr(e){var t=e;return null!=e&&"string"==typeof t.name&&"string"==typeof t.color&&($r(t)||Gr(t)||function(e){return"function"==typeof e.overlap}(t))}function ea(e,t){return e.name.localeCompare(t.name)}function ta(e,t){return t.cardinality-e.cardinality}function na(e,t){return e.degree-t.degree}function ra(e){return function(t,n){return e.reduce((function(e,r){return 0===e?r(t,n):e}),0)}}function aa(e){return function(t,n){return-e(t,n)}}function oa(e){return function(t,n){var r=function(e){return e<0?Number.POSITIVE_INFINITY:e},a=r(e.findIndex((function(e){return t.sets.has(e)}))),o=r(e.findIndex((function(e){return n.sets.has(e)})));return a-o}}function ia(e,t){if(!t)return ea;var n=Array.isArray(t)?t:[t];return 0===n.length?ea:ra(n.map((function(t){switch(t){case"cardinality":case"cardinality:desc":return ta;case"cardinality:asc":return aa(ta);case"name:desc":return aa(ea);case"degree":case"degree:asc":return na;case"degree:desc":return aa(na);case"group":case"group:asc":return oa(e);case"group:desc":return aa(oa(e));default:return ea}})))}function ca(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;return n.order&&(r=r.sort(ia(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}var la={distinctIntersection:" ∩ ",intersection:" ∩ ",union:" ∪ ",composite:","};function sa(e){if(!e)return[255,255,255];var t=e.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);if(t)return[Number.parseInt(t[1],16),Number.parseInt(t[2],16),Number.parseInt(t[3],16)];var n=e.match(/\(([\d]+)[, ]([\d]+)[, ]([\d]+)\)/i);return n?[Number.parseInt(n[1],10),Number.parseInt(n[2],10),Number.parseInt(n[3],10)]:[255,255,255]}function ua(e){if(1===e.length)return e[0];if(!e.every((function(e){return null==e}))){var t=e.map(sa),n=Math.floor(t.reduce((function(e,t){return e+t[0]}),0)/t.length),r=Math.floor(t.reduce((function(e,t){return e+t[1]}),0)/t.length),a=Math.floor(t.reduce((function(e,t){return e+t[2]}),0)/t.length);return"#".concat(n.toString(16)).concat(r.toString(16)).concat(a.toString(16))}}function fa(e,t,n){var r=Array.from(e).sort((function(e,n){return t.get(e)-t.get(n)}));return 1===r.length?r[0].name:"(".concat(r.map((function(e){return e.name})).join(n),")")}function da(e,t,n,r,a){return{type:0===n.size?"composite":e,elems:r,color:a(Array.from(n).map((function(e){return e.color}))),sets:n,name:t,cardinality:r.length,degree:n.size}}function ma(e,t,n,r,a,o,i){var c=new Set(e.sets);t.sets.forEach((function(e){return c.add(e)}));var l=fa(c,a,la[o]);if(0===e.cardinality||0===t.cardinality)return da(o,l,c,[],i);var s=e,u=t;e.cardinality>t.cardinality&&(s=t,u=e);for(var f=new Set,d=n.get(u),m=[],y=s.elems.length,p=0;p<y;p++){var h=s.elems[p],v=r(h);d.has(v)&&(f.add(v),m.push(h))}var x=da(o,l,c,m,i);return n.set(x,f),x}function ya(e,t,n,r,a,o,i){var c=new Set(e.sets);t.sets.forEach((function(e){return c.add(e)}));var l=fa(c,a,la[o]);if(0===e.cardinality){var s=da(o,l,c,t.elems,i);return n.set(s,n.get(t)),s}if(0===t.cardinality){var u=da(o,l,c,e.elems,i);return n.set(u,n.get(e)),u}var f=e,d=t;e.cardinality>t.cardinality&&(f=t,d=e);var m=new Set(n.get(d)),y=n.get(d),p=d.elems.slice();f.elems.forEach((function(e){var t=r(e);y.has(t)||(m.add(t),p.push(e))}));var h=da(o,l,c,p,i);return n.set(h,m),h}function pa(e,t,n,r,a,o){if("number"==typeof t)return{type:"composite",elems:[],color:o?o([]):void 0,sets:new Set,name:"()",cardinality:t,overlap:function(e){return e===this||Zr(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return da(e,"()",new Set,t,o);var i=Array.from(r.values()),c=n.filter((function(e){var t=a(e);return i.every((function(e){return!e.has(t)}))}));return da(e,"()",new Set,c,o)}function ha(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function va(e){if(!e)return ea;switch(e){case"cardinality":case"cardinality:desc":return ra([ta,ea]);case"cardinality:asc":return ra([aa(ta),ea]);case"name:desc":return aa(ea);default:return ea}}function xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if(t.order){var r=va(t.order);n=n.slice().sort(r)}return null!=t.limit?n.slice(0,t.limit):n}var ga,ba;ga={exports:{}},ba=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function a(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return a(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,a=t.length;r<a;r++){var i=t.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,a=n.length;r<a;r++)n[r]=256*t[2*r]+t[2*r+1];var i=[];return n.forEach((function(t){i.push(e(t))})),o.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return a(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,a,o,i={},c={},l="",s="",u="",f=2,d=3,m=2,y=[],p=0,h=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(i,l)||(i[l]=d++,c[l]=!0),s=u+l,Object.prototype.hasOwnProperty.call(i,s))u=s;else{if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)p<<=1,h==t-1?(h=0,y.push(n(p)),p=0):h++;for(a=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}else{for(a=1,r=0;r<m;r++)p=p<<1|a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}0==--f&&(f=Math.pow(2,m),m++),delete c[u]}else for(a=i[u],r=0;r<m;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1;0==--f&&(f=Math.pow(2,m),m++),i[s]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)p<<=1,h==t-1?(h=0,y.push(n(p)),p=0):h++;for(a=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}else{for(a=1,r=0;r<m;r++)p=p<<1|a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1}0==--f&&(f=Math.pow(2,m),m++),delete c[u]}else for(a=i[u],r=0;r<m;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1;0==--f&&(f=Math.pow(2,m),m++)}for(a=2,r=0;r<m;r++)p=p<<1|1&a,h==t-1?(h=0,y.push(n(p)),p=0):h++,a>>=1;for(;;){if(p<<=1,h==t-1){y.push(n(p));break}h++}return y.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var a,o,i,c,l,s,u,f=[],d=4,m=4,y=3,p="",h=[],v={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)f[a]=a;for(i=0,l=Math.pow(2,2),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;switch(i){case 0:for(i=0,l=Math.pow(2,8),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;u=e(i);break;case 1:for(i=0,l=Math.pow(2,16),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;u=e(i);break;case 2:return""}for(f[3]=u,o=u,h.push(u);;){if(v.index>t)return"";for(i=0,l=Math.pow(2,y),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;switch(u=i){case 0:for(i=0,l=Math.pow(2,8),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;f[m++]=e(i),u=m-1,d--;break;case 1:for(i=0,l=Math.pow(2,16),s=1;s!=l;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(c>0?1:0)*s,s<<=1;f[m++]=e(i),u=m-1,d--;break;case 2:return h.join("")}if(0==d&&(d=Math.pow(2,y),y++),f[u])p=f[u];else{if(u!==m)return null;p=o+o.charAt(0)}h.push(p),f[m++]=o+p.charAt(0),o=p,0==--d&&(d=Math.pow(2,y),y++)}}};return o}(),null!=ga&&(ga.exports=ba);var _a=Object.keys({setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"}),wa=["axisTick","bar","barLabel","chartLabel","dot","legend","title","description","setLabel","set","valueLabel"],Sa=["dump","png","share","svg","vega"],Ma={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!1},Ea={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030",filled:!1},ka={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!0};["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);var Ca=1/180*Math.PI;function Aa(e,t,n,r){return{x:e+Math.cos(r*Ca)*n,y:t+Math.sin(r*Ca)*n}}Object.freeze({__proto__:null,widthRatios:function(e){return null==e||Array.isArray(e)&&e.length>=2&&e.every((function(e){return"number"==typeof e}))},heightRatios:function(e){return null==e||Array.isArray(e)&&e.length>=1&&e.every((function(e){return"number"==typeof e}))},setLabelAlignment:function(e){return null==e||"left"===e||"center"===e||"right"===e},sets:function(e){return Array.isArray(e)&&e.every(Jr)},combinations:function(e){return null==e||Array.isArray(e)&&e.every(Yr)||function(e){var t=e;return null!=e&&(null==t.type||["intersection","union"].includes(t.type))}(e)},selection:function(e){return null==e||Array.isArray(e)||Zr(e)},onHover:function(e){return null==e||"function"==typeof e},onClick:function(e){return null==e||"function"==typeof e},onContextMenu:function(e){return null==e||"function"==typeof e},onMouseMove:function(e){return null==e||"function"==typeof e},queries:function(e){return!e||Array.isArray(e)&&e.every(Xr)},stringOrFalse:function(e){return null==e||"string"==typeof e||!1===e},setLabelOffsets:function(e){return null==e||Array.isArray(e)&&e.every((function(e){return null}))},theme:function(e){return null==e||"light"===e||"dark"===e||"vega"===e},classNames:function(e){return null==e||Object.keys(e).every((function(t){return wa.includes(t)&&"string"==typeof e[t]}))},fontSizes:function(e){return null==e||Object.keys(e).every((function(t){return _a.includes(t)&&"string"==typeof e[t]}))},numericScale:function(e){return null==e||"linear"===e||"log"===e||"function"==typeof e},bandScale:function(e){return null==e||"band"===e||"function"==typeof e},axisOffset:function(e){return null==e||"auto"===e||"number"==typeof e},style:function(e){return null==e||"object"===un(e)},styles:function(e){return null==e||Object.keys(e).every((function(e){return wa.includes(e)}))},exportButtons:function(e){return null==e||"boolean"==typeof e||Object.keys(e).every((function(t){return Sa.includes(t)&&"boolean"==typeof e[t]}))}});var Na=Math.sqrt(2*Math.PI);function Oa(e){return Math.exp(-.5*e*e)/Na}function La(e){var t=e.items.length,n=function(e,t,n){var r=Math.sqrt(function(e,t){return e*t/(t-1)}(t,n));return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(n,-.2)}(e.iqr,e.variance,t);return function(r){var a=0,o=0;for(a=0;a<t;a++)o+=Oa((r-e.items[a])/n);return o/n/t}}function Ia(e,t,n){var r=t-1,a=function(t){var a=t*r,o=Math.floor(a),i=a-o,c=e[o];return 0===i?c:n(c,e[Math.min(o+1,r)],i)};return{q1:a(.25),median:a(.5),q3:a(.75)}}function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ia(e,t,(function(e,t,n){return e+n*(t-e)}))}function ja(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=t,r=Math.floor((n+3)/2)/2,a=function(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])};return{q1:a(r),median:a((n+1)/2),q3:a(n+1-r)}}function Ta(e){for(var t=0,n=e.length,r=e instanceof Float64Array?new Float64Array(n):new Float32Array(n),a=0;a<n;a+=1){var o=e[a];null==o||Number.isNaN(o)||(r[t]=o,t+=1)}var i=n-t;if(0===t)return{min:Number.NaN,max:Number.NaN,missing:i,s:[]};var c=t===n?r:r.subarray(0,t);return c.sort((function(e,t){return e===t?0:e<t?-1:1})),{min:c[0],max:c[c.length-1],missing:i,s:c}}function Pa(e){return 0===e.length?{min:Number.NaN,max:Number.NaN,missing:0,s:[]}:{min:e[0],max:e[e.length-1],missing:0,s:e}}function qa(e,t,n,r,a){for(var o=a.eps,i=a.quantiles,c=a.coef,l=a.whiskersMode,s=function(e,t){return Math.abs(e-t)<o},u=i(e,t),f=u.median,d=u.q1,m=u.q3,y=m-d,p="number"==typeof c&&c>0,h=p?Math.max(n,d-c*y):n,v=p?Math.min(r,m+c*y):r,x=[],g=0;g<t;g+=1){var b=e[g];if(b>=h||s(b,h)){"nearest"===l&&(h=b);break}0!==x.length&&s(x[x.length-1],b)||x.push(b)}for(var _=[],w=t-1;w>=0;w-=1){var S=e[w];if(S<=v||s(S,v)){"nearest"===l&&(v=S);break}0!==_.length&&s(_[_.length-1],S)||0!==x.length&&s(x[x.length-1],S)||_.push(S)}return{median:f,q1:d,q3:m,iqr:y,outlier:x.concat(_.reverse()),whiskerHigh:v,whiskerLow:h}}function Ra(e,t){for(var n=0,r=0;r<t;r++)n+=e[r];n/=t;for(var a=0,o=0;o<t;o++){var i=e[o];a+=(i-n)*(i-n)}return{mean:n,variance:a/=t}}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=sn({coef:1.5,eps:.01,quantiles:za,validAndSorted:!1,whiskersMode:"nearest"},t),r=n.validAndSorted?Pa(e):Ta(e),a=r.missing,o=r.s,i=r.min,c=r.max,l={min:Number.NaN,max:Number.NaN,mean:Number.NaN,missing:a,iqr:Number.NaN,count:e.length,whiskerHigh:Number.NaN,whiskerLow:Number.NaN,outlier:[],median:Number.NaN,q1:Number.NaN,q3:Number.NaN,variance:0,items:[],kde:function(){return 0}},s=e.length-a;if(0===s)return l;var u=sn(sn({min:i,max:c,count:e.length,missing:a,items:o},Ra(o,s)),qa(o,s,i,c,n));return sn(sn({},u),{},{kde:La(u)})}var Ha={hinges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return ja(e,t)},fivenum:ja,type7:za,quantiles:za,linear:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ia(e,t,(function(e,t,n){return e+(t-e)*n}))},lower:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ia(e,t,(function(e){return e}))},higher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ia(e,t,(function(e,t){return t}))},nearest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ia(e,t,(function(e,t,n){return n<.5?e:t}))},midpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ia(e,t,(function(e,t){return.5*(e+t)}))}};function Ba(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t,{quantiles:"function"==typeof t.quantiles||null==t.quantiles?t.quantiles:Ha[t.quantiles]});return null==n.quantiles&&delete n.quantiles,Fa(e,n)}function Ua(e){var t=e[1]-e[0];return function(n){return n*t+e[0]}}function Ka(e){var t=e[1]-e[0];return function(n){return(n-e[0])/t}}function Wa(e){var t=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],n=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],r=e?t.concat(n):n.concat(t),a=0;return function(){return r[a++%r.length]}}function Da(e,t){var n=new Map(e.map((function(e){return[e.value,0]})));return t.forEach((function(e){if(null!=e){var t=e.toString();n.has(t)&&n.set(t,n.get(t)+1)}})),n}function Va(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Wa(r),o=function(e){return{value:e,label:e.length>0?"".concat(e[0].toUpperCase()).concat(e.slice(1)):e,color:a()}},i=t.map((function(e){return Object.assign({count:0,acc:0,percentage:0},o("string"==typeof e?e:e.value),"string"==typeof e?{}:e)})),c=Da(i,e),l=n?Da(i,n):null,s=Array.from(c.values()).reduce((function(e,t){return e+t}),0),u=0;return i.forEach((function(e){e.acc=u,e.count=c.get(e.value),e.percentage=e.count/s,u+=l?l.get(e.value):e.count})),i}function $a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function Ga(e){return Math.round(100*e)/100}function Qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",r=Ka(e),a=Ua(e),o=Ua(t),i=function(e){return o(r(e))},c="horizontal"===n?5:7;return i.ticks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return Array(e).fill(0).map((function(t,n){var r=a(n/(e-1));return{value:r,label:r.toLocaleString(void 0,{maximumFractionDigits:2})}}))},i.tickFormat=function(){return function(e){return e.toFixed(2)}},i}var Ja=function(e){return e.toFixed(2)};function Ya(e,t){return"Min: ".concat(t(e.min),", 25% Quantile: ").concat(t(e.q1),", Median: ").concat(t(e.median),", 75% Quantile: ").concat(t(e.q3),", Max: ").concat(t(e.max))}var Za=function(e){var t=e.theme,n=void 0===t?"light":t,r=e.mode,a=void 0===r?"normal":r,o=e.boxStyle,i=e.lineStyle,c=e.outlierStyle,l=e.margin,s=void 0===l?0:l,u=e.boxPadding,f=void 0===u?.1:u,d=e.outlierRadius,m=void 0===d?3:d,y=e.numberFormat,p=void 0===y?Ja:y,h=$a(e,["theme","mode","boxStyle","lineStyle","outlierStyle","margin","boxPadding","outlierRadius","numberFormat"]),v=Array.isArray(e.values)?Ba(e.values,h):e.values;if(Number.isNaN(v.median))return Vr.createElement("g",null);var x="vertical"!==e.orient,g=Ka([e.min,e.max]),b=Ua([0,x?e.width:e.height]),_=function(e){return Ga(b(g(e)))},w={max:_(v.max),avg:_(v.mean),med:_(v.median),min:_(v.min),q1:_(v.q1),q3:_(v.q3),wh:_(v.whiskerHigh),wl:_(v.whiskerLow)},S=!1!==e.tooltips&&Vr.createElement("title",null,Ya(v,p)),M=function(e){return"vega"===e?ka:"dark"===e?Ea:Ma}(n).notMemberColor,E={box:Object.assign({fill:M},o),line:Object.assign({fill:"none",stroke:"light"===n?"black":"#cccccc"},i),outlier:Object.assign({fill:M},c)};if(x){var k=e.height/2,C=Ga(e.height*f)+s,A=e.height-C,N="M".concat(w.wl,",").concat(s," l0,").concat(e.height-2*s," M").concat(w.wl,",").concat(k," L").concat(w.q1,",").concat(k),O="M".concat(w.q3,",").concat(k," L").concat(w.wh,",").concat(k," M").concat(w.wh,",").concat(s," L").concat(w.wh,",").concat(e.height-s),L="M".concat(w.q1,",").concat(C," L").concat(w.q3,",").concat(C," L").concat(w.q3,",").concat(A," L").concat(w.q1,",").concat(A," L").concat(w.q1,",").concat(C," M").concat(w.med,",").concat(C," l0,").concat(A-C),I=Vr.createElement("path",{d:"".concat(N," ").concat(O," ").concat(L),style:E.line});return"indicator"===a?I:Vr.createElement("g",null,S,"normal"===a&&Vr.createElement("rect",{x:w.q1,y:C,width:w.q3-w.q1,height:e.height-2*C,style:E.box}),I,v.outlier.map((function(e){return Vr.createElement("circle",{key:e,r:m,cy:k,cx:_(e),style:E.outlier},Vr.createElement("title",null,"$",p(e)))})))}var z=e.width/2,j=Ga(e.width*f)+s,T=e.width-j,P="M".concat(s,",").concat(w.wl," l").concat(e.width-2*s,",0 M").concat(z,",").concat(w.wl," L").concat(z,",").concat(w.q1),q="M".concat(z,",").concat(w.q3," L").concat(z,",").concat(w.wh," M").concat(s,",").concat(w.wh," L").concat(e.width-s,",").concat(w.wh),R="M".concat(j,",").concat(w.q1," L").concat(j,",").concat(w.q3," l").concat(T-j,",0 L").concat(T,",").concat(w.q1," L").concat(j,",").concat(w.q1," M").concat(j,",").concat(w.med," l").concat(T-j,",0"),F=Vr.createElement("path",{d:"".concat(P," ").concat(q," ").concat(R),style:E.line});return"indicator"===a?F:Vr.createElement("g",null,S,"normal"===a&&Vr.createElement("rect",{y:w.q1,x:j,height:w.q3-w.q1,width:e.width-2*j,style:E.box}),F,v.outlier.map((function(e){return Vr.createElement("circle",{key:e,r:m,cx:z,cy:_(e),style:E.outlier},Vr.createElement("title",null,"$",p(e)))})))},Xa=Vr.memo(Za);function eo(e){return Array.isArray(e.bins)}function to(e){return e.map((function(e){return"".concat(e.label,": ").concat(e.count)})).join(", ")}var no=function(e){var t,n,r=e.margin,a=void 0===r?0:r,o=e.rectStyle,i=void 0===o?{}:o,c=eo(e)?e.bins:Va(e.values,e.categories,e.base,"dark"===e.theme),l=Ka([0,eo(e)?e.bins.reduce((function(e,t){return e+t.count}),0):null!==(n=null===(t=e.base)||void 0===t?void 0:t.length)&&void 0!==n?n:e.values.length]),s="vertical"!==e.orient,u=Ua([0,s?e.width:e.height]),f=function(e){return u(l(e))};return s?Vr.createElement("g",null,c.map((function(t){return Vr.createElement("rect",{key:t.value,x:f(t.acc),width:f(t.count),y:a,height:e.height-2*a,style:Object.assign({fill:t.color},i)},!1!==e.tooltips&&Vr.createElement("title",null,"".concat(t.label,": ").concat(t.count)))}))):Vr.createElement("g",null,c.map((function(t){return Vr.createElement("rect",{key:t.value,y:f(t.acc),height:f(t.count),x:a,width:e.width-2*a,style:Object.assign({fill:t.color},i)},!1!==e.tooltips&&Vr.createElement("title",null,"".concat(t.label,": ").concat(t.count)))})))},ro=Vr.memo(no),ao="rgba(255,255,255,0.2)",oo="rgba(0,0,0,0.1)";function io(e,t,n){return void 0===n&&(n={}),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,a=void 0===r?100:r,o=n.position,i=n.name,c=void 0===i?e.toString():i,l=$a(n,["size","position","name"]),s="function"==typeof e?e:function(t){return t[e]},u=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;if(Array.isArray(t))t.forEach((function(e){var t=s(e);null==t||Number.isNaN(t)||(t<u&&(u=t),t>f&&(f=t))}));else{var d=t;u=d.min,f=d.max}var m=Qa([u,f],[0,a],l.orient);return{name:c,position:o,size:a,scale:m,createOnHandlerData:function(e){var t=Ba(e.elems.map(s),l);return{id:"boxplot",name:c,value:Object.assign(Object.assign(Object.assign({},t),{toString:function(){var e;return Ya(this,null!==(e=l.numberFormat)&&void 0!==e?e:Ja)}}),t)}},render:function(e){var t=e.width,n=e.height,r=e.set,a=e.theme,o=r.elems.map(s);return Vr.createElement(Xa,Object.assign({values:o,width:t,height:n,min:u,max:f,theme:a},l))},renderSelection:function(e){var t=e.width,n=e.height,r=e.overlap,a=e.selectionColor,o=e.theme;if(null==r||0===r.length)return null;var i=r.map(s);return Vr.createElement(Xa,Object.assign({values:i,width:t,height:n,min:u,max:f,mode:"box",lineStyle:{stroke:a,strokeWidth:2},outlierStyle:{fill:a},theme:o},l))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,a=e.query,o=e.secondary,i=e.index,c=e.theme;if(null==r||0===r.length)return null;var d=r.map(s);return Vr.createElement(Xa,Object.assign({values:d,width:t,height:n,min:u,max:f,mode:o?"indicator":"box",margin:o?i+2:0,lineStyle:{stroke:a.color,strokeWidth:o?1:2},outlierStyle:{fill:a.color},theme:c},l))}}}(e,t,n)}function co(e,t,n){return void 0===n&&(n={}),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,a=void 0===r?100:r,o=n.position,i=n.name,c=void 0===i?e.toString():i,l=$a(n,["size","position","name"]),s="function"==typeof e?e:function(t){return t[e]},u=[];if(Array.isArray(t)){var f=new Set;t.forEach((function(e){var t=s(e);null!=t&&f.add(t.toString())})),u=Array.from(f).sort()}else u=t.categories;return{name:c,position:o,size:a,createOnHandlerData:function(e){var t=Va(e.elems.map(s),u,void 0,"dark"===l.theme);return t.toString=function(){return to(this)},{id:"categorical",name:c,value:t}},render:function(e){var t=e.width,n=e.height,r=e.set,a=e.theme,o=r.elems.map(s);return Vr.createElement(ro,Object.assign({values:o,categories:u,width:t,height:n,theme:a},l))},renderSelection:function(e){var t=e.width,n=e.height,r=e.set,a=e.theme,o=e.overlap,i=e.selectionColor;if(null==o||0===o.length)return null;var c=r.elems.map(s),f=o.map(s);return Vr.createElement(ro,Object.assign({values:f,base:c,categories:u,width:t,height:n,theme:a,rectStyle:{stroke:i,strokeWidth:2,fill:"light"===a?oo:ao}},l))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,a=e.set,o=e.query,i=e.secondary,c=e.index,f=e.theme;if(null==r||0===r.length)return null;var d=a.elems.map(s),m=r.map(s);return Vr.createElement(ro,Object.assign({values:m,base:d,categories:u,width:t,height:n,margin:i?c+2:0,rectStyle:{stroke:o.color,fill:"light"===f?oo:ao},theme:f},l))}}}(e,t,n)}var lo=n(347);function so(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=uo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function uo(e,t){if(e){if("string"==typeof e)return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fo(e,t):void 0}}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mo(e,t){var n=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r){var a,o=so(vo(e[n],e[r]));try{for(o.s();!(a=o.n()).done;){var i=a.value;i.parentIndex=[n,r],t.push(i)}}catch(e){o.e(e)}finally{o.f()}}return t}(e),r=n.filter((function(t){return function(e,t){return t.every((function(t){return po(e,t)<t.radius+1e-10}))}(t,e)})),a=0,o=0,i=[];if(r.length>1){for(var c=xo(r),l=0;l<r.length;++l){var s=r[l];s.angle=Math.atan2(s.x-c.x,s.y-c.y)}r.sort((function(e,t){return t.angle-e.angle}));for(var u=r[r.length-1],f=0;f<r.length;++f){var d=r[f];o+=(u.x+d.x)*(d.y-u.y);for(var m={x:(d.x+u.x)/2,y:(d.y+u.y)/2},y=null,p=0;p<d.parentIndex.length;++p)if(u.parentIndex.includes(d.parentIndex[p])){var h=e[d.parentIndex[p]],v=Math.atan2(d.x-h.x,d.y-h.y),x=Math.atan2(u.x-h.x,u.y-h.y),g=x-v;g<0&&(g+=2*Math.PI);var b=x-g/2,_=po(m,{x:h.x+h.radius*Math.sin(b),y:h.y+h.radius*Math.cos(b)});_>2*h.radius&&(_=2*h.radius),(null==y||y.width>_)&&(y={circle:h,width:_,p1:d,p2:u,large:_>h.radius,sweep:!0})}null!=y&&(i.push(y),a+=yo(y.circle.radius,y.width),u=d)}}else{for(var w=e[0],S=1;S<e.length;++S)e[S].radius<w.radius&&(w=e[S]);for(var M=!1,E=0;E<e.length;++E)if(po(e[E],w)>Math.abs(w.radius-e[E].radius)){M=!0;break}M?a=o=0:(a=w.radius*w.radius*Math.PI,i.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-1e-10,y:w.y+w.radius},width:2*w.radius,large:!0,sweep:!0}))}return o/=2,t&&(t.area=a+o,t.arcArea=a,t.polygonArea=o,t.arcs=i,t.innerPoints=r,t.intersectionPoints=n),a+o}function yo(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function po(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function ho(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return yo(e,e-(n*n-t*t+e*e)/(2*n))+yo(t,r)}function vo(e,t){var n=po(e,t),r=e.radius,a=t.radius;if(n>=r+a||n<=Math.abs(r-a))return[];var o=(r*r-a*a+n*n)/(2*n),i=Math.sqrt(r*r-o*o),c=e.x+o*(t.x-e.x)/n,l=e.y+o*(t.y-e.y)/n,s=-(t.y-e.y)*(i/n),u=-(t.x-e.x)*(i/n);return[{x:c+s,y:l-u},{x:c-s,y:l+u}]}function xo(e){var t,n={x:0,y:0},r=so(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.x+=a.x,n.y+=a.y}}catch(e){r.e(e)}finally{r.f()}return n.x/=e.length,n.y/=e.length,n}function go(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.maxIterations=t.maxIterations||500;for(var n=t.initialLayout||Mo,r=t.lossFunction||Co,a=_o(e,t),o=n(a,t),i=Object.keys(o),c=[],l=0,s=i;l<s.length;l++){var u=s[l];c.push(o[u].x),c.push(o[u].y)}for(var f=(0,lo.nelderMead)((function(e){for(var t={},n=0;n<i.length;++n){var c=i[n];t[c]={x:e[2*n],y:e[2*n+1],radius:o[c].radius}}return r(t,a)}),c,t),d=f.x,m=0;m<i.length;++m){var y=i[m];o[y].x=d[2*m],o[y].y=d[2*m+1]}return o}function bo(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):(0,lo.bisect)((function(r){return ho(e,t,r)-n}),0,e+t)}function _o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.distinct,r=e.map((function(e){return Object.assign({},e)}));function a(e){return e.join(";")}if(n){var o,i=new Map,c=so(r);try{for(c.s();!(o=c.n()).done;)for(var l=o.value,s=0;s<l.sets.length;s++){var u=String(l.sets[s]);i.set(u,l.size+(i.get(u)||0));for(var f=s+1;f<l.sets.length;f++){var d=String(l.sets[f]),m="".concat(u,";").concat(d),y="".concat(d,";").concat(u);i.set(m,l.size+(i.get(m)||0)),i.set(y,l.size+(i.get(y)||0))}}}catch(e){c.e(e)}finally{c.f()}var p,h=so(r);try{for(h.s();!(p=h.n()).done;){var v=p.value;v.sets.length<3&&(v.size=i.get(a(v.sets)))}}catch(e){h.e(e)}finally{h.f()}}var x,g=[],b=new Set,_=so(r);try{for(_.s();!(x=_.n()).done;){var w=x.value;if(1===w.sets.length)g.push(w.sets[0]);else if(2===w.sets.length){var S=w.sets[0],M=w.sets[1];b.add(a(w.sets)),b.add(a([M,S]))}}}catch(e){_.e(e)}finally{_.f()}g.sort((function(e,t){return e===t?0:e<t?-1:1}));for(var E=0;E<g.length;++E)for(var k=g[E],C=E+1;C<g.length;++C){var A=g[C];b.has(a([k,A]))||r.push({sets:[k,A],size:0})}return r}function wo(e,t,n){var r=(0,lo.zerosM)(t.length,t.length),a=(0,lo.zerosM)(t.length,t.length);return e.filter((function(e){return 2===e.sets.length})).forEach((function(e){var o=n[e.sets[0]],i=n[e.sets[1]],c=bo(Math.sqrt(t[o].size/Math.PI),Math.sqrt(t[i].size/Math.PI),e.size);r[o][i]=r[i][o]=c;var l=0;e.size+1e-10>=Math.min(t[o].size,t[i].size)?l=1:e.size<=1e-10&&(l=-1),a[o][i]=a[i][o]=l})),{distances:r,constraints:a}}function So(e,t,n,r){for(var a=0;a<t.length;++a)t[a]=0;for(var o=0,i=0;i<n.length;++i)for(var c=e[2*i],l=e[2*i+1],s=i+1;s<n.length;++s){var u=e[2*s],f=e[2*s+1],d=n[i][s],m=r[i][s],y=(u-c)*(u-c)+(f-l)*(f-l),p=Math.sqrt(y),h=y-d*d;m>0&&p<=d||m<0&&p>=d||(o+=2*h*h,t[2*i]+=4*h*(c-u),t[2*i+1]+=4*h*(l-f),t[2*s]+=4*h*(u-c),t[2*s+1]+=4*h*(f-l))}return o}function Mo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ko(e,t),r=t.lossFunction||Co;if(e.length>=8){var a=Eo(e,t),o=r(a,e),i=r(n,e);o+1e-8<i&&(n=a)}return n}function Eo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.restarts||10,a=[],o={},i=so(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;1===c.sets.length&&(o[c.sets[0]]=a.length,a.push(c))}}catch(e){i.e(e)}finally{i.f()}var l=wo(e,a,o),s=l.distances,u=l.constraints,f=(0,lo.norm2)(s.map(lo.norm2))/s.length;s=s.map((function(e){return e.map((function(e){return e/f}))}));for(var d=function(e,t){return So(e,t,s,u)},m=null,y=0;y<r;++y){var p=(0,lo.zeros)(2*s.length).map(Math.random),h=(0,lo.conjugateGradient)(d,p,n);(!m||h.fx<m.fx)&&(m=h)}for(var v=m.x,x={},g=0;g<a.length;++g){var b=a[g];x[b.sets[0]]={x:v[2*g]*f,y:v[2*g+1]*f,radius:Math.sqrt(b.size/Math.PI)}}if(n.history){var _,w=so(n.history);try{for(w.s();!(_=w.n()).done;){var S=_.value;(0,lo.scale)(S.x,f)}}catch(e){w.e(e)}finally{w.f()}}return x}function ko(e,t){var n,r=t&&t.lossFunction?t.lossFunction:Co,a={},o={},i=so(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;if(1===c.sets.length){var l=c.sets[0];a[l]={x:1e10,y:1e10,rowid:a.length,size:c.size,radius:Math.sqrt(c.size/Math.PI)},o[l]=[]}}}catch(e){i.e(e)}finally{i.f()}e=e.filter((function(e){return 2===e.sets.length}));var s,u=so(e);try{for(u.s();!(s=u.n()).done;){var f=s.value,d=null!=f.weight?f.weight:1,m=f.sets[0],y=f.sets[1];f.size+1e-10>=Math.min(a[m].size,a[y].size)&&(d=0),o[m].push({set:y,size:f.size,weight:d}),o[y].push({set:m,size:f.size,weight:d})}}catch(e){u.e(e)}finally{u.f()}var p=[];function h(e,t){return t.size-e.size}Object.keys(o).forEach((function(e){for(var t=0,n=0;n<o[e].length;++n)t+=o[e][n].size*o[e][n].weight;p.push({set:e,size:t})})),p.sort(h);var v,x={};function g(e){return e.set in x}function b(e,t){a[t].x=e.x,a[t].y=e.y,x[t]=!0}b({x:0,y:0},p[0].set);for(var _=1;_<p.length;++_){var w=p[_].set,S=o[w].filter(g),M=a[w];if(S.sort(h),0===S.length)throw"ERROR: missing pairwise overlap information";for(var E=[],k=0;k<S.length;++k){var C=a[S[k].set],A=bo(M.radius,C.radius,S[k].size);E.push({x:C.x+A,y:C.y}),E.push({x:C.x-A,y:C.y}),E.push({y:C.y+A,x:C.x}),E.push({y:C.y-A,x:C.x});for(var N=k+1;N<S.length;++N){var O=a[S[N].set],L=bo(M.radius,O.radius,S[N].size),I=vo({x:C.x,y:C.y,radius:A},{x:O.x,y:O.y,radius:L});E.push.apply(E,function(e){if(Array.isArray(e))return fo(e)}(v=I)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(v)||uo(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}for(var z=1e50,j=E[0],T=0,P=E;T<P.length;T++){var q=P[T];a[w].x=q.x,a[w].y=q.y;var R=r(a,e);R<z&&(z=R,j=q)}b(j,w)}return a}function Co(e,t){var n,r=0,a=so(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(1!==o.sets.length){var i=void 0;if(2===o.sets.length){var c=e[o.sets[0]],l=e[o.sets[1]];i=ho(c.radius,l.radius,po(c,l))}else i=mo(o.sets.map((function(t){return e[t]})));r+=(null!=o.weight?o.weight:1)*(i-o.size)*(i-o.size)}}}catch(e){a.e(e)}finally{a.f()}return r}function Ao(e,t){var n,r=0,a=so(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(1!==o.sets.length){var i=void 0;if(2===o.sets.length){var c=e[o.sets[0]],l=e[o.sets[1]];i=ho(c.radius,l.radius,po(c,l))}else i=mo(o.sets.map((function(t){return e[t]})));var s=null!=o.weight?o.weight:1,u=Math.log((i+1)/(o.size+1));r+=s*u*u}}}catch(e){a.e(e)}finally{a.f()}return r}function No(e,t,n){if(null==n?e.sort((function(e,t){return t.radius-e.radius})):e.sort(n),e.length>0){var r,a=e[0].x,o=e[0].y,i=so(e);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.x-=a,c.y-=o}}catch(e){i.e(e)}finally{i.f()}}if(2===e.length&&po(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){var l,s=Math.atan2(e[1].x,e[1].y)-t,u=Math.cos(s),f=Math.sin(s),d=so(e);try{for(d.s();!(l=d.n()).done;){var m=l.value,y=m.x,p=m.y;m.x=u*y-f*p,m.y=f*y+u*p}}catch(e){d.e(e)}finally{d.f()}}if(e.length>2){for(var h=Math.atan2(e[2].x,e[2].y)-t;h<0;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(h>Math.PI){var v,x=e[1].y/(1e-10+e[1].x),g=so(e);try{for(g.s();!(v=g.n()).done;){var b=v.value,_=(b.x+x*b.y)/(1+x*x);b.x=2*_-b.x,b.y=2*_*x-b.y}}catch(e){g.e(e)}finally{g.f()}}}}function Oo(e){var t=function(t){var n=e.reduce((function(e,n){return Math.max(e,n[t]+n.radius)}),Number.NEGATIVE_INFINITY),r=e.reduce((function(e,n){return Math.min(e,n[t]-n.radius)}),Number.POSITIVE_INFINITY);return{max:n,min:r}};return{xRange:t("x"),yRange:t("y")}}function Lo(e,t,n){null==t&&(t=Math.PI/2);var r,a=jo(e).map((function(e){return Object.assign({},e)})),o=function(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}e.forEach((function(e){e.parent=e}));for(var n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r){var a=e[n].radius+e[r].radius;po(e[n],e[r])+1e-10<a&&(o=e[r],i=e[n],c=void 0,l=void 0,c=t(o),l=t(i),c.parent=l)}for(var o,i,c,l,s=new Map,u=0;u<e.length;++u){var f=t(e[u]).parent.setid;s.has(f)||s.set(f,[]),s.get(f).push(e[u])}return e.forEach((function(e){delete e.parent})),Array.from(s.values())}(a),i=so(o);try{for(i.s();!(r=i.n()).done;){var c=r.value;No(c,t,n);var l=Oo(c);c.size=(l.xRange.max-l.xRange.min)*(l.yRange.max-l.yRange.min),c.bounds=l}}catch(e){i.e(e)}finally{i.f()}o.sort((function(e,t){return t.size-e.size}));var s=(a=o[0]).bounds,u=(s.xRange.max-s.xRange.min)/50;function f(e,t,n){if(e){var r,o,i=e.bounds;if(t)r=s.xRange.max-i.xRange.min+u;else{r=s.xRange.max-i.xRange.max;var c=(i.xRange.max-i.xRange.min)/2-(s.xRange.max-s.xRange.min)/2;c<0&&(r+=c)}if(n)o=s.yRange.max-i.yRange.min+u;else{o=s.yRange.max-i.yRange.max;var l=(i.yRange.max-i.yRange.min)/2-(s.yRange.max-s.yRange.min)/2;l<0&&(o+=l)}var f,d=so(e);try{for(d.s();!(f=d.n()).done;){var m=f.value;m.x+=r,m.y+=o,a.push(m)}}catch(e){d.e(e)}finally{d.f()}}}for(var d=1;d<o.length;)f(o[d],!0,!1),f(o[d+1],!1,!0),f(o[d+2],!0,!0),d+=3,s=Oo(a);return zo(a)}function Io(e,t,n,r,a){var o=jo(e);t-=2*r,n-=2*r;var i,c,l=Oo(o),s=l.xRange,u=l.yRange;if(s.max===s.min||u.max===u.min)return console.log("not scaling solution: zero size detected"),e;if(a){var f=2*Math.sqrt(a/Math.PI);i=t/f,c=n/f}else i=t/(s.max-s.min),c=n/(u.max-u.min);var d=Math.min(c,i),m=(t-(s.max-s.min)*d)/2,y=(n-(u.max-u.min)*d)/2;return zo(o.map((function(e){return{radius:d*e.radius,x:r+m+(e.x-s.min)*d,y:r+y+(e.y-u.min)*d,setid:e.setid}})))}function zo(e){var t,n={},r=so(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.setid]=a}}catch(e){r.e(e)}finally{r.f()}return n}function jo(e){return Object.keys(e).map((function(t){return Object.assign(e[t],{setid:t})}))}function To(e,t,n){for(var r=t[0].radius-po(t[0],e),a=1;a<t.length;++a){var o=t[a].radius-po(t[a],e);o<=r&&(r=o)}for(var i=0;i<n.length;++i){var c=po(n[i],e)-n[i].radius;c<=r&&(r=c)}return r}function Po(e,t,n){var r,a=[],o=so(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;a.push({x:i.x,y:i.y}),a.push({x:i.x+i.radius/2,y:i.y}),a.push({x:i.x-i.radius/2,y:i.y}),a.push({x:i.x,y:i.y+i.radius/2}),a.push({x:i.x,y:i.y-i.radius/2})}}catch(e){o.e(e)}finally{o.f()}for(var c=a[0],l=To(a[0],e,t),s=1;s<a.length;++s){var u=To(a[s],e,t);u>=l&&(c=a[s],l=u)}var f,d=(0,lo.nelderMead)((function(n){return-1*To({x:n[0],y:n[1]},e,t)}),[c.x,c.y],{maxIterations:500,minErrorDelta:1e-10}).x,m={x:n?0:d[0],y:d[1]},y=!0,p=so(e);try{for(p.s();!(f=p.n()).done;){var h=f.value;if(po(m,h)>h.radius){y=!1;break}}}catch(e){p.e(e)}finally{p.f()}var v,x=so(t);try{for(x.s();!(v=x.n()).done;){var g=v.value;if(po(m,g)<g.radius){y=!1;break}}}catch(e){x.e(e)}finally{x.f()}if(y)return m;if(1==e.length)return{x:e[0].x,y:e[0].y};var b={};return mo(e,b),0===b.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==b.arcs.length?{x:b.arcs[0].circle.x,y:b.arcs[0].circle.y}:t.length?Po(e,[]):xo(b.arcs.map((function(e){return e.p1})))}function qo(e,t,n){for(var r={},a=function(e){for(var t={},n=Object.keys(e),r=0,a=n;r<a.length;r++)t[a[r]]=[];for(var o=0;o<n.length;o++)for(var i=n[o],c=e[i],l=o+1;l<n.length;++l){var s=n[l],u=e[s],f=po(c,u);f+u.radius<=c.radius+1e-10?t[s].push(i):f+c.radius<=u.radius+1e-10&&t[i].push(s)}return t}(e),o=0;o<t.length;++o){for(var i=t[o].sets,c={},l={},s=0;s<i.length;++s){c[i[s]]=!0;for(var u=a[i[s]],f=0;f<u.length;++f)l[u[f]]=!0}var d=[],m=[];for(var y in e)y in c?d.push(e[y]):y in l||m.push(e[y]);var p=Po(d,m,n);r[i]=p,p.disjoint&&t[o].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return r}function Ro(e){if(0===e.length)return[];var t={};return mo(e,t),t.arcs}function Fo(e,t){if(0===e.length)return"M 0 0";var n=Math.pow(10,t||0),r=null!=t?function(e){return Math.round(e*n)/n}:function(e){return e};if(1==e.length){var a=e[0].circle;return function(e,t,n){var r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}(r(a.x),r(a.y),r(a.radius))}var o,i=["\nM",r(e[0].p2.x),r(e[0].p2.y)],c=so(e);try{for(c.s();!(o=c.n()).done;){var l=o.value,s=r(l.circle.radius);i.push("\nA",s,s,0,l.large?1:0,l.sweep?1:0,r(l.p1.x),r(l.p1.y))}}catch(e){c.e(e)}finally{c.f()}return i.join(" ")}function Ho(e){return e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xa(e.map(ha),t)}(e.map((function(e){return Array.isArray(e.elems)||(e.elems=null==e.elems?[]:[e.elems]),e}))):[]}function Bo(e){var t=e[0].type;return function(e,t){var n,r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="function"==typeof t?t:function(e){return e.sets},c=null!==(n="function"!=typeof t?t:o)&&void 0!==n?n:{},l=null!==(r=c.type)&&void 0!==r?r:"intersection",s=null!==(a=c.joiner)&&void 0!==a?a:la[l],u=[],f=new Map,d=e.map((function(e){var t=i(e),n=t.map((function(e){if(f.has(e))return f.get(e);var t={cardinality:0,elems:[],name:e,type:"set"};return u.push(t),f.set(t.name,t),t}));if("distinctIntersection"===l){var r,a=mn(n);try{for(a.s();!(r=a.n()).done;)r.value.cardinality+=e.cardinality}catch(e){a.e(e)}finally{a.f()}}else if(1===t.length)Object.assign(n[0],{cardinality:e.cardinality},e);else if("intersection"===l){var o,c=mn(n);try{for(c.s();!(o=c.n()).done;){var d=o.value;d.cardinality=Math.max(d.cardinality,e.cardinality)}}catch(e){c.e(e)}finally{c.f()}}else if("union"===l){var m,y=mn(n);try{for(y.s();!(m=y.n()).done;){var p=m.value;p.cardinality=Math.min(p.cardinality,e.cardinality)}}catch(e){y.e(e)}finally{y.f()}}var h=t.join(s);return Object.assign({type:l,elems:[],name:h},e,{cardinality:e.cardinality,degree:t.length,sets:new Set(n)})})),m=xa(u,{order:c.setOrder}),y=ca(m,d,{order:c.combinationOrder});return{sets:m,combinations:y}}(e.map((function(e){return{name:e.name,setNames:Array.isArray(e.setNames)?e.setNames:null==e.setNames?[]:[e.setNames],cardinality:e.cardinality}})),(function(e){return e.setNames}),{type:t})}function Uo(e,t){if(!e||Array.isArray(e)&&0===e.length)return null;if(!Array.isArray(e))return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?"intersection":n,a=t.min,o=void 0===a?0:a,i=t.max,c=void 0===i?Number.POSITIVE_INFINITY:i,l=t.empty,s=void 0!==l&&l,u=t.elems,f=void 0===u?[]:u,d=t.notPartOfAnySet,m=t.toElemKey,y=t.mergeColors,p=void 0===y?ua:y,h=[],v=new Map(e.map((function(e,t){return[e,t]}))),x=new Map(e.map((function(e){return[e,m?new Set(e.elems.map(m)):new Set(e.elems)]}))),g=m?null:x,b=m?x:null,_="union"===r?ya:ma;function w(t){if(!(t.degree<o||t.degree>c||0===t.cardinality&&!s))if("distinctIntersection"===r){var n=e.filter((function(e){return!t.sets.has(e)})),a=[];if(m){var i=n.map((function(e){return b.get(e)}));a=t.elems.filter((function(e){var t=m(e);return i.every((function(e){return!e.has(t)}))}))}else{var l=n.map((function(e){return g.get(e)}));a=t.elems.filter((function(e){return l.every((function(t){return!t.has(e)}))}))}if(a.length!==t.cardinality){var u=da(r,t.name,t.sets,a,p);(0!==u.cardinality||s)&&h.push(u)}else h.push(t)}else h.push(t)}function S(e,t,n,a){if(!(t>c))for(var o=e.length,i=0;i<o;i++){for(var l=e[i],u=[],f=i+1;f<o;f++){var d=e[f],m=_(l,d,n,a,v,r,p);w(m),("union"===r||m.cardinality>0||s)&&u.push(m)}u.length>1&&S(u,t+1,n,a)}}o<=0&&w(m?pa(r,d,f,b,m,p):pa(r,d,f,g,(function(e){return e}),p));var M=e.map((function(e){var t=da(r,e.name,new Set([e]),e.elems,p);return x.set(t,x.get(e)),w(t),t}));return m?S(M,2,b,m):S(M,2,g,(function(e){return e})),ca(e,h,t)}(t,e);var n=new Map(t.map((function(e){return[e.name,e]})));return function(e,t,n){return e.map((function(e){return function(e,t,n){var r=n(e);return Object.assign({type:t,cardinality:e.elems.length,sets:new Set(r),degree:r.length},e)}(e,"composite",n)}))}(e.map((function(e){return Array.isArray(e.elems)||(e.elems=null==e.elems?[]:[e.elems]),Array.isArray(e.setNames)||(e.setNames=null==e.setNames?[]:[e.setNames]),e})),0,(function(e){return e.setNames.map((function(e){return n.get(e)})).filter(Boolean)}))}function Ko(e,t,n,r){var a=n.find((function(n){return n.name===e&&null!=t&&t===n.type}));if(a)return a;var o=Array.isArray(e)?e.slice().sort().join("&"):null;return r.find((function(n){return n.name===e||o&&o===function(e){return Array.from(e.sets).map((function(e){return e.name})).sort().join("&")}(n)&&null!=t&&t===n.type}))}var Wo={maxSets:1/0,compute:function(e,t,n,r){var a,o,i,c=t.map((function(e){return{sets:Array.from(e.sets).map((function(e){return e.name})),size:e.cardinality}})),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.lossFunction,r=t.layoutFunction,a=void 0===r?go:r,o=t.normalize,i=void 0===o||o,c=t.orientation,l=void 0===c?Math.PI/2:c,s=t.orientationOrder,u=t.width,f=void 0===u?600:u,d=t.height,m=void 0===d?350:d,y=t.padding,p=void 0===y?15:y,h=t.scaleToFit,v=void 0!==h&&h,x=t.symmetricalTextCentre,g=void 0!==x&&x,b=t.distinct,_=t.round,w=void 0===_?2:_,S=a(e,{lossFunction:"default"!==n&&n?"logRatio"===n?Ao:n:Co,distinct:b});i&&(S=Lo(S,l,s));var M=Io(S,f,m,p,v),E=qo(M,e,g),k=new Map(Object.keys(M).map((function(e){return[e,{set:e,x:M[e].x,y:M[e].y,radius:M[e].radius}]}))),C=e.map((function(e){var t=e.sets.map((function(e){return k.get(e)})),n=Ro(t);return{circles:t,arcs:n,path:Fo(n,w),area:e,has:new Set(e.sets)}}));function A(e){var t,n="",r=so(C);try{var a=function(){var r=t.value;r.has.size>e.length&&e.every((function(e){return r.has.has(e)}))&&(n+=" "+r.path)};for(r.s();!(t=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}return n}return C.map((function(e){var t=e.circles,n=e.arcs,r=e.path,a=e.area;return{data:a,text:E[a.sets],circles:t,arcs:n,path:r,distinctPath:r+A(a.sets)}}))}(c,Object.assign({},{width:n,height:r,distinct:!0},{})),s=l.filter((function(e){return 1===e.data.sets.length})),u=new Map(e.map((function(e,t){return[e.name,t]}))),f=s.map((function(e){return e.circles[0]})),d=(o=(a=f).reduce((function(e,t){return e+t.x}),0),i=a.reduce((function(e,t){return e+t.y}),0),{x:o/a.length,y:i/a.length}),m=function(e){return{x2:e.p1.x,y2:e.p1.y,cx:e.circle.x,cy:e.circle.y,sweep:!0,large:e.width>e.circle.radius,ref:f.findIndex((function(t){return Math.abs(t.x-e.circle.x)<.05&&Math.abs(t.y-e.circle.y)<.05})),mode:"i"}};return{sets:s.map((function(e){var t=e.circles[0],n=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)/Ca}(t,d);return{cx:t.x,cy:t.y,r:t.radius,align:n>90?"end":"start",verticalAlign:"bottom",text:Aa(t.x,t.y,1.1*t.radius,n)}})),intersections:l.map((function(e){var t=e.arcs,n={x:e.text.x,y:e.text.y};if(0===t.length)return{sets:e.data.sets.map((function(e){return u.get(e)})),text:n,x1:0,y1:0,arcs:[]};if(1===t.length){var r=e.arcs[0].circle;return{sets:e.data.sets.map((function(e){return u.get(e)})),text:n,x1:e.arcs[0].p2.x,y1:r.y-r.radius,arcs:[m(e.arcs[0]),Object.assign(m(e.arcs[0]),{y2:r.y-r.radius})],path:e.distinctPath||e.path}}return{sets:e.data.sets.map((function(e){return u.get(e)})),text:n,x1:e.arcs[0].p2.x,y1:e.arcs[0].p2.y,arcs:e.arcs.map((function(e){return m(e)})),path:e.distinctPath||e.path}}))}}};function Do(e,t,n){if(0===n.length)return delete e.setAddons,void delete e.combinationAddons;var r=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.elems?new Map(e.elems.map((function(e,t){return[e,t]}))):t;return"number"===e.type?io((function(t){return r.has(t)?e.values[r.get(t)]:Number.NaN}),{min:e.domain[0],max:e.domain[1]},{name:e.name,quantiles:"hinges",orient:n?"vertical":"horizontal"}):co((function(t){return r.has(t)?e.values[r.get(t)]:""}),{categories:e.categories},{name:e.name,orient:n?"vertical":"horizontal"})};e.setAddons=n.map((function(e){return r(e,!1)})),e.combinationAddons=n.map((function(e){return r(e,!0)}))}var Vo=function(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0};function $o(e){var n=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{interactive:!!n&&"hover",renderMode:"upset",useNonce:!1,elemToIndex:new Map,attrs:[],props:Object.assign({sets:[],width:e,height:t},r)}}(e.width,e.height,!1);return function(e,t){var n;arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Object.keys(t).forEach((function(n){var r=e.props,a=r[n]||[];r[n]=a.concat(t[n])})):Object.assign(e.props,t),"boolean"!=typeof t.interactive&&"string"!=typeof t.interactive||(e.interactive="boolean"==typeof t.interactive?"hover":t.interactive),"boolean"==typeof t.events_nonce&&(e.useNonce=t.events_nonce);var r=t.expressionData;if("string"==typeof t.renderMode&&(e.renderMode=t.renderMode),delete e.props.renderMode,delete e.props.interactive,delete e.props.expressionData,delete e.props.crosstalk,t.elems&&(e.elemToIndex.clear(),t.elems.forEach((function(t,n){return e.elemToIndex.set(t,n)}))),delete e.props.elems,t.attrs&&(e.attrs=t.attrs,Do(e.props,e.elemToIndex,e.attrs)),delete e.props.attrs,null!=t.sets&&(e.props.sets=Ho(e.props.sets)),null!=t.combinations)if(r){var a=Bo(t.combinations);e.props.combinations=a.combinations,e.props.sets=a.sets}else{var o=Uo(t.combinations,e.props.sets);null==o?delete e.props.combinations:e.props.combinations=o}null==t.selection||""===t.selection?e.props.selection=null:"string"==typeof t.selection||Array.isArray(t.selection)?e.props.selection=Ko(t.selection,null,e.props.sets,e.props.combinations):"string"==typeof(null===(n=t.selection)||void 0===n?void 0:n.name)&&(e.props.selection=Ko(t.selection.name,t.selection.type,e.props.sets,e.props.combinations)),t.queries&&(e.props.queries=t.queries.map((function(t){var n=Object.assign({},t);return Gr(t)&&("string"==typeof t.set||Array.isArray(t.set))?n.set=Ko(t.set,t.type,e.props.sets,e.props.combinations):$r(t)&&void 0!==t.elems&&!Array.isArray(t.elems)&&(n.elems=[t.elems]),n})))}(n,e),"venn"===n.renderMode?(delete n.props.layout,t().createElement(Qt,Object.assign({},n.props))):"kmap"===n.renderMode?t().createElement(cn,Object.assign({},n.props)):"euler"===n.renderMode?(n.props.layout=Wo,t().createElement(Qt,Object.assign({},n.props))):t().createElement(Kt,Object.assign({},n.props))}function Go(n){n.id;var r=n.width,a=void 0===r?"100%":r,o=n.height,i=void 0===o?300:o,c=n.children,l=n.setProps,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["id","width","height","children","setProps"]),u=function(t){void 0===t&&(t={});var n=t.onResize,r=(0,e.useRef)(void 0);r.current=n;var a=t.round||Math.round,o=(0,e.useRef)(),i=(0,e.useState)({width:void 0,height:void 0}),c=i[0],l=i[1],s=(0,e.useRef)(!1);(0,e.useEffect)((function(){return function(){s.current=!0}}),[]);var u,f,d,m,y,p,h=(0,e.useRef)({width:void 0,height:void 0}),v=(u=(0,e.useCallback)((function(e){return o.current&&o.current.box===t.box&&o.current.round===a||(o.current={box:t.box,round:a,instance:new ResizeObserver((function(e){var n=e[0],o="border-box"===t.box?"borderBoxSize":"device-pixel-content-box"===t.box?"devicePixelContentBoxSize":"contentBoxSize",i=Vo(n,o,"inlineSize"),c=Vo(n,o,"blockSize"),u=i?a(i):void 0,f=c?a(c):void 0;if(h.current.width!==u||h.current.height!==f){var d={width:u,height:f};h.current.width=u,h.current.height=f,r.current?r.current(d):s.current||l(d)}}))}),o.current.instance.observe(e,{box:t.box}),function(){o.current&&o.current.instance.unobserve(e)}}),[t.box,a]),f=t.ref,d=(0,e.useRef)(null),m=(0,e.useRef)(null),y=(0,e.useRef)(),p=(0,e.useCallback)((function(){var e=null;d.current?e=d.current:f&&(e=f instanceof HTMLElement?f:f.current),m.current&&m.current.element===e&&m.current.reporter===p||(y.current&&(y.current(),y.current=null),m.current={reporter:p,element:e},e&&(y.current=u(e)))}),[f,u]),(0,e.useEffect)((function(){p()}),[p]),(0,e.useCallback)((function(e){d.current=e,p()}),[p]));return(0,e.useMemo)((function(){return{ref:v,width:c.width,height:c.height}}),[v,c?c.width:null,c?c.height:null])}(),f=u.ref,d=u.width,m=void 0===d?300:d,y=u.height,p=void 0===y?300:y,h=(0,e.useCallback)((function(e){l({selection:{name:e?e.name:null,elems:e&&e.elems||[]}})}),[l]);return!0===n.interactive||"hover"===n.interactive?s.onHover=h:"click"===n.interactive?s.onClick=h:"contextMenu"===n.interactive&&(s.onContextMenu=h),t().createElement("div",{ref:f,id:n.id,style:{width:a,height:i}},t().createElement($o,Object.assign({},s,{width:m,height:p})),c)}}(),window.upsetjs=r}();